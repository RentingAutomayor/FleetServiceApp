(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{"mX/K":function(e,t,n){"use strict";n.r(t),n.d(t,"DealerModule",(function(){return Y}));var i=n("ofXK"),r=n("3Pt+"),s=n("Z/wE"),c=n("tyNb"),a=n("uswQ"),o=n("xHqg"),l=n("FGSN"),h=n("2OTn"),d=n("1W2K"),p=n("PSD3"),m=n.n(p),u=n("fXoL"),b=n("FMJ1"),g=n("qxAM");let f=(()=>{class e{constructor(){}setAction(e){this.actionToDo=e}getAction(){return this.actionToDo}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=u.Rb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var M=n("AMxS"),I=n("OJc7"),P=n("bTqV"),C=n("VOuA"),D=n("xch/"),y=n("7I7t"),x=n("p9j/"),v=n("R7St"),_=n("2Vo4"),A=n("vllv"),w=n("oOf3"),B=n("YOAU"),F=n("woZN");function O(e,t){if(1&e){const e=u.cc();u.bc(0,"tr"),u.bc(1,"td"),u.Mc(2),u.ac(),u.bc(3,"td"),u.Mc(4),u.ac(),u.bc(5,"td"),u.Mc(6),u.nc(7,"slice"),u.nc(8,"titlecase"),u.ac(),u.bc(9,"td"),u.Mc(10),u.nc(11,"titlecase"),u.ac(),u.bc(12,"td"),u.Mc(13),u.nc(14,"titlecase"),u.ac(),u.bc(15,"td"),u.bc(16,"input",10),u.ic("keypress",(function(t){return u.Dc(e),u.mc().validateTyping(t)}))("input",(function(n){u.Dc(e);const i=t.$implicit,r=u.mc();return r.formatNumber(n),r.setReferencePriceByItem(n,i)})),u.ac(),u.ac(),u.bc(17,"td"),u.Mc(18),u.nc(19,"currency"),u.nc(20,"calculateTaxes"),u.ac(),u.bc(21,"td"),u.Mc(22),u.nc(23,"currency"),u.nc(24,"calculateTotalPrice"),u.ac(),u.ac()}if(2&e){const e=t.index,n=t.$implicit,i=u.mc();u.Jb(2),u.Nc(e+1),u.Jb(2),u.Nc(n.code),u.Jb(2),u.Nc(u.qc(7,9,u.oc(8,13,n.name),0,40)),u.Jb(4),u.Nc(u.oc(11,15,n.type.name)),u.Jb(3),u.Nc(u.oc(14,17,n.presentationUnit.longName)),u.Jb(3),u.uc("value",i.sharedFunction.formatNumberToString(n.referencePrice))("disabled",i.isFormBlocked),u.Jb(2),u.Oc(" ",u.rc(19,19,u.qc(20,24,n,n.referencePrice,1),"USD","symbol","1.0-0")," "),u.Jb(4),u.Oc(" ",u.rc(23,28,u.qc(24,33,n,n.referencePrice,1),"USD","symbol","1.0-0")," ")}}const T=function(e){return{itemsPerPage:10,currentPage:e}};let k=(()=>{class e{constructor(e){this.maintenanceItemManagerService=e,this.pag=1,this.descriptionToFilter=null,this.lsMaintenanceItems=[],this.lsMaintenanceItemsFiltered=[],this.maintenanceItemsChange=new _.a([]),this.lsMaintenanceItems$=this.maintenanceItemsChange.asObservable(),this.isFormBlocked=!1,this.lsMaintenanceItemsReference=[],this.lsMaintenanceItemsWithPrice=[],this.onItemsWereModified=new u.q,this.sharedFunction=new v.a,this.txtFilter=new r.g,this.isDataFilted=!1,this.lsMaintenanceItems$.subscribe(e=>{this.lsMaintenanceItemsFiltered=e}),this.txtFilter.valueChanges.subscribe(e=>{this.descriptionToFilter=e,this.lsMaintenanceItemsFiltered=this.filterItemsByDescription(this.descriptionToFilter),this.maintenanceItemsChange.next(this.lsMaintenanceItemsFiltered)})}set setIsFormBlocked(e){this.isFormBlocked=e}set setLsMaintenanceItemsReference(e){this.lsMaintenanceItemsReference=e,this.lsMaintenanceItems=this.maintenanceItemManagerService.updatePrices(this.lsMaintenanceItemsReference,this.lsMaintenanceItemsWithPrice),this.maintenanceItemsChange.next(this.lsMaintenanceItemsReference)}set setLsMaintenanceWithPrice(e){this.lsMaintenanceItemsWithPrice=e,this.lsMaintenanceItems=this.maintenanceItemManagerService.updatePrices(this.lsMaintenanceItemsReference,this.lsMaintenanceItemsWithPrice),this.maintenanceItemsChange.next(this.lsMaintenanceItems)}filterItemsByDescription(e){return this.lsMaintenanceItems.filter(t=>null!=e?(this.isDataFilted=!0,t.code.toUpperCase().includes(e.toUpperCase())||t.name.toUpperCase().includes(e.toUpperCase())):(this.isDataFilted=!1,null))}ngOnInit(){this.initComponents()}initComponents(){this.validateCompany()}validateCompany(){try{this.companyStorage=y.a.validateUserAndCompany()}catch(e){console.warn(e)}}validateTyping(e){x.a.validateTyping(e,"numbers")}formatNumber(e){let t=e.target.value.toString().replace(/\,/g,"");t=""!=t?t:0,e.target.value=this.sharedFunction.formatNumberToString(t)}formatStringToNumber(e){return Math.round(parseInt(e.replace(/\,/g,"")))}removeFilter(){this.txtFilter.setValue(null),this.lsMaintenanceItemsFiltered=this.lsMaintenanceItems,this.maintenanceItemsChange.next(this.lsMaintenanceItemsFiltered)}setReferencePriceByItem(e,t){const n=this.lsMaintenanceItems.find(e=>e.id==t.id);n.referencePrice=this.formatStringToNumber(e.target.value);const i=this.lsMaintenanceItems.findIndex(e=>e.id==n.id);this.lsMaintenanceItems[i]=n,this.lsMaintenanceItemsFiltered=this.isDataFilted?this.filterItemsByDescription(this.descriptionToFilter):this.lsMaintenanceItems,this.maintenanceItemsChange.next(this.lsMaintenanceItemsFiltered),this.onItemsWereModified.emit(this.lsMaintenanceItems)}}return e.\u0275fac=function(t){return new(t||e)(u.Vb(A.a))},e.\u0275cmp=u.Pb({type:e,selectors:[["app-tbl-prices-maintenance-items"]],inputs:{setIsFormBlocked:["isFormBlocked","setIsFormBlocked"],setLsMaintenanceItemsReference:["itemsReference","setLsMaintenanceItemsReference"],setLsMaintenanceWithPrice:["itemsWithPrice","setLsMaintenanceWithPrice"]},outputs:{onItemsWereModified:"onItemsWereModified"},decls:29,vars:9,consts:[["id","container__table_items",1,"container__table"],[1,"container-filter"],["placeholder","C\xf3digo \xf3 descripci\xf3n ...","type","text",1,"form-control",3,"formControl"],[1,"btn","btn-danger",3,"click"],[1,"table","table-striped"],[1,"col-number","col-mobile-hide"],[1,"col-mobile-hide"],[4,"ngFor","ngForOf"],[1,"paginationContainer"],[3,"pageChange"],["type","text",1,"form-control","txt-price",3,"value","disabled","keypress","input"]],template:function(e,t){1&e&&(u.bc(0,"div",0),u.bc(1,"div",1),u.Wb(2,"input",2),u.bc(3,"button",3),u.ic("click",(function(){return t.removeFilter()})),u.Mc(4," Borrar filtro "),u.ac(),u.ac(),u.bc(5,"table",4),u.bc(6,"thead"),u.bc(7,"th",5),u.Mc(8,"#"),u.ac(),u.bc(9,"th"),u.Mc(10,"C\xf3digo"),u.ac(),u.bc(11,"th"),u.Mc(12,"Nombre"),u.ac(),u.bc(13,"th",6),u.Mc(14,"Tipo"),u.ac(),u.bc(15,"th",6),u.Mc(16,"Presentaci\xf3n"),u.ac(),u.bc(17,"th",6),u.Mc(18,"Valor sin impuesto"),u.ac(),u.bc(19,"th",6),u.Mc(20,"Valor impuestos"),u.ac(),u.bc(21,"th",6),u.Mc(22,"Valor total x item"),u.ac(),u.ac(),u.bc(23,"tbody"),u.Lc(24,O,25,37,"tr",7),u.nc(25,"paginate"),u.nc(26,"async"),u.ac(),u.ac(),u.bc(27,"div",8),u.bc(28,"pagination-controls",9),u.ic("pageChange",(function(e){return t.pag=e})),u.ac(),u.ac(),u.ac()),2&e&&(u.Jb(2),u.uc("formControl",t.txtFilter),u.Jb(22),u.uc("ngForOf",u.pc(25,2,u.oc(26,5,t.lsMaintenanceItems$),u.xc(7,T,t.pag))))},directives:[r.c,r.q,r.h,i.n,w.c],pipes:[w.b,i.b,i.w,i.x,i.d,B.a,F.a],styles:[".buttons__container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.buttons__container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:200px;margin-left:10px;margin-top:20px}input[_ngcontent-%COMP%]::-webkit-inner-spin-button, input[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}.txt-price[_ngcontent-%COMP%]{width:100px}.container-filter[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-bottom:20px}.container-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:150px;cursor:pointer;margin-left:10px}"]}),e})();var S=n("9Wwi");function U(e,t){1&e&&u.Wb(0,"app-img-loading")}let R=(()=>{class e{constructor(e){this.maintenanceItemService=e,this.isFormBlocked=!1,this.lsMaintenanceItemsReference=[],this.lsMaintenanceItemsWithPrices=[],this.onItemsWereModified=new u.q}set setDealerSelected(e){this.dealerSelected=e,this.getListMaintenanceItems(this.dealerSelected.id),this.getPricesByDealer(this.dealerSelected.id)}set setIsFormBlocked(e){this.isFormBlocked=e}ngOnInit(){}getListMaintenanceItems(e){try{this.isAwaiting=!0,this.maintenanceItemService.getMaintenanceItems(e).subscribe(e=>{this.lsMaintenanceItemsReference=e,this.isAwaiting=!1})}catch(t){this.isAwaiting=!1,console.warn(t)}}getPricesByDealer(e){try{this.isAwaiting=!0,this.maintenanceItemService.getPricesByDealer(e).subscribe(e=>{this.priceByDealer=e,this.lsMaintenanceItemsWithPrices=this.priceByDealer.lsMaintenanceItems,this.isAwaiting=!1})}catch(t){this.isAwaiting=!1,console.warn(t)}}setPricesByDealer(e){this.onItemsWereModified.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(u.Vb(D.a))},e.\u0275cmp=u.Pb({type:e,selectors:[["app-tbl-prices-by-dealer"]],inputs:{setDealerSelected:["dealer","setDealerSelected"],setIsFormBlocked:"setIsFormBlocked"},outputs:{onItemsWereModified:"onItemsWereModified"},decls:5,vars:7,consts:[[3,"itemsReference","itemsWithPrice","isFormBlocked","onItemsWereModified"],[4,"ngIf"]],template:function(e,t){1&e&&(u.bc(0,"h2"),u.Mc(1),u.nc(2,"titlecase"),u.ac(),u.bc(3,"app-tbl-prices-maintenance-items",0),u.ic("onItemsWereModified",(function(e){return t.setPricesByDealer(e)})),u.ac(),u.Lc(4,U,1,0,"app-img-loading",1)),2&e&&(u.Jb(1),u.Oc("Precios por art\xedculo de mantenimiento: ",null!=t.dealerSelected?t.dealerSelected.name:u.oc(2,5,"")," "),u.Jb(2),u.uc("itemsReference",t.lsMaintenanceItemsReference)("itemsWithPrice",t.lsMaintenanceItemsWithPrices)("isFormBlocked",t.isFormBlocked),u.Jb(1),u.uc("ngIf",t.isAwaiting))},directives:[k,i.o,S.a],pipes:[i.x],styles:["h2[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:40px}"]}),e})();var W=n("KBxE");function L(e,t){1&e&&u.Mc(0,"Datos b\xe1sicos del concesionario")}function E(e,t){1&e&&u.Mc(0,"Sucursales")}function J(e,t){1&e&&u.Mc(0,"Contactos")}function V(e,t){1&e&&u.Mc(0,"Precios por insumo")}function N(e,t){if(1&e){const e=u.cc();u.bc(0,"button",16),u.ic("click",(function(){return u.Dc(e),u.mc().saveDealer()})),u.Mc(1," Guardar Concesionario "),u.ac()}}function $(e,t){if(1&e){const e=u.cc();u.bc(0,"app-alert-error",17),u.ic("onAlertWasClose",(function(){return u.Dc(e),u.mc().closeErrorMessage()})),u.ac()}if(2&e){const e=u.mc();u.uc("title",e.errorTitle)("errorMessage",e.errorMessageApi)}}function j(e,t){1&e&&u.Wb(0,"app-img-loading")}let q=(()=>{class e{constructor(e,t,n,i,r){this.dealerService=e,this.personService=t,this.navigationService=n,this.router=i,this.activeRoute=r,this.isAwaiting=!0,this.lsContacts=[],this.lsBranches=[],this.lsMaintenanceItems=[],this.maintenceItems=[],this.dealerID="",this.blockFormDealer=!1,this.isErrorVisible=!1,this.errorTitle="",this.errorMessageApi="",this.sReturnPath="/MasterDealers",this.oIsToDealer=!0}ngOnInit(){this.action=parseInt(Object(d.a)("actionToPerform")),this.validateActionToDo(this.action),this.initComponents(),this.extractDataFromParams()}initComponents(){this.configurePersonComponent(),this.errorMessage="",this.bFormHasError=!1,this.oDealerWasSaved=!1}extractDataFromParams(){this.isAwaiting=!0,this.activeRoute.paramMap.subscribe(e=>{this.dealerID=e.get("id"),this.dealerID?this.dealerService.getDealerById(parseInt(this.dealerID)).subscribe(e=>{this.oDealerToUpdate=e,this.lsContacts=e.contacts,this.lsBranches=e.branches,this.lsMaintenanceItems=e.maintenanceItems,this.isAwaiting=!1}):(this.oDealerToUpdate={id:0,document:"",name:"",phone:"",cellphone:"",address:"",email:"",website:"",city:{id:0,name:"",departmentId:0,state:!1},contacts:[],branches:[],state:!1,registrationDate:null,updateDate:null,deleteDate:null},this.lsContacts=[],this.lsBranches=[],this.lsMaintenanceItems=[],this.isAwaiting=!1)})}validateActionToDo(e){this.blockFormDealer=e==l.a.READ}configurePersonComponent(){this.oConfigPersonComp=new h.a,this.oConfigPersonComp.documentIsVisible=!0,this.oConfigPersonComp.nameIsVisible=!0}updateContactsToDealer(e){this.lsContacts=e}updateBranchesToDealer(e){this.lsBranches=e}setMaintenanceItemsByDealer(e){this.maintenceItems=e.map(e=>{const t=this.lsMaintenanceItems.find(t=>t.code===e.code);if((null==t?void 0:t.referencePrice)!==(null==e?void 0:e.referencePrice))return e}).filter(e=>e)}async setPersonInfo(){this.oDealerToUpdate=this.personService.getPerson(),await setTimeout(()=>{this.stepper.next()},100)}comeBack(){(this.action==l.a.READ||confirm("\xbfEst\xe1 seguro que desea regresar? , al hacerlo perder\xe1 los cambios consignados ac\xe1."))&&this.router.navigate([this.sReturnPath])}saveDealer(){this.isAwaiting=!0;const e=this.oDealerToUpdate;e.contacts=this.lsContacts,e.branches=this.lsBranches,e.maintenanceItems=this.maintenceItems,this.action==l.a.CREATE?this.dealerService.insertDealer(e).subscribe(e=>{m.a.fire({position:"center",icon:"success",title:"El concesionario ha sido insertado de manera correcta en la base de datos",showConfirmButton:!0}),this.isAwaiting=!1,this.router.navigate([this.sReturnPath])},e=>{this.isErrorVisible=!0,this.isAwaiting=!1,this.errorTitle="Ocurri\xf3 un error intentando Insertar el concesionario",this.errorMessageApi=e.error.Message}):this.action==l.a.UPDATE&&this.dealerService.updateDealer(e).subscribe(e=>{m.a.fire({position:"center",icon:"success",title:"El concesionario ha sido actualizado de manera correcta",showConfirmButton:!0}),this.isAwaiting=!1,this.router.navigate([this.sReturnPath])},e=>{this.isErrorVisible=!0,this.isAwaiting=!1,this.errorTitle="Ocurri\xf3 un error intentando Actualizar el concesionario",this.errorMessageApi=e.error.Message})}closeErrorMessage(){this.isErrorVisible=!1}}return e.\u0275fac=function(t){return new(t||e)(u.Vb(b.a),u.Vb(g.a),u.Vb(f),u.Vb(c.b),u.Vb(c.a))},e.\u0275cmp=u.Pb({type:e,selectors:[["app-dealer"]],viewQuery:function(e,t){var n;1&e&&u.Qc(o.f,!0),2&e&&u.Bc(n=u.jc())&&(t.stepper=n.first)},decls:34,vars:20,consts:[["id","container__content"],[3,"linear"],["matStepLabel",""],[1,"card"],[3,"frmPersonMustBeBlocked","configComponent","personToUpdate","returnPath","formHasError","error","personWasSetted"],[3,"dealer","branchs","action","disableActionButtons","onBranchsWereModified"],[1,"container-step-buttons"],["matStepperPrevious","","type","button","mat-raised-button","","color","primary",1,"btn-step"],["matStepperNext","","type","button","mat-raised-button","","color","primary",1,"btn-step"],[3,"dealer","contacts","action","disableActionButtons","onContactsWereModified"],[3,"dealer","setIsFormBlocked","onItemsWereModified"],[1,"buttons__container"],["type","button",1,"btn","btn-danger",3,"click"],["type","button","class","btn btn-success",3,"click",4,"ngIf"],[3,"title","errorMessage","onAlertWasClose",4,"ngIf"],[4,"ngIf"],["type","button",1,"btn","btn-success",3,"click"],[3,"title","errorMessage","onAlertWasClose"]],template:function(e,t){1&e&&(u.bc(0,"div",0),u.bc(1,"mat-vertical-stepper",1),u.bc(2,"mat-step"),u.Lc(3,L,1,0,"ng-template",2),u.bc(4,"div",3),u.bc(5,"app-person",4),u.ic("personWasSetted",(function(){return t.setPersonInfo()})),u.ac(),u.ac(),u.ac(),u.bc(6,"mat-step"),u.Lc(7,E,1,0,"ng-template",2),u.bc(8,"app-branch",5),u.ic("onBranchsWereModified",(function(e){return t.updateBranchesToDealer(e)})),u.ac(),u.bc(9,"div",6),u.bc(10,"button",7),u.Mc(11," Atr\xe1s "),u.ac(),u.bc(12,"button",8),u.Mc(13," Siguiente "),u.ac(),u.ac(),u.ac(),u.bc(14,"mat-step"),u.Lc(15,J,1,0,"ng-template",2),u.bc(16,"app-contact",9),u.ic("onContactsWereModified",(function(e){return t.updateContactsToDealer(e)})),u.ac(),u.bc(17,"div",6),u.bc(18,"button",7),u.Mc(19," Atr\xe1s "),u.ac(),u.bc(20,"button",8),u.Mc(21," Siguiente "),u.ac(),u.ac(),u.ac(),u.bc(22,"mat-step"),u.Lc(23,V,1,0,"ng-template",2),u.bc(24,"app-tbl-prices-by-dealer",10),u.ic("onItemsWereModified",(function(e){return t.setMaintenanceItemsByDealer(e)})),u.ac(),u.bc(25,"div",6),u.bc(26,"button",7),u.Mc(27," Atr\xe1s "),u.ac(),u.ac(),u.bc(28,"div",11),u.bc(29,"button",12),u.ic("click",(function(){return t.comeBack()})),u.Mc(30," Cancelar "),u.ac(),u.Lc(31,N,2,0,"button",13),u.ac(),u.ac(),u.ac(),u.Lc(32,$,1,2,"app-alert-error",14),u.ac(),u.Lc(33,j,1,0,"app-img-loading",15)),2&e&&(u.Jb(1),u.uc("linear",!0),u.Jb(4),u.uc("frmPersonMustBeBlocked",t.blockFormDealer)("configComponent",t.oConfigPersonComp)("personToUpdate",t.oDealerToUpdate)("returnPath",t.sReturnPath)("formHasError",t.bFormHasError)("error",t.errorMessage),u.Jb(3),u.uc("dealer",t.oDealerToUpdate)("branchs",t.lsBranches)("action",t.action)("disableActionButtons",t.blockFormDealer),u.Jb(8),u.uc("dealer",t.oDealerToUpdate)("contacts",t.lsContacts)("action",t.action)("disableActionButtons",t.blockFormDealer),u.Jb(8),u.uc("dealer",t.oDealerToUpdate)("setIsFormBlocked",t.blockFormDealer),u.Jb(7),u.uc("ngIf",!t.blockFormDealer),u.Jb(1),u.uc("ngIf",t.isErrorVisible),u.Jb(1),u.uc("ngIf",t.isAwaiting))},directives:[o.f,o.a,o.b,M.a,I.a,o.e,P.a,o.d,C.a,R,i.o,W.a,S.a],styles:[".card-body[_ngcontent-%COMP%]{padding:10px}.container__titles[_ngcontent-%COMP%]{overflow:hidden;border:1px solid #ccc;background-color:#f1f1f1}.container__titles[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:inherit;float:left;border:none;outline:none;cursor:pointer;padding:14px 16px;transition:.3s;font-size:20px}.container__titles[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#ddd}.container__titles[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:#ccc}.tab_content[_ngcontent-%COMP%]{padding:20px 50px;border:1px solid #ccc;border-top:none}#container__content[_ngcontent-%COMP%]{transition:margin-left 1s;padding:20px;margin-left:250px}.container-step-buttons[_ngcontent-%COMP%]{direction:ltr;display:flex;justify-content:flex-end}.container-step-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:5px;width:100px}.buttons__container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.buttons__container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:200px;margin-left:10px;margin-top:20px}"]}),e})();var H=n("QgiH");function G(e,t){if(1&e){const e=u.cc();u.bc(0,"tr"),u.bc(1,"th",8),u.Mc(2),u.ac(),u.bc(3,"td"),u.Mc(4),u.ac(),u.bc(5,"td"),u.Mc(6),u.nc(7,"titlecase"),u.ac(),u.bc(8,"td"),u.bc(9,"i",15),u.ic("click",(function(){u.Dc(e);const n=t.$implicit;return u.mc().getDetailsByDealer(n.id)})),u.ac(),u.bc(10,"i",16),u.ic("click",(function(){u.Dc(e);const n=t.$implicit;return u.mc().updateDealer(n.id)})),u.ac(),u.bc(11,"i",17),u.ic("click",(function(){u.Dc(e);const n=t.$implicit;return u.mc().deleteDealer(n)})),u.ac(),u.ac(),u.ac()}if(2&e){const e=t.index,n=t.$implicit;u.Jb(2),u.Nc(e+1),u.Jb(2),u.Nc(n.document),u.Jb(2),u.Nc(u.oc(7,3,n.name))}}function z(e,t){if(1&e){const e=u.cc();u.bc(0,"app-alert-error",18),u.ic("onAlertWasClose",(function(){return u.Dc(e),u.mc().closeErrorMessage()})),u.ac()}if(2&e){const e=u.mc();u.uc("title",e.errorTitle)("errorMessage",e.errorMessageApi)}}function K(e,t){1&e&&u.Wb(0,"app-img-loading")}const Q=function(e){return{itemsPerPage:10,currentPage:e}},X=[{path:"",component:a.a,children:[{path:"",component:(()=>{class e{constructor(e,t,n){this.router=e,this.dealerService=t,this.navigationService=n,this.lsDealer=[],this.lsDealerFiltered=[],this.p=1,this.isErrorVisible=!1,this.errorTitle="",this.errorMessageApi="",this.txtFilter=new r.g,this.txtFilter.valueChanges.subscribe(e=>{this.lsDealerFiltered=this.lsDealer.filter(t=>{if(null!=e)return t.document.includes(e)||t.name.toUpperCase().includes(e.toUpperCase())})})}ngOnInit(){this.initComponents()}initComponents(){this.showTableDealers()}showTableDealers(){try{this.isAwaiting=!0,this.dealerService.getDealers().subscribe(e=>{this.lsDealer=e,this.lsDealerFiltered=e}),this.isAwaiting=!1}catch(e){console.error(e.error.Message)}}updateDealer(e){this.action=l.a.UPDATE,Object(d.b)("actionToPerform",this.action),this.router.navigate(["/MasterDealers/Dealer",e])}getDetailsByDealer(e){this.action=l.a.READ,Object(d.b)("actionToPerform",this.action),this.router.navigate(["/MasterDealers/Dealer",e])}deleteDealer(e){confirm("\xbfEst\xe1 seguro que desea eliminar este concesionario?")&&(this.isAwaiting=!0,this.dealerService.deleteDealer(e).subscribe(t=>{const n=this.lsDealer.findIndex(t=>t.id==e.id);this.lsDealer.splice(n,1),this.lsDealerFiltered=this.lsDealer,this.isAwaiting=!1,m.a.fire({position:"center",icon:"success",title:t.message,showConfirmButton:!0})},e=>{this.isErrorVisible=!0,this.isAwaiting=!1,this.errorTitle="Ocurri\xf3 un error intentando Actualizar el concesionario",this.errorMessageApi=e.error.Message}))}insertDealer(){this.action=l.a.CREATE,Object(d.b)("actionToPerform",this.action),this.router.navigate(["/MasterDealers/Dealer"])}validateCityName(e){return""}removeFilter(){this.txtFilter.setValue(null),this.lsDealerFiltered=this.lsDealer}closeErrorMessage(){this.isErrorVisible=!1}downloadExcel(){const e=this.lsDealer.map(e=>({Documento:e.document,RazonSocial:e.name}));H.a.convertArrayToFile(e,"Concesionarios")}}return e.\u0275fac=function(t){return new(t||e)(u.Vb(c.b),u.Vb(b.a),u.Vb(f))},e.\u0275cmp=u.Pb({type:e,selectors:[["app-tbl-dealer"]],decls:30,vars:9,consts:[["id","container__content"],[1,"container-filter"],["placeholder","Nit \xf3 Nombre...","type","text",1,"form-control",3,"formControl"],["type","button",1,"btn","btn-danger",3,"click"],[1,"btn","btn-primary",3,"click"],[1,"btn-add","btn-info",3,"click"],[1,"fas","fa-plus"],[1,"table","table-striped"],[1,"col-number","col-mobile-hide"],[1,"col-mobile-hide"],[4,"ngFor","ngForOf"],[1,"paginationContainer"],[3,"pageChange"],[3,"title","errorMessage","onAlertWasClose",4,"ngIf"],[4,"ngIf"],["title","M\xe1s informaci\xf3n",1,"fas","fa-info-circle","text-info",3,"click"],["title","Modificar",1,"fas","fa-edit","text-warning",3,"click"],["title","Eliminar",1,"fas","fa-trash-alt","text-danger",3,"click"],[3,"title","errorMessage","onAlertWasClose"]],template:function(e,t){1&e&&(u.bc(0,"div",0),u.bc(1,"h1"),u.Mc(2,"Concesionarios"),u.ac(),u.bc(3,"label"),u.Mc(4,"Buscar concesionarios por ..."),u.ac(),u.bc(5,"div",1),u.Wb(6,"input",2),u.bc(7,"button",3),u.ic("click",(function(){return t.removeFilter()})),u.Mc(8," Borrar filtro "),u.ac(),u.bc(9,"button",4),u.ic("click",(function(){return t.downloadExcel()})),u.Mc(10," Descargar Excel "),u.ac(),u.ac(),u.bc(11,"button",5),u.ic("click",(function(){return t.insertDealer()})),u.Wb(12,"i",6),u.ac(),u.bc(13,"table",7),u.bc(14,"thead"),u.bc(15,"th",8),u.Mc(16,"#"),u.ac(),u.bc(17,"th"),u.Mc(18,"Documento"),u.ac(),u.bc(19,"th"),u.Mc(20,"Raz\xf3n social"),u.ac(),u.bc(21,"th",9),u.Mc(22,"Acciones"),u.ac(),u.ac(),u.bc(23,"tbody"),u.Lc(24,G,12,5,"tr",10),u.nc(25,"paginate"),u.ac(),u.ac(),u.bc(26,"div",11),u.bc(27,"pagination-controls",12),u.ic("pageChange",(function(e){return t.p=e})),u.ac(),u.ac(),u.Lc(28,z,1,2,"app-alert-error",13),u.ac(),u.Lc(29,K,1,0,"app-img-loading",14)),2&e&&(u.Jb(6),u.uc("formControl",t.txtFilter),u.Jb(18),u.uc("ngForOf",u.pc(25,4,t.lsDealerFiltered,u.xc(7,Q,t.p))),u.Jb(4),u.uc("ngIf",t.isErrorVisible),u.Jb(1),u.uc("ngIf",t.isAwaiting))},directives:[r.c,r.q,r.h,i.n,w.c,i.o,W.a,S.a],pipes:[w.b,i.x],styles:["i[_ngcontent-%COMP%]{margin:0 3px;cursor:pointer}.col-number[_ngcontent-%COMP%]{max-width:50px;width:50px}.btn-add[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{cursor:pointer}.btn-add[_ngcontent-%COMP%]{border-radius:50%;width:50px;height:50px;position:relative;left:93%;margin-bottom:20px;top:10px;outline:none;text-align:center;font-size:24px;border:none;z-index:55}#container__content[_ngcontent-%COMP%]{transition:margin-left 1s;padding:20px 50px;margin-left:250px}@media only screen and (max-width:600px){.col-mobile-hide[_ngcontent-%COMP%]{display:none}.btn-add[_ngcontent-%COMP%]{left:80vw}}.container-filter[_ngcontent-%COMP%]{display:flex;flex-direction:row}.container-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:150px;cursor:pointer;margin-left:10px}"]}),e})()},{path:"Dealer",component:q},{path:"Dealer/:id",component:q}]}];let Z=(()=>{class e{}return e.\u0275mod=u.Tb({type:e}),e.\u0275inj=u.Sb({factory:function(t){return new(t||e)},imports:[[c.f.forChild(X)],c.f]}),e})(),Y=(()=>{class e{}return e.\u0275mod=u.Tb({type:e}),e.\u0275inj=u.Sb({factory:function(t){return new(t||e)},imports:[[i.c,s.a,r.l,r.w,Z,o.c,P.b]]}),e})()},"xch/":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("tk/3"),r=n("AytR"),s=n("fXoL");let c=(()=>{class e{constructor(e){this.http=e,this.URL_API=r.a.apiUrl+"/MaintenanceItem",this.HttpOptions={headers:new i.c({"Content-Type":"application/json"})}}getCategorySelected(){return this.category}setCategorySelected(e){this.category=e}getPresentationUnit(){return this.presentationUnit}setPresentationUnit(e){this.presentationUnit=e}getTypeOfItem(){return this.typeOfItem}getItem(){return this.item}setItem(e){this.item=e}settypeOfItem(e){this.typeOfItem=e}getItemToUpdate(){return this.itemToUpdate}setItemToUpdate(e){this.itemToUpdate=e}getMaintenanceItems(e){return this.http.get(`${this.URL_API}/Get?dealer_id=${e}`)}getMaintenanceItemById(e){return this.http.get(`${this.URL_API}/GetById?itemId=${e}`)}getItemsByVehicleModel(e){return this.http.get(`${this.URL_API}/GetItemsByVehicleModel?vehicleModel_id=${e}`)}getPresentationUnits(){return this.http.get(this.URL_API+"/GetPresentationUnits")}getCategories(){return this.http.get(this.URL_API+"/GetCategories")}getTypeOfMaintenanceItem(){return this.http.get(this.URL_API+"/getTypeOfMaintenanceItem")}getPricesByDealer(e){return this.http.get(`${this.URL_API}/GetPricesByDealer?dealer_id=${e}`)}setPricesByDealer(e){return this.http.post(this.URL_API+"/SetPricesByDealer",e,this.HttpOptions)}getPricesByContract(e){return this.http.get(`${this.URL_API}/GetPricesByContract?contract_id=${e}`)}setPricesByContract(e){return this.http.post(this.URL_API+"/SetPricesByContract",e,this.HttpOptions)}getTaxesList(){return this.http.get(this.URL_API+"/GetTaxesList")}insert(e){return this.http.post(this.URL_API+"/Insert",e,this.HttpOptions)}update(e){return this.http.put(this.URL_API+"/Update",e,this.HttpOptions)}delete(e){return this.http.delete(`${this.URL_API}/Delete?maintenanceItemId=${e.id}`,this.HttpOptions)}calculateTaxes(e,t){let n=0;if(t.length>0)for(const i of t)n+=Math.round(e*(i.percentValue/100));return n}calculateTotalByItem(e,t,n){return Math.round(e-t+n)}getItemRAAdministration(){return this.http.get(this.URL_API+"/GetByTypeId?typeId=3")}updateMaintence(e){return this.http.post(this.URL_API+"/Update",e)}}return e.\u0275fac=function(t){return new(t||e)(s.fc(i.a))},e.\u0275prov=s.Rb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);