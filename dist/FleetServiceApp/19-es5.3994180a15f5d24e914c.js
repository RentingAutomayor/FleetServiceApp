!function(){function e(e,t,n,o,i,r,c){try{var a=e[r](c),s=a.value}catch(u){return void n(u)}a.done?t(s):Promise.resolve(s).then(o,i)}function t(t){return function(){var n=this,o=arguments;return new Promise((function(i,r){var c=t.apply(n,o);function a(t){e(c,i,r,a,s,"next",t)}function s(t){e(c,i,r,a,s,"throw",t)}a(void 0)}))}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{aouF:function(e,o,r){"use strict";r.d(o,"a",(function(){return u}));var c=r("tk/3"),a=r("AytR"),s=r("fXoL"),u=function(){var e=function(){function e(t){n(this,e),this.http=t,this.URL_API=a.a.apiUrl+"/Movement",this.HttpOptions={headers:new c.c({"Content-Type":"application/json"})}}var o,r,s,u,m,p;return i(e,[{key:"getMovementTypeSelected",value:function(){return this.movementTypeSelected}},{key:"setMovementTypeSelected",value:function(e){this.movementTypeSelected=e}},{key:"getMovementToUpdate",value:function(){return this.movementToUpdate}},{key:"setMovementToUpdate",value:function(e){this.movementToUpdate=e}},{key:"getMovementTypes",value:(p=t(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.http.get(this.URL_API+"/GetTypes").toPromise());case 1:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"getMovements",value:(m=t(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.http.get(this.URL_API+"/Get").toPromise());case 1:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:"getMovementById",value:(u=t(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.http.get("".concat(this.URL_API,"/GetById?pMovement_id=").concat(t)).toPromise());case 1:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"insert",value:(s=t(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.http.post(this.URL_API+"/Insert",t,this.HttpOptions).toPromise());case 1:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"update",value:(r=t(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.http.post(this.URL_API+"/Update",t,this.HttpOptions).toPromise());case 1:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"delete",value:(o=t(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.http.post(this.URL_API+"/Delete",t,this.HttpOptions).toPromise());case 1:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.fc(c.a))},e.\u0275prov=s.Rb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},jvTp:function(e,t,o){"use strict";o.d(t,"a",(function(){return i})),o.d(t,"b",(function(){return r}));var i=function e(){n(this,e)},r=function(e){return e[e.CREACION_DE_CUPO=1]="CREACION_DE_CUPO",e[e.ADICION_DE_CUPO=2]="ADICION_DE_CUPO",e[e.CANCELACION_DE_CUPO=3]="CANCELACION_DE_CUPO",e[e.ORDEN_DE_TRABAJO=4]="ORDEN_DE_TRABAJO",e[e.APROBACION_DE_ORDEN_DE_TRABAJO=5]="APROBACION_DE_ORDEN_DE_TRABAJO",e[e.CANCELACION_DE_ORDEN_DE_TRABAJO=6]="CANCELACION_DE_ORDEN_DE_TRABAJO",e[e.LIBERACION_DE_CUPO=7]="LIBERACION_DE_CUPO",e[e.FINALIZACION_ORDEN_DE_TRABAJO=8]="FINALIZACION_ORDEN_DE_TRABAJO",e[e.ANULACION_ORDEN_DE_TRABAJO=9]="ANULACION_ORDEN_DE_TRABAJO",e}({})},xVXS:function(e,o,r){"use strict";r.r(o),r.d(o,"MovementModule",(function(){return P}));var c=r("ofXK"),a=r("3Pt+"),s=r("Z/wE"),u=r("tyNb"),m=r("uswQ"),p=r("jvTp"),l=function e(){n(this,e)},v=r("PSD3"),f=r.n(v),d=r("fXoL"),h=r("aouF");function g(e,t){if(1&e&&(d.bc(0,"option",2),d.Mc(1),d.nc(2,"titlecase"),d.ac()),2&e){var n=t.$implicit;d.uc("value",n.id),d.Jb(1),d.Oc(" ",d.oc(2,2,n.name),"")}}var b,_=((b=function(){function e(t){n(this,e),this.movementService=t,this.frmMovementType=new a.j({cmbMovementType:new a.g("Seleccione...")})}var o;return i(e,[{key:"ngOnChanges",value:function(e){for(var t in e)"countChanges"==t&&this.validateMovementTypeSelected()}},{key:"ngOnInit",value:function(){this.initComponents()}},{key:"initComponents",value:function(){this.getMovementTypeList()}},{key:"getMovementTypeList",value:(o=t(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.movementService.getMovementTypes();case 3:this.lsMovementType=e.sent,this.validateMovementTypeSelected(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.warn(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return o.apply(this,arguments)})},{key:"validateMovementTypeSelected",value:function(){this.movementTypeSelected=this.movementService.getMovementTypeSelected(),null!=this.movementTypeSelected&&null!=this.movementTypeSelected?this.setDataInForm(this.movementTypeSelected):this.clearDataInForm()}},{key:"setMovementType",value:function(e){var t=this.lsMovementType.find((function(t){return t.id==e.value}));this.movementService.setMovementTypeSelected(t)}},{key:"setDataInForm",value:function(e){var t=this,n=this.frmMovementType.controls.cmbMovementType;setTimeout((function(){n.setValue(e.id),t.movementService.setMovementTypeSelected(e)}),300)}},{key:"clearDataInForm",value:function(){this.frmMovementType.controls.cmbMovementType.setValue(0)}}]),e}()).\u0275fac=function(e){return new(e||b)(d.Vb(h.a))},b.\u0275cmp=d.Pb({type:b,selectors:[["app-movement-type"]],inputs:{countChanges:"countChanges"},features:[d.Hb],decls:7,vars:3,consts:[[3,"formGroup"],["formControlName","cmbMovementType",1,"browser-default","custom-select",3,"change"],[3,"value"],[3,"value",4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(d.bc(0,"form",0),d.bc(1,"label"),d.Mc(2,"Tipo de movimiento"),d.ac(),d.bc(3,"select",1),d.ic("change",(function(e){return t.setMovementType(e.target)})),d.bc(4,"option",2),d.Mc(5,"Seleccione ..."),d.ac(),d.Lc(6,g,3,4,"option",3),d.ac(),d.ac()),2&e&&(d.uc("formGroup",t.frmMovementType),d.Jb(4),d.uc("value",0),d.Jb(2),d.uc("ngForOf",t.lsMovementType))},directives:[a.B,a.r,a.k,a.x,a.q,a.i,a.u,a.A,c.n],pipes:[c.x],styles:[""]}),b),y=r("9Wwi");function M(e,t){1&e&&d.Wb(0,"app-img-loading")}var C,w=((C=function(){function e(t,o){n(this,e),this.router=t,this.movementService=o,this.frmMovement=new a.j({txtName:new a.g(""),txtDescription:new a.g("")})}var o;return i(e,[{key:"ngOnChanges",value:function(e){for(var t in e)"countChanges"==t&&this.validateMovementToUpdate()}},{key:"ngOnInit",value:function(){this.initComponents()}},{key:"initComponents",value:function(){this.validateMovementToUpdate()}},{key:"validateMovementToUpdate",value:function(){this.movementToUpdate=this.movementService.getMovementToUpdate(),null!=this.movementToUpdate&&null!=this.movementToUpdate?(this.isToUpdate=!0,this.setDataInForm(this.movementToUpdate)):(this.isToUpdate=!1,this.clearDataInForm())}},{key:"comeBackTable",value:function(){this.router.navigate(["/MasterMovements"])}},{key:"getDataForm",value:function(){var e=this.frmMovement.controls,t=e.txtName,n=e.txtDescription,o=new p.a;return null!=this.movementToUpdate&&null!=this.movementToUpdate&&(o.id=this.movementToUpdate.id),o.name=t.value,o.name=o.name.toUpperCase(),o.description=n.value,o.description=o.description.toUpperCase(),o.type=this.movementService.getMovementTypeSelected(),o}},{key:"setDataInForm",value:function(e){var t=this.frmMovement.controls,n=t.txtName,o=t.txtDescription;n.setValue(e.name.toLocaleLowerCase()),o.setValue(e.description.toLocaleLowerCase()),this.movementService.setMovementTypeSelected(e.type),this.countChanges+=1}},{key:"clearDataInForm",value:function(){var e=this.frmMovement.controls,t=e.txtName,n=e.txtDescription;t.setValue(""),n.setValue(""),this.movementService.setMovementTypeSelected(null),this.countChanges+=1}},{key:"saveMovement",value:(o=t(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=this.getDataForm(),n=new l,this.isAwaiting=!0,!this.isToUpdate){e.next=10;break}return e.next=7,this.movementService.update(t);case 7:e.t0=e.sent,e.next=13;break;case 10:return e.next=12,this.movementService.insert(t);case 12:e.t0=e.sent;case 13:n=e.t0,this.isAwaiting=!1,n.response&&(f.a.fire({position:"center",icon:"success",title:n.message,showConfirmButton:!0}),this.router.navigate(["/MasterMovements"])),e.next=21;break;case 18:e.prev=18,e.t1=e.catch(0),console.warn(e.t1);case 21:case"end":return e.stop()}}),e,this,[[0,18]])}))),function(){return o.apply(this,arguments)})},{key:"openTab",value:function(e,t){for(var n=document.getElementsByClassName("tab_link"),o=0;o<n.length;o++)n[o].classList.remove("active");e.target.className+=" active";for(var i=document.getElementsByClassName("tab_content"),r=0;r<i.length;r++)i[r].setAttribute("style","display:none");document.getElementById("container__"+t).setAttribute("style","display:blick")}},{key:"hideContainerTabs",value:function(){for(var e=document.getElementsByClassName("tab_inactive"),t=0;t<e.length;t++)e[t].setAttribute("style","display:none")}}]),e}()).\u0275fac=function(e){return new(e||C)(d.Vb(u.b),d.Vb(h.a))},C.\u0275cmp=d.Pb({type:C,selectors:[["app-movement"]],inputs:{countChanges:"countChanges"},features:[d.Hb],decls:24,vars:3,consts:[["id","container__content"],[1,"container__tabPanel"],[1,"container__titles"],[1,"tab_link","active",3,"click"],[3,"formGroup"],["id","container__basicData",1,"tab_content"],[1,"row__container"],[1,"col"],["type","text","formControlName","txtName","placeholder","Nombre ...",1,"form-control"],[3,"countChanges"],[1,"row__container__single"],["formControlName","txtDescription","cols","10","rows","2",1,"form-control"],["id","container__buttons",1,"buttons__container"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-success",3,"click"],[4,"ngIf"]],template:function(e,t){1&e&&(d.bc(0,"div",0),d.bc(1,"div",1),d.bc(2,"div",2),d.bc(3,"button",3),d.ic("click",(function(e){return t.openTab(e,"basicData")})),d.Mc(4,"Datos del movimiento"),d.ac(),d.ac(),d.ac(),d.bc(5,"form",4),d.bc(6,"div",5),d.bc(7,"div",6),d.bc(8,"div",7),d.bc(9,"label"),d.Mc(10,"Nombre"),d.ac(),d.Wb(11,"input",8),d.ac(),d.bc(12,"div",7),d.Wb(13,"app-movement-type",9),d.ac(),d.ac(),d.bc(14,"div",10),d.bc(15,"label"),d.Mc(16,"Descripci\xf3n"),d.ac(),d.Wb(17,"textarea",11),d.ac(),d.ac(),d.ac(),d.bc(18,"div",12),d.bc(19,"button",13),d.ic("click",(function(){return t.comeBackTable()})),d.Mc(20,"Cancelar"),d.ac(),d.bc(21,"button",14),d.ic("click",(function(){return t.saveMovement()})),d.Mc(22,"Guardar"),d.ac(),d.ac(),d.ac(),d.Lc(23,M,1,0,"app-img-loading",15)),2&e&&(d.Jb(5),d.uc("formGroup",t.frmMovement),d.Jb(8),d.uc("countChanges",t.countChanges),d.Jb(10),d.uc("ngIf",t.isAwaiting))},directives:[a.B,a.r,a.k,a.c,a.q,a.i,_,c.o,y.a],styles:[".container__row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-row:1fr}.container__col[_ngcontent-%COMP%], .container__observation[_ngcontent-%COMP%], .container__vehicleModel[_ngcontent-%COMP%]{padding:10px}.buttons__container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.buttons__container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:200px;margin-left:10px;margin-top:20px}.card-body[_ngcontent-%COMP%]{padding:10px}.container__titles[_ngcontent-%COMP%]{overflow:hidden;border:1px solid #ccc;background-color:#f1f1f1}.container__titles[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:inherit;float:left;border:none;outline:none;cursor:pointer;padding:14px 16px;transition:.3s;font-size:20px}.container__titles[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#ddd}.container__titles[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:#ccc}.tab_content[_ngcontent-%COMP%]{padding:20px 50px;border:1px solid #ccc;border-top:none}#container__content[_ngcontent-%COMP%]{transition:margin-left 1s;padding:20px;margin-left:250px}.row__container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr}.row__container__single[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr;margin-top:10px;padding:5px 10px}"]}),C),k=r("QgiH");function O(e,t){if(1&e){var n=d.cc();d.bc(0,"tr"),d.bc(1,"td"),d.Mc(2),d.ac(),d.bc(3,"td"),d.Mc(4),d.nc(5,"titlecase"),d.ac(),d.bc(6,"td"),d.Mc(7),d.nc(8,"titlecase"),d.ac(),d.bc(9,"td",8),d.Mc(10),d.nc(11,"titlecase"),d.ac(),d.bc(12,"td"),d.Wb(13,"i",9),d.bc(14,"i",10),d.ic("click",(function(){d.Dc(n);var e=t.$implicit;return d.mc().updateMovement(e.id)})),d.ac(),d.bc(15,"i",11),d.ic("click",(function(){d.Dc(n);var e=t.$implicit;return d.mc().deleteMovement(e)})),d.ac(),d.ac(),d.ac()}if(2&e){var o=t.$implicit,i=t.index;d.Jb(2),d.Nc(i+1),d.Jb(2),d.Nc(d.oc(5,5,o.name)),d.Jb(3),d.Nc(d.oc(8,7,o.description)),d.Jb(2),d.uc("title",o.type.description),d.Jb(1),d.Oc(" ",d.oc(11,9,o.type.name)," ")}}function T(e,t){1&e&&d.Wb(0,"app-img-loading")}var x,A,D,R=[{path:"",component:m.a,children:[{path:"",component:(x=function(){function e(t,o){n(this,e),this.movementService=t,this.router=o}var o,r,c;return i(e,[{key:"ngOnInit",value:function(){this.initComponents()}},{key:"initComponents",value:function(){this.countChanges=0,this.isAwaiting=!1,this.getMovementList()}},{key:"getMovementList",value:(c=t(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{this.isAwaiting=!0,this.movementService.getMovements().then((function(e){return t.lsMovements=e})),this.isAwaiting=!1}catch(n){console.warn(n)}case 1:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"insertMovement",value:function(){this.movementService.setMovementToUpdate(null),this.countChanges+=1,this.router.navigate(["/MasterMovements/Movement"])}},{key:"updateMovement",value:(r=t(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.movementService.getMovementById(t);case 3:n=e.sent,this.movementService.setMovementToUpdate(n),this.router.navigate(["/MasterMovements/Movement"]),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.warn(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e){return r.apply(this,arguments)})},{key:"deleteMovement",value:(o=t(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!confirm("\xbfEst\xe1 seguro que desea eliminar este movimiento?")){e.next=7;break}return this.isAwaiting=!0,e.next=5,this.movementService.delete(t);case 5:n=e.sent,this.isAwaiting=!1,n.response&&(f.a.fire({position:"center",icon:"success",title:n.message,showConfirmButton:!0}),this.getMovementList());case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.warn(e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])}))),function(e){return o.apply(this,arguments)})},{key:"downloadExcel",value:function(){var e=this.lsMovements.map((function(e){var t;return{Nombre:e.name,Descripcion:e.description,Tipo:null===(t=e.type)||void 0===t?void 0:t.name}}));k.a.convertArrayToFile(e,"Movimientos")}}]),e}(),x.\u0275fac=function(e){return new(e||x)(d.Vb(h.a),d.Vb(u.b))},x.\u0275cmp=d.Pb({type:x,selectors:[["app-tbl-movements"]],decls:23,vars:2,consts:[["id","container__content"],[1,"text-right"],[1,"btn","btn-primary",3,"click"],[1,"btn-add","btn-info",3,"click"],[1,"fas","fa-plus"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"title"],["title","M\xe1s informaci\xf3n",1,"fas","fa-info-circle","text-info"],["title","Modificar",1,"fas","fa-edit","text-warning",3,"click"],["title","Eliminar",1,"fas","fa-trash-alt","text-danger",3,"click"]],template:function(e,t){1&e&&(d.bc(0,"div",0),d.bc(1,"h1"),d.Mc(2,"Movimientos"),d.ac(),d.bc(3,"div",1),d.bc(4,"button",2),d.ic("click",(function(){return t.downloadExcel()})),d.Mc(5," Descargar Excel "),d.ac(),d.ac(),d.bc(6,"button",3),d.ic("click",(function(){return t.insertMovement()})),d.Wb(7,"i",4),d.ac(),d.bc(8,"table",5),d.bc(9,"thead"),d.bc(10,"th"),d.Mc(11,"#"),d.ac(),d.bc(12,"th"),d.Mc(13,"Nombre"),d.ac(),d.bc(14,"th"),d.Mc(15,"Descripci\xf3n"),d.ac(),d.bc(16,"th"),d.Mc(17,"Tipo"),d.ac(),d.bc(18,"th"),d.Mc(19,"Acciones"),d.ac(),d.ac(),d.bc(20,"tbody"),d.Lc(21,O,16,11,"tr",6),d.ac(),d.ac(),d.ac(),d.Lc(22,T,1,0,"app-img-loading",7)),2&e&&(d.Jb(21),d.uc("ngForOf",t.lsMovements),d.Jb(1),d.uc("ngIf",t.isAwaiting))},directives:[c.n,c.o,y.a],pipes:[c.x],styles:[".btn-add[_ngcontent-%COMP%]{border-radius:50%;width:50px;height:50px;cursor:pointer;position:relative;left:93%;margin-bottom:20px;top:10px;outline:none;text-align:center;font-size:24px;border:none;z-index:55}#container__content[_ngcontent-%COMP%]{transition:margin-left 1s;padding:20px 50px;margin-left:250px}i[_ngcontent-%COMP%]{margin:0 3px;cursor:pointer}"]}),x)},{path:"Movement",component:w}]}],N=((D=function e(){n(this,e)}).\u0275mod=d.Tb({type:D}),D.\u0275inj=d.Sb({factory:function(e){return new(e||D)},imports:[[u.f.forChild(R)],u.f]}),D),P=((A=function e(){n(this,e)}).\u0275mod=d.Tb({type:A}),A.\u0275inj=d.Sb({factory:function(e){return new(e||A)},imports:[[c.c,a.l,a.w,s.a,N]]}),A)}}])}();