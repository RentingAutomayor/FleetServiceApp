(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"2Xvn":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("fXoL"),c=n("3Pt+"),s=n("0x5P"),a=n("ofXK");function o(e,t){if(1&e&&(i.bc(0,"option",2),i.Mc(1),i.nc(2,"titlecase"),i.ac()),2&e){const e=t.$implicit;i.uc("value",e.id),i.Jb(1),i.Oc(" ",i.oc(2,2,e.name)," ")}}let r=(()=>{class e{constructor(e){this.vehicleService=e,this.vehicleTypeSelected=null,this.onVehicleTypeWasModified=new i.q,this.frmVehicleType=new c.j({cmbType:new c.g("Seleccione ...")})}set setDisableControls(e){this.disableControls=e,this.disableControls?this.frmVehicleType.disable():this.frmVehicleType.enable()}set setVehicleTypeSelected(e){this.vehicleTypeSelected=e,this.vehicleTypeSelected?this.setDataInForm(this.vehicleTypeSelected):this.clearDataForm()}ngOnInit(){this.initComponents()}initComponents(){try{this.clearDataForm(),this.vehicleService.getVehicleTypes().subscribe(e=>{this.lsVehicleType=e})}catch(e){console.error(e)}}setType(e){const t=this.lsVehicleType.find(t=>t.id==e.value);this.onVehicleTypeWasModified.emit(t)}setDataInForm(e){this.frmVehicleType.controls.cmbType.setValue(e.id)}clearDataForm(){this.frmVehicleType.controls.cmbType.setValue(0)}}return e.\u0275fac=function(t){return new(t||e)(i.Vb(s.a))},e.\u0275cmp=i.Pb({type:e,selectors:[["app-vehicle-type"]],inputs:{setDisableControls:["disableControls","setDisableControls"],setVehicleTypeSelected:["vehicleType","setVehicleTypeSelected"]},outputs:{onVehicleTypeWasModified:"onVehicleTypeWasModified"},decls:7,vars:3,consts:[[3,"formGroup"],["formControlName","cmbType",1,"browser-default","custom-select",3,"change"],[3,"value"],[3,"value",4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(i.bc(0,"form",0),i.bc(1,"label"),i.Mc(2,"Tipo"),i.ac(),i.bc(3,"select",1),i.ic("change",(function(e){return t.setType(e.target)})),i.bc(4,"option",2),i.Mc(5,"Seleccione ..."),i.ac(),i.Lc(6,o,3,4,"option",3),i.ac(),i.ac()),2&e&&(i.uc("formGroup",t.frmVehicleType),i.Jb(4),i.uc("value",0),i.Jb(2),i.uc("ngForOf",t.lsVehicleType))},directives:[c.B,c.r,c.k,c.x,c.q,c.i,c.u,c.A,a.n],pipes:[a.x],styles:["select[_ngcontent-%COMP%]{cursor:pointer}"]}),e})()},"3gT+":function(e,t,n){"use strict";n.r(t),n.d(t,"ItemsAndRoutinesModule",(function(){return Ne}));var i=n("ofXK"),c=n("3Pt+"),s=n("Z/wE"),a=n("tyNb"),o=n("uswQ"),r=n("fXoL"),l=n("wZkO"),d=n("Dhb6"),h=n("xch/"),u=n("0x5P"),p=n("fp5r"),b=n("2Xvn"),m=n("97n9"),g=n("9Wwi");function f(e,t){if(1&e&&(r.bc(0,"th"),r.Mc(1),r.ac()),2&e){const e=t.$implicit,n=r.mc();r.Lb(n.getClass(e.shortName)),r.Jb(1),r.Oc(" ",e.shortName," ")}}function y(e,t){if(1&e&&(r.bc(0,"td"),r.bc(1,"label",18),r.Wb(2,"input",19),r.Wb(3,"span",20),r.ac(),r.ac()),2&e){const e=t.$implicit,n=r.mc().$implicit,i=r.mc();r.Lb(i.getClass(e.shortName)),r.Jb(2),r.uc("id",i.getChkId(n.id,e.id))}}function M(e,t){if(1&e&&(r.bc(0,"tr",8),r.bc(1,"td"),r.Mc(2),r.nc(3,"titlecase"),r.nc(4,"slice"),r.ac(),r.Wb(5,"td"),r.Lc(6,y,4,3,"td",14),r.Wb(7,"td"),r.ac()),2&e){const e=t.$implicit,n=r.mc();r.Jb(2),r.Nc(r.oc(3,2,r.qc(4,4,e.name,0,50))),r.Jb(4),r.uc("ngForOf",n.lsFrequency)}}function _(e,t){1&e&&r.Wb(0,"app-img-loading")}let x=(()=>{class e{constructor(e,t,n){this.maintenanceRoutineService=e,this.maintenanceItemService=t,this.vehicleService=n,this.lsFrequency=[],this.lsMaintenanceItemsFiltered=[],this.lsMaintenanceItems=[],this.TIPO_MANO_DE_OBRA=2,this.brandSelected=null,this.vehicleTypeSelected=null}ngOnInit(){this.initComponents()}initComponents(){this.isAwaiting=!0,this.countChanges=0,this.maintenanceRoutineService.getFrequency().subscribe(e=>{this.lsFrequency=e.filter(e=>"0"!=e.shortName),this.isAwaiting=!1}),this.isAwaiting=!0,this.maintenanceItemService.getMaintenanceItems(0).subscribe(e=>{this.lsMaintenanceItems=e,this.lsMaintenanceItemsFiltered=e,this.filterByType(2),this.isAwaiting=!1})}getChkId(e,t){return`chk_item_${e}_${t}`}setBrand(e){this.clearCheckBoxSelected(),this.brandSelected=e}setVehicleType(e){this.vehicleTypeSelected=e,this.vehicleService.setVehicleModelSelected(null),this.clearCheckBoxSelected(),this.countChanges+=1}setVehicleModel(e){this.getRoutinesByModel(e.id),this.clearCheckBoxSelected()}getRoutinesByModel(e){this.isAwaiting=!0,this.maintenanceRoutineService.getMaintenanceRoutineByModel(e).subscribe(e=>{this.lsMaintenanceRoutinesByModel=e,this.checkItemsByRoutines(this.lsMaintenanceRoutinesByModel),this.isAwaiting=!1})}checkItemsByRoutines(e){e.forEach(e=>{try{e.lsItems.forEach(t=>{try{if(t.type.id==this.TIPO_MANO_DE_OBRA){const n=this.getChkId(t.id,e.frequency.id);document.querySelector("#"+n).checked=!0}}catch(n){console.warn(n)}})}catch(t){console.warn(t)}})}clearCheckBoxSelected(){try{this.lsMaintenanceItems.forEach(e=>{this.lsFrequency.forEach(t=>{if(e.type.id==this.TIPO_MANO_DE_OBRA){const n="#"+this.getChkId(e.id,t.id);document.querySelector(n).checked=!1}})})}catch(e){}}getClass(e){return parseInt(e)>50?"col_frequency inactive":"col_frequency active"}showOtherRoutines(){const e=document.getElementsByClassName("col_frequency");for(let t=0;t<e.length;t++)e[t].classList.contains("inactive")?(e[t].classList.remove("inactive"),e[t].classList.add("active")):(e[t].classList.remove("active"),e[t].classList.add("inactive"))}filterByType(e){this.lsMaintenanceItemsFiltered=this.lsMaintenanceItems.filter(t=>t.type.id==e)}}return e.\u0275fac=function(t){return new(t||e)(r.Vb(d.a),r.Vb(h.a),r.Vb(u.a))},e.\u0275cmp=r.Pb({type:e,selectors:[["app-tbl-maintenance-matrix"]],decls:30,vars:7,consts:[[1,"container__filter"],[1,"container__row"],[1,"col"],[3,"brand","onBrandWasSelected"],[3,"vehicleType","onVehicleTypeWasModified"],[3,"brand","vehicleType","VehicleModelWasSelected"],[1,"container__table_matrix"],[1,"table","table-striped"],[1,"row_frequency"],[1,"th-filter"],[1,"form-control",3,"change"],["value","2"],["value","1"],["src","assets/arrow_back.png","alt","arrow_back",1,"arrow","inactive","col_frequency",3,"click"],[3,"class",4,"ngFor","ngForOf"],["src","assets/arrow_next.png","alt","arrow_next",1,"arrow","active","col_frequency",3,"click"],["class","row_frequency",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"container__checkbox"],["type","checkbox","disabled","",3,"id"],[1,"checkmark"]],template:function(e,t){1&e&&(r.bc(0,"div",0),r.bc(1,"div",1),r.bc(2,"div",2),r.bc(3,"app-vehicle-brand",3),r.ic("onBrandWasSelected",(function(e){return t.setBrand(e)})),r.ac(),r.ac(),r.bc(4,"div",2),r.bc(5,"app-vehicle-type",4),r.ic("onVehicleTypeWasModified",(function(e){return t.setVehicleType(e)})),r.ac(),r.ac(),r.bc(6,"div",2),r.bc(7,"app-vehicle-model",5),r.ic("VehicleModelWasSelected",(function(e){return t.setVehicleModel(e)})),r.ac(),r.ac(),r.ac(),r.Wb(8,"br"),r.Wb(9,"hr"),r.Wb(10,"br"),r.ac(),r.bc(11,"div",6),r.bc(12,"table",7),r.bc(13,"thead",8),r.bc(14,"th",9),r.bc(15,"label"),r.Mc(16,"Tipo: "),r.ac(),r.bc(17,"select",10),r.ic("change",(function(e){return t.filterByType(e.target.value)})),r.bc(18,"option",11),r.Mc(19,"Mano de obra"),r.ac(),r.bc(20,"option",12),r.Mc(21,"Repuesto"),r.ac(),r.ac(),r.ac(),r.bc(22,"th"),r.bc(23,"img",13),r.ic("click",(function(){return t.showOtherRoutines()})),r.ac(),r.ac(),r.Lc(24,f,2,3,"th",14),r.bc(25,"th"),r.bc(26,"img",15),r.ic("click",(function(){return t.showOtherRoutines()})),r.ac(),r.ac(),r.ac(),r.bc(27,"tbody"),r.Lc(28,M,8,8,"tr",16),r.ac(),r.ac(),r.ac(),r.Lc(29,_,1,0,"app-img-loading",17)),2&e&&(r.Jb(3),r.uc("brand",t.brandSelected),r.Jb(2),r.uc("vehicleType",t.vehicleTypeSelected),r.Jb(2),r.uc("brand",t.brandSelected)("vehicleType",t.vehicleTypeSelected),r.Jb(17),r.uc("ngForOf",t.lsFrequency),r.Jb(4),r.uc("ngForOf",t.lsMaintenanceItemsFiltered),r.Jb(1),r.uc("ngIf",t.isAwaiting))},directives:[p.a,b.a,m.a,c.u,c.A,i.n,i.o,g.a],pipes:[i.x,i.w],styles:[".container__row[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr 1fr}.container__row[_ngcontent-%COMP%], .row_frequency[_ngcontent-%COMP%]{display:grid;grid-template-rows:1fr}.row_frequency[_ngcontent-%COMP%]{grid-template-columns:52% repeat(13,4%)}.active[_ngcontent-%COMP%]{display:block}.inactive[_ngcontent-%COMP%]{display:none}.button_move[_ngcontent-%COMP%]{cursor:pointer;font-weight:700;color:#3282b8}.arrow[_ngcontent-%COMP%]{width:30px;height:30px;cursor:pointer}.container__filter[_ngcontent-%COMP%]{margin-top:30px}.th-filter[_ngcontent-%COMP%]{display:flex;flex-direction:row;cursor:pointer}.th-filter[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-top:10px;margin-right:30px}.th-filter[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:200px}.container__table_matrix[_ngcontent-%COMP%]{overflow:hidden}",'.container__checkbox[_ngcontent-%COMP%]{display:block;position:relative;padding-left:3px;padding-right:3px;margin-bottom:12px;cursor:pointer;font-size:22px;-webkit-user-select:none;user-select:none}.container__checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;opacity:0;cursor:pointer;height:0;width:0}.checkmark[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:20px;width:20px;background-color:#eee;border:1px solid #686d76;border-radius:5px}.container__checkbox[_ngcontent-%COMP%]:hover   input[_ngcontent-%COMP%] ~ .checkmark[_ngcontent-%COMP%]{background-color:#ccc}.container__checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]{background-color:#81b214;border-radius:50%;border:none}.checkmark[_ngcontent-%COMP%]:after{content:"";position:absolute;display:none}.container__checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]:after{display:block}.container__checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled ~ .checkmark[_ngcontent-%COMP%]{border:1px solid #686d76;border-radius:5px}.container__checkbox[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]:after{left:8px;top:5px;width:5px;height:10px;border:solid #fff;border-width:0 2px 2px 0;transform:rotate(45deg)}']}),e})();var C=n("930R"),v=n("QgiH"),I=n("PSD3"),O=n.n(I),S=n("0IaG"),T=n("3LUQ");function P(e,t){if(1&e&&(r.bc(0,"option",12),r.Mc(1),r.ac()),2&e){const e=t.$implicit;r.uc("value",e.id),r.Jb(1),r.Oc(" ",e.name," ")}}function w(e,t){if(1&e&&(r.bc(0,"option",12),r.Mc(1),r.ac()),2&e){const e=t.$implicit;r.uc("value",e.id),r.Jb(1),r.Oc(" ",e.longName," ")}}function k(e,t){if(1&e&&(r.bc(0,"option",12),r.Mc(1),r.ac()),2&e){const e=t.$implicit;r.uc("value",e.id),r.Jb(1),r.Oc(" ",e.name," ")}}function V(e,t){if(1&e&&(r.bc(0,"tr"),r.bc(1,"td"),r.Mc(2),r.ac(),r.bc(3,"td"),r.Mc(4),r.ac(),r.bc(5,"td"),r.Mc(6),r.nc(7,"currency"),r.ac(),r.bc(8,"td"),r.bc(9,"select",7),r.bc(10,"option",8),r.Mc(11,"Seleccione..."),r.ac(),r.Lc(12,P,2,2,"option",9),r.ac(),r.ac(),r.bc(13,"td"),r.bc(14,"select",10),r.bc(15,"option",8),r.Mc(16,"Seleccione..."),r.ac(),r.Lc(17,w,2,2,"option",9),r.ac(),r.ac(),r.bc(18,"td"),r.bc(19,"select",11),r.bc(20,"option",8),r.Mc(21,"Seleccione..."),r.ac(),r.Lc(22,k,2,2,"option",9),r.ac(),r.ac(),r.ac()),2&e){const e=t.$implicit,n=r.mc();r.Jb(2),r.Nc(e.code),r.Jb(2),r.Nc(e.name),r.Jb(2),r.Nc(r.oc(7,6,e.price)),r.Jb(6),r.uc("ngForOf",n.types),r.Jb(5),r.uc("ngForOf",n.presentations),r.Jb(5),r.uc("ngForOf",n.categories)}}let F=(()=>{class e{constructor(e,t,n,i){this.maintances=e,this.dialogRef=t,this._maintance=n,this._alert=i,this.types=[],this.presentations=[],this.categories=[]}ngOnInit(){this.getTypes(),this.getCategories(),this.getPresentations()}getTypes(){this._maintance.getTypeOfMaintenanceItem().subscribe(e=>this.types=e)}getCategories(){this._maintance.getCategories().subscribe(e=>this.categories=e)}getPresentations(){this._maintance.getPresentationUnits().subscribe(e=>this.presentations=e)}updateTable(){var e;const t=null===(e=JSON.parse(sessionStorage.getItem("sessionUser")).company)||void 0===e?void 0:e.id,n=this.getValues(document.getElementsByClassName("categories")),i=this.getValues(document.getElementsByClassName("types")),c=this.getValues(document.getElementsByClassName("presentations")),s=this.maintances.map((e,t)=>Object.assign(Object.assign({},e),{categoryId:n[t],unitId:c[t],typeId:i[t]}));this._maintance.updateMaintence({rows:s,brandId:t}).subscribe(()=>{this._alert.succes("Articulos de mantemiento cargados con exito"),this.closeDialog()},e=>this._alert.error(e.error.Message))}convertToArray(e){return Array.prototype.slice.call(e)}getValues(e){return this.convertToArray(e).map(e=>+e.value)}closeDialog(){this.dialogRef.close()}}return e.\u0275fac=function(t){return new(t||e)(r.Vb(S.a),r.Vb(S.h),r.Vb(h.a),r.Vb(T.a))},e.\u0275cmp=r.Pb({type:e,selectors:[["app-dialog-load"]],decls:25,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["id","table",1,"table","table-striped"],[4,"ngFor","ngForOf"],["mat-dialog-actions","",1,"d-flex","align-items-center","justify-content-between"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-success",3,"click"],[1,"form-control","types"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-control","presentations"],[1,"form-control","categories"],[3,"value"]],template:function(e,t){1&e&&(r.bc(0,"h1",0),r.Mc(1,"Carga de mantenimientos"),r.ac(),r.bc(2,"div",1),r.bc(3,"table",2),r.bc(4,"thead"),r.bc(5,"tr"),r.bc(6,"th"),r.Mc(7,"Codigo"),r.ac(),r.bc(8,"th"),r.Mc(9,"Nombre"),r.ac(),r.bc(10,"th"),r.Mc(11,"Precio"),r.ac(),r.bc(12,"th"),r.Mc(13,"Tipo"),r.ac(),r.bc(14,"th"),r.Mc(15,"Unidad de presentacion"),r.ac(),r.bc(16,"th"),r.Mc(17,"Categoria"),r.ac(),r.ac(),r.ac(),r.bc(18,"tbody"),r.Lc(19,V,23,8,"tr",3),r.ac(),r.ac(),r.ac(),r.bc(20,"div",4),r.bc(21,"button",5),r.ic("click",(function(){return t.closeDialog()})),r.Mc(22,"Salir"),r.ac(),r.bc(23,"button",6),r.ic("click",(function(){return t.updateTable()})),r.Mc(24,"Aceptar"),r.ac(),r.ac()),2&e&&(r.Jb(19),r.uc("ngForOf",t.maintances))},directives:[S.i,S.f,i.n,S.c,c.u,c.A],pipes:[i.d],styles:[""]}),e})();var D=n("YOAU"),R=n("woZN");function q(e,t){if(1&e&&(r.bc(0,"option",4),r.Mc(1),r.nc(2,"titlecase"),r.ac()),2&e){const e=t.$implicit;r.uc("value",e.id),r.Jb(1),r.Oc(" ",r.oc(2,2,e.name)," ")}}let B=(()=>{class e{constructor(e){this.maintenanceItemService=e,this.lsType=[],this.lostFocus=new r.q,this.chageType=new r.q,this.typeOfItemSelected={},this.frmType=new c.j({cmbType:new c.g("Seleccione ...")})}set setTypeOfItem(e){e&&(this.typeOfItemSelected=e,null!=this.typeOfItemSelected?(this.setDataInForm(this.typeOfItemSelected),this.chageType.emit(this.typeOfItemSelected)):(this.clearForm(),this.chageType.emit(void 0)))}set setDisableControls(e){this.disableControls=e,this.disableControls?this.frmType.disable():this.frmType.enable()}ngOnInit(){this.initComponents()}initComponents(){try{this.clearForm(),this.maintenanceItemService.getTypeOfMaintenanceItem().subscribe(e=>{this.lsType=e,null!==this.typeOfItemSelected?(this.setDataInForm(this.typeOfItemSelected),this.setType(this.typeOfItemSelected)):this.clearForm()})}catch(e){console.error(e.error.Message),O.a.fire({icon:"error",title:"Oops...",text:e.error.Message,footer:"</a>Consulte con Soporte el problema</a>"})}}setType(e){this.typeOfItemSelected=this.lsType.find(t=>t.id==e.value),this.chageType.emit(this.typeOfItemSelected)}setDataInForm(e){this.frmType.controls.cmbType.setValue(null!==e?e.id:1)}clearForm(){this.frmType.controls.cmbType.setValue(0)}focusoutType(){this.lostFocus.emit(this.typeOfItemSelected)}}return e.\u0275fac=function(t){return new(t||e)(r.Vb(h.a))},e.\u0275cmp=r.Pb({type:e,selectors:[["app-type-of-maintenance-item"]],inputs:{setTypeOfItem:["typeOfItem","setTypeOfItem"],setDisableControls:["disableControls","setDisableControls"]},outputs:{lostFocus:"lostFocus",chageType:"chageType"},decls:7,vars:3,consts:[[3,"formGroup"],["formControlName","cmbType",1,"browser-default","custom-select",3,"change","focusout"],["disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(r.bc(0,"form",0),r.bc(1,"label"),r.Mc(2,"Tipo"),r.ac(),r.bc(3,"select",1),r.ic("change",(function(e){return t.setType(e.target)}))("focusout",(function(){return t.focusoutType()})),r.bc(4,"option",2),r.Mc(5,"Seleccione ..."),r.ac(),r.Lc(6,q,3,4,"option",3),r.ac(),r.ac()),2&e&&(r.uc("formGroup",t.frmType),r.Jb(4),r.uc("value",0),r.Jb(2),r.uc("ngForOf",t.lsType))},directives:[c.B,c.r,c.k,c.x,c.q,c.i,c.u,c.A,i.n],pipes:[i.x],styles:["select[_ngcontent-%COMP%]{cursor:pointer}"]}),e})();var W=n("oOf3");class J{}var A=n("06E+");class L{}var N=n("R7St");function U(e,t){if(1&e&&(r.bc(0,"option",4),r.Mc(1),r.nc(2,"titlecase"),r.ac()),2&e){const e=t.$implicit;r.uc("value",e.id),r.Jb(1),r.Oc(" ",r.oc(2,2,e.longName)," ")}}let E=(()=>{class e{constructor(e){this.maintenanceItemService=e,this.lsPresentationUnit=[],this.lsPresentationUnitFiltered=[],this.lostFocus=new r.q,this.changePresentation=new r.q,this.presentationUnitSelected=null,this.idTypeOfItem=0,this.frmPresentationUnit=new c.j({cmbPresentationUnit:new c.g("Seleccione ...")})}set setPresentationUnit(e){e&&(this.presentationUnitSelected=e,null!=this.presentationUnitSelected?(this.setDataInForm(this.presentationUnitSelected),this.changePresentation.emit(this.presentationUnitSelected)):(this.clearForm(),this.changePresentation.emit(null)))}set setIdTypeOfItem(e){e&&(this.idTypeOfItem=e,0!=this.idTypeOfItem&&null!=this.idTypeOfItem&&this.filterPresentationsByType(this.idTypeOfItem))}set setDisableControls(e){this.disableControls=e,this.disableControls?this.frmPresentationUnit.disable():this.frmPresentationUnit.enable()}ngOnInit(){this.initComponents()}initComponents(){try{this.getPresentationUnits()}catch(e){console.error(e.error.Message),O.a.fire({icon:"error",title:"Oops...",text:e.error.Message,footer:"</a>Consulte con Soporte el problema</a>"})}}getPresentationUnits(){try{this.maintenanceItemService.getPresentationUnits().subscribe(e=>{this.lsPresentationUnit=e,0!=this.idTypeOfItem&&(this.filterPresentationsByType(this.idTypeOfItem),null!==this.presentationUnitSelected&&this.setDataInForm(this.presentationUnitSelected))})}catch(e){}}filterPresentationsByType(e){e&&(this.lsPresentationUnitFiltered=this.lsPresentationUnit.filter(this.idTypeOfItem==A.b.MANO_DE_OBRA?e=>e.id===A.a.HORAS:e=>e.id!==A.a.HORAS))}changePresentationUnit(e){this.presentationUnitSelected=this.lsPresentationUnitFiltered.find(t=>t.id==e.target.value),this.changePresentation.emit(this.presentationUnitSelected)}clearForm(){this.frmPresentationUnit.controls.cmbPresentationUnit.setValue(0)}setDataInForm(e){this.frmPresentationUnit.controls.cmbPresentationUnit.setValue(null!==e?e.id:0)}presentationUnitFocusOut(){this.lostFocus.emit(this.presentationUnitSelected)}}return e.\u0275fac=function(t){return new(t||e)(r.Vb(h.a))},e.\u0275cmp=r.Pb({type:e,selectors:[["app-presentation-unit"]],inputs:{setPresentationUnit:["presentationUnit","setPresentationUnit"],setIdTypeOfItem:["idTypeOfItem","setIdTypeOfItem"],setDisableControls:["disableControls","setDisableControls"]},outputs:{lostFocus:"lostFocus",changePresentation:"changePresentation"},decls:7,vars:3,consts:[[3,"formGroup"],["formControlName","cmbPresentationUnit",1,"browser-default","custom-select",3,"change","focusout"],["disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(r.bc(0,"form",0),r.bc(1,"label"),r.Mc(2,"Unidad de presentaci\xf3n"),r.ac(),r.bc(3,"select",1),r.ic("change",(function(e){return t.changePresentationUnit(e)}))("focusout",(function(){return t.presentationUnitFocusOut()})),r.bc(4,"option",2),r.Mc(5,"Seleccione ..."),r.ac(),r.Lc(6,U,3,4,"option",3),r.ac(),r.ac()),2&e&&(r.uc("formGroup",t.frmPresentationUnit),r.Jb(4),r.uc("value",0),r.Jb(2),r.uc("ngForOf",t.lsPresentationUnitFiltered))},directives:[c.B,c.r,c.k,c.x,c.q,c.i,c.u,c.A,i.n],pipes:[i.x],styles:["select[_ngcontent-%COMP%]{cursor:pointer}"]}),e})();function H(e,t){if(1&e&&(r.bc(0,"option",4),r.Mc(1),r.nc(2,"titlecase"),r.ac()),2&e){const e=t.$implicit;r.uc("value",e.id),r.Jb(1),r.Nc(r.oc(2,2,e.name))}}let j=(()=>{class e{constructor(e){this.maintenanceItemService=e,this.categorySelected=null,this.changeCategory=new r.q,this.onFocusOut=new r.q,this.frmCategory=new c.j({cmbCategory:new c.g("Seleccione ...")})}set setCategorySelected(e){this.categorySelected=e,this.categorySelected?this.showDataInForm(this.categorySelected):this.clearDataForm()}set setDisableControls(e){this.disableControls=e,this.disableControls?this.frmCategory.disable():this.frmCategory.enable()}ngOnInit(){this.initComponents()}initComponents(){try{this.maintenanceItemService.getCategories().subscribe(e=>{this.lsCategory=e})}catch(e){console.error(e)}}setCategory(e){this.categorySelected=this.lsCategory.find(t=>t.id==e.value),this.changeCategory.emit(this.categorySelected)}showDataInForm(e){this.frmCategory.controls.cmbCategory.setValue(null!==e?e.id:0)}clearDataForm(){this.frmCategory.controls.cmbCategory.setValue(0)}focusOut(){this.onFocusOut.emit(this.categorySelected)}}return e.\u0275fac=function(t){return new(t||e)(r.Vb(h.a))},e.\u0275cmp=r.Pb({type:e,selectors:[["app-maintenance-item-category"]],inputs:{setCategorySelected:["category","setCategorySelected"],setDisableControls:["disableControls","setDisableControls"]},outputs:{changeCategory:"changeCategory",onFocusOut:"onFocusOut"},decls:7,vars:3,consts:[[3,"formGroup"],["formControlName","cmbCategory",1,"browser-default","custom-select",3,"change","focusout"],["disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(r.bc(0,"form",0),r.bc(1,"label"),r.Mc(2,"Categor\xeda"),r.ac(),r.bc(3,"select",1),r.ic("change",(function(e){return t.setCategory(e.target)}))("focusout",(function(){return t.focusOut()})),r.bc(4,"option",2),r.Mc(5,"Seleccione ..."),r.ac(),r.Lc(6,H,3,4,"option",3),r.ac(),r.ac()),2&e&&(r.uc("formGroup",t.frmCategory),r.Jb(4),r.uc("value",0),r.Jb(2),r.uc("ngForOf",t.lsCategory))},directives:[c.B,c.r,c.k,c.x,c.q,c.i,c.u,c.A,i.n],pipes:[i.x],styles:["select[_ngcontent-%COMP%]{cursor:pointer}"]}),e})();function z(e,t){if(1&e){const e=r.cc();r.bc(0,"div",16),r.bc(1,"label",17),r.bc(2,"input",18),r.ic("click",(function(n){r.Dc(e);const i=t.$implicit;return r.mc(2).AddOrRemoveTaxToList(n,i)})),r.ac(),r.Wb(3,"span",5),r.ac(),r.bc(4,"label",19),r.bc(5,"span",7),r.Mc(6),r.nc(7,"uppercase"),r.ac(),r.ac(),r.ac()}if(2&e){const e=t.$implicit,n=r.mc(2);r.Jb(1),r.uc("for",n.getTaxContainerId(e.id)),r.Jb(1),r.uc("id",n.getTaxContainerId(e.id))("disabled",n.disableControls),r.Jb(2),r.uc("for",n.getTaxContainerId(e.id)),r.Jb(2),r.Nc(r.oc(7,5,e.name))}}function $(e,t){if(1&e&&(r.bc(0,"div",14),r.Lc(1,z,8,7,"div",15),r.ac()),2&e){const e=r.mc();r.Jb(1),r.uc("ngForOf",e.lsTaxes)}}function G(e,t){1&e&&(r.bc(0,"div",20),r.bc(1,"span",21),r.Mc(2,"* Debe seleccionar al menos un impuesto"),r.ac(),r.ac())}let X=(()=>{class e{constructor(e){this.maintenanceItemService=e,this.taxWasSelected=new r.q,this.modelItemHadleTaxes={},this.prefixTaxContainer="chk_tax_",this.lsTaxesSelected=[],this.taxesAreInvalid=!0}set setDisableControls(e){this.disableControls=e}ngOnChanges(e){try{this.activateTaxes(this.itemHandleTax),this.itemHandleTax&&this.checkTaxButton(this.inpLsTaxSelected)}catch(t){}}ngOnInit(){this.getTaxesList()}async getTaxesList(){try{this.maintenanceItemService.getTaxesList().subscribe(e=>{this.lsTaxes=e})}catch(e){}}activateTaxes(e){try{const t=document.querySelector("#chkYes"),n=document.querySelector("#chkNo");this.itemHandleTax=e,e?(t.checked=!0,n.checked=!1,this.modelItemHadleTaxes={handleTaxes:this.itemHandleTax,lsTaxes:this.lsTaxesSelected},this.taxesAreInvalid=!(this.lsTaxesSelected.length>0),this.taxWasSelected.emit(this.modelItemHadleTaxes)):(this.lsTaxesSelected=[],t.checked=!1,n.checked=!0,this.modelItemHadleTaxes={handleTaxes:this.itemHandleTax,lsTaxes:this.lsTaxesSelected},this.taxesAreInvalid=!1,this.taxWasSelected.emit(this.modelItemHadleTaxes))}catch(t){}}getTaxContainerId(e){return`${this.prefixTaxContainer}${e}`}AddOrRemoveTaxToList(e,t){if(e.target.checked)this.lsTaxesSelected.push(t);else{const e=this.lsTaxesSelected.find(e=>e.id==t.id),n=this.lsTaxesSelected.indexOf(e);this.lsTaxesSelected.splice(n,1)}this.taxesAreInvalid=!(this.lsTaxesSelected.length>0),this.modelItemHadleTaxes={handleTaxes:this.itemHandleTax,lsTaxes:this.lsTaxesSelected},this.taxWasSelected.emit(this.modelItemHadleTaxes)}async checkTaxButton(e){try{this.disableChecks(),await setTimeout(()=>{if(this.lsTaxesSelected=e,e.length>0){this.taxesAreInvalid=!1;for(const t of e){const e="#"+this.getTaxContainerId(t.id);document.querySelector(e).checked=!0,this.modelItemHadleTaxes={handleTaxes:this.itemHandleTax,lsTaxes:this.lsTaxesSelected},this.taxWasSelected.emit(this.modelItemHadleTaxes)}}else this.taxesAreInvalid=!0},100)}catch(t){}}disableChecks(){try{for(const e of this.lsTaxes){const t="#"+this.getTaxContainerId(e.id);document.querySelector(t).checked=!1}}catch(e){}}}return e.\u0275fac=function(t){return new(t||e)(r.Vb(h.a))},e.\u0275cmp=r.Pb({type:e,selectors:[["app-taxes-list"]],inputs:{itemHandleTax:"itemHandleTax",inpLsTaxSelected:"inpLsTaxSelected",setDisableControls:["disableControls","setDisableControls"]},outputs:{taxWasSelected:"taxWasSelected"},features:[r.Hb],decls:22,vars:4,consts:[[1,"container__content"],[1,"container__handleTax"],[1,"container__input"],["for","chkYes",1,"container__checkbox"],["type","checkbox","id","chkYes",3,"disabled","click"],[1,"checkmark"],["for","chkYes"],[1,"tax-description"],["for","chkNo",1,"container__checkbox"],["type","checkbox","id","chkNo",3,"disabled","click"],["for","chkNo"],[1,"container__taxes"],["class","row__container_tax",4,"ngIf"],["class","container-error",4,"ngIf"],[1,"row__container_tax"],["class","container__tax",4,"ngFor","ngForOf"],[1,"container__tax"],[1,"container__checkbox",3,"for"],["type","checkbox",3,"id","disabled","click"],[3,"for"],[1,"container-error"],[1,"error"]],template:function(e,t){1&e&&(r.bc(0,"div",0),r.bc(1,"div"),r.bc(2,"h6"),r.Mc(3,"\xbfManeja impuestos?"),r.ac(),r.ac(),r.bc(4,"div",1),r.bc(5,"div",2),r.bc(6,"label",3),r.bc(7,"input",4),r.ic("click",(function(){return t.activateTaxes(!0)})),r.ac(),r.Wb(8,"span",5),r.ac(),r.bc(9,"label",6),r.bc(10,"span",7),r.Mc(11,"Si"),r.ac(),r.ac(),r.ac(),r.bc(12,"div",2),r.bc(13,"label",8),r.bc(14,"input",9),r.ic("click",(function(){return t.activateTaxes(!1)})),r.ac(),r.Wb(15,"span",5),r.ac(),r.bc(16,"label",10),r.bc(17,"span",7),r.Mc(18,"No"),r.ac(),r.ac(),r.ac(),r.ac(),r.bc(19,"div",11),r.Lc(20,$,2,1,"div",12),r.ac(),r.Lc(21,G,3,0,"div",13),r.ac()),2&e&&(r.Jb(7),r.uc("disabled",t.disableControls),r.Jb(7),r.uc("disabled",t.disableControls),r.Jb(6),r.uc("ngIf",t.itemHandleTax),r.Jb(1),r.uc("ngIf",t.taxesAreInvalid))},directives:[i.o,i.n],pipes:[i.y],styles:[".container__content[_ngcontent-%COMP%]{margin-left:20px}.container__handleTax[_ngcontent-%COMP%], .container__taxes[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start}.container__taxes[_ngcontent-%COMP%]{border-left:1px solid #ccc;margin-left:20px;padding-left:10px}.container__input[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:70px}.container__input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{cursor:pointer}.tax-description[_ngcontent-%COMP%]{cursor:pointer;margin-left:25px}.error[_ngcontent-%COMP%]{color:red}",'.container__checkbox[_ngcontent-%COMP%]{display:block;position:relative;padding-left:3px;padding-right:3px;margin-bottom:12px;cursor:pointer;font-size:22px;-webkit-user-select:none;user-select:none}.container__checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;opacity:0;cursor:pointer;height:0;width:0}.checkmark[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:20px;width:20px;background-color:#eee;border:1px solid #686d76;border-radius:5px}.container__checkbox[_ngcontent-%COMP%]:hover   input[_ngcontent-%COMP%] ~ .checkmark[_ngcontent-%COMP%]{background-color:#ccc}.container__checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]{background-color:#81b214;border-radius:50%;border:none}.checkmark[_ngcontent-%COMP%]:after{content:"";position:absolute;display:none}.container__checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]:after{display:block}.container__checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled ~ .checkmark[_ngcontent-%COMP%]{border:1px solid #686d76;border-radius:5px}.container__checkbox[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]:after{left:8px;top:5px;width:5px;height:10px;border:solid #fff;border-width:0 2px 2px 0;transform:rotate(45deg)}']}),e})();function K(e,t){if(1&e){const e=r.cc();r.bc(0,"div",3),r.bc(1,"label",4),r.bc(2,"input",5),r.ic("click",(function(n){r.Dc(e);const i=t.$implicit;return r.mc().setVehicleType(n.target,i)})),r.ac(),r.Wb(3,"span",6),r.ac(),r.bc(4,"label",7),r.Mc(5),r.ac(),r.ac()}if(2&e){const e=t.$implicit,n=r.mc();r.Jb(1),r.uc("for",n.getIdChk(e.id)),r.Jb(1),r.uc("id",n.getIdChk(e.id))("disabled",n.disableControls),r.Jb(2),r.uc("for",n.getIdChk(e.id)),r.Jb(1),r.Oc(" ",e.name," ")}}function Y(e,t){1&e&&(r.bc(0,"div"),r.bc(1,"span",8),r.Mc(2,"* Debe seleccionar al menos un tipo de veh\xedculo"),r.ac(),r.ac())}let Q=(()=>{class e{constructor(e){this.vehicleService=e,this.lsVehicleTypeSelected=[],this.lsVehicleTypes=[],this.onVehicleTypeWasSelected=new r.q,this.noItemSelected=!1,this.disableChecks=!1,this.disableControls=!1,this.disableChecks=!1,this.noItemSelected=!1,this.lsVehicleTypeSelected=[]}set setVehicleTypesSelected(e){this.lsVehicleTypeSelected=null!=e?e:[],this.lsVehicleTypeSelected.length>0?this.showDataInForm(this.lsVehicleTypeSelected):this.clearDataForm(),this.toogleError(this.lsVehicleTypeSelected),this.onVehicleTypeWasSelected.emit(this.lsVehicleTypeSelected)}set setDisableChecks(e){this.disableChecks=e,this.disableChecks&&this.toggleChecks()}set setDisableControls(e){this.disableControls=e}ngOnInit(){this.lsVehicleTypeSelected=[],this.getVehicleTypes()}getVehicleTypes(){this.vehicleService.getVehicleTypes().subscribe(e=>{this.lsVehicleTypes=e})}getIdChk(e){return"chk_vehicleType_"+e}setVehicleType(e,t){if(e.checked)null==this.lsVehicleTypeSelected&&null==this.lsVehicleTypeSelected&&(this.lsVehicleTypeSelected=[]),this.lsVehicleTypeSelected.push(t);else{const e=this.lsVehicleTypeSelected.find(e=>e.id==t.id),n=this.lsVehicleTypeSelected.indexOf(e);-1!=n&&this.lsVehicleTypeSelected.splice(n,1)}this.toogleError(this.lsVehicleTypeSelected),this.onVehicleTypeWasSelected.emit(this.lsVehicleTypeSelected)}toogleError(e){this.noItemSelected=!(e.length>0)}showDataInForm(e){try{e.forEach(e=>{const t="#"+this.getIdChk(e.id);document.querySelector(t).checked=!0})}catch(t){}}clearDataForm(){try{this.lsVehicleTypes.forEach(e=>{const t="#"+this.getIdChk(e.id);document.querySelector(t).checked=!1})}catch(e){}}toggleChecks(){try{this.lsVehicleTypes.forEach(e=>{const t="#"+this.getIdChk(e.id);document.querySelector(t).disabled=this.disableChecks})}catch(e){}}}return e.\u0275fac=function(t){return new(t||e)(r.Vb(u.a))},e.\u0275cmp=r.Pb({type:e,selectors:[["app-check-list-vehicle-type"]],inputs:{setVehicleTypesSelected:["lsTypes","setVehicleTypesSelected"],setDisableChecks:["disableChecks","setDisableChecks"],setDisableControls:["disableControls","setDisableControls"]},outputs:{onVehicleTypeWasSelected:"onVehicleTypeWasSelected"},decls:5,vars:2,consts:[[1,"container__row"],["class","container__type",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"container__type"],[1,"container__checkbox",3,"for"],["type","checkbox",3,"id","disabled","click"],[1,"checkmark"],[1,"lbl-description",3,"for"],[1,"error"]],template:function(e,t){1&e&&(r.bc(0,"p"),r.Mc(1,"Tipo de veh\xedculo"),r.ac(),r.bc(2,"div",0),r.Lc(3,K,6,5,"div",1),r.ac(),r.Lc(4,Y,3,0,"div",2)),2&e&&(r.Jb(3),r.uc("ngForOf",t.lsVehicleTypes),r.Jb(1),r.uc("ngIf",t.noItemSelected))},directives:[i.n,i.o],styles:[".container__row[_ngcontent-%COMP%]{display:flex;flex-direction:row}.container__type[_ngcontent-%COMP%]{display:grid;grid-template-columns:25px 1fr;grid-template-rows:1fr;cursor:pointer;padding:10px 5px;margin-left:10px;width:120px}.container__type[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-left:5px;cursor:pointer}.container__type[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{cursor:pointer}.error[_ngcontent-%COMP%]{color:red}",'.container__checkbox[_ngcontent-%COMP%]{display:block;position:relative;padding-left:3px;padding-right:3px;margin-bottom:12px;cursor:pointer;font-size:22px;-webkit-user-select:none;user-select:none}.container__checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;opacity:0;cursor:pointer;height:0;width:0}.checkmark[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:20px;width:20px;background-color:#eee;border:1px solid #686d76;border-radius:5px}.container__checkbox[_ngcontent-%COMP%]:hover   input[_ngcontent-%COMP%] ~ .checkmark[_ngcontent-%COMP%]{background-color:#ccc}.container__checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]{background-color:#81b214;border-radius:50%;border:none}.checkmark[_ngcontent-%COMP%]:after{content:"";position:absolute;display:none}.container__checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]:after{display:block}.container__checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled ~ .checkmark[_ngcontent-%COMP%]{border:1px solid #686d76;border-radius:5px}.container__checkbox[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]:after{left:8px;top:5px;width:5px;height:10px;border:solid #fff;border-width:0 2px 2px 0;transform:rotate(45deg)}']}),e})();var Z=n("xRBo");function ee(e,t){1&e&&(r.bc(0,"p"),r.Mc(1," * El campo c\xf3digo es requerido "),r.ac())}function te(e,t){if(1&e&&(r.bc(0,"div",30),r.Lc(1,ee,2,0,"p",31),r.ac()),2&e){const e=r.mc();r.Jb(1),r.uc("ngIf",e.fieldCode.hasError("required"))}}function ne(e,t){1&e&&(r.bc(0,"p"),r.Mc(1," * El campo nombre es requerido "),r.ac())}function ie(e,t){if(1&e&&(r.bc(0,"div",30),r.Lc(1,ne,2,0,"p",31),r.ac()),2&e){const e=r.mc();r.Jb(1),r.uc("ngIf",e.fieldName.hasError("required"))}}function ce(e,t){1&e&&(r.bc(0,"div",30),r.bc(1,"p"),r.Mc(2,"* El campo tipo es requerido"),r.ac(),r.ac())}function se(e,t){1&e&&(r.bc(0,"div",30),r.bc(1,"p"),r.Mc(2,"* El campo unidad de presentaci\xf3n es requerido"),r.ac(),r.ac())}function ae(e,t){1&e&&(r.bc(0,"p"),r.Mc(1," * El campo valor sin impuesto es requerido "),r.ac())}function oe(e,t){1&e&&(r.bc(0,"p"),r.Mc(1," * El campo valor no puede tener un valor inferior a 1 "),r.ac())}function re(e,t){if(1&e&&(r.bc(0,"div",30),r.Lc(1,ae,2,0,"p",31),r.Lc(2,oe,2,0,"p",31),r.ac()),2&e){const e=r.mc();r.Jb(1),r.uc("ngIf",e.fieldReferencePrice.hasError("required")),r.Jb(1),r.uc("ngIf",e.fieldReferencePrice.hasError("min"))}}function le(e,t){if(1&e&&(r.bc(0,"button",32),r.Mc(1," Guardar "),r.ac()),2&e){const e=r.mc();r.uc("disabled",e.frmMaintenanceItem.invalid||e.presentationUnitIsInvalid||e.typeIsInvalid||e.vehicleTypeIsValid||e.taxesAreInvalid)}}function de(e,t){1&e&&(r.bc(0,"div",33),r.bc(1,"span"),r.Mc(2,"No se puede guardar el item de mantenimiento debido a que el formulario no cumple con los datos requeridos"),r.ac(),r.ac())}let he=(()=>{class e{constructor(e,t,n){this.maintenanceItemService=e,this.vehicleService=t,this.formBuilder=n,this.itemToUpdate=new L,this.lsTaxesSelected=[],this.maintenanceItemWasSetted=new r.q,this.maintenanceItemWasCanceled=new r.q,this.sharedFunction=new N.a,this.brandChevrolet=1,this.itemAndTaxes={},this.presentationUnit={},this.maintenanceItem=new L,this.lsVehicleTypes=[],this.lsVehicleModels=[],this.disableControls=!1,this.brandSelected=null,this.buildFormMaintenanceItem(),this.item=new L,this.itemHandleTax=!1,this.lsTaxesSelected=[],this.presentationUnitIsInvalid=!1,this.typeIsInvalid=!1,this.vehicleTypeIsValid=!1,this.taxesAreInvalid=!1,this.typeOfItem=null,this.presentationUnit=null,this.category=null,this.idType=0,this.amountChangesVehicleType=0}set setMaintenanceItem(e){console.log(e),this.maintenanceItem=e,this.maintenanceItem&&(this.lsVehicleTypes=e.lsVehicleType,this.lsVehicleModels=e.lsVehicleModel,this.setDataInForm(this.maintenanceItem))}set setDisableControls(e){this.disableControls=e,this.disableControls?this.frmMaintenanceItem.disable():this.frmMaintenanceItem.enable()}ngOnDestroy(){this.clearDataForm()}buildFormMaintenanceItem(){this.sharedFunction=new N.a,this.frmMaintenanceItem=this.formBuilder.group({code:["",[c.z.required]],name:["",[c.z.required]],description:[""],referencePrice:[1,[c.z.required,c.z.min(1)]]})}ngOnInit(){this.initComponents()}async initComponents(){this.itemHandleTax=!1}setDataMaintenanceItem(e){e.preventDefault(),this.item=this.setDataToItem(),this.maintenanceItemService.setItem(this.item),this.maintenanceItemWasSetted.emit(!0)}setDataToItem(){try{let e=new L;return e=this.frmMaintenanceItem.value,null!=this.maintenanceItem&&(e.id=this.maintenanceItem.id),this.lsTaxesSelected.length>0?(e.handleTax=!0,e.lsTaxes=this.lsTaxesSelected):(e.handleTax=!1,e.lsTaxes=[]),e.presentationUnit=this.presentationUnit,e.type=this.typeOfItem,e.category=this.category,e.lsVehicleType=null!=this.vehicleService.getListVehicleTypeSelected()?this.vehicleService.getListVehicleTypeSelected():[],e.lsVehicleModel=null!=this.vehicleService.getListVehicleModelsSelected()?this.vehicleService.getListVehicleModelsSelected():[],e}catch(e){console.warn(e)}}setDataInForm(e){this.frmMaintenanceItem.patchValue(e),this.typeOfItem=e.type,this.category=e.category;let t=new J;this.idType=e.type.id,this.presentationUnit=e.presentationUnit,e.lsVehicleModel.length>0&&null!=e.lsVehicleModel[0].brand&&null!=e.lsVehicleModel[0].brand?t=e.lsVehicleModel[0].brand:(t.id=1,t.name="CHEVROLET"),this.brandSelected=t,e.handleTax?(this.itemHandleTax=!0,this.lsTaxesSelected=e.lsTaxes,this.itemAndTaxes={handleTaxes:this.itemHandleTax,lsTaxes:this.lsTaxesSelected},this.calculateTaxesByItem(this.itemAndTaxes)):(this.itemHandleTax=!1,this.lsTaxesSelected=[],this.itemAndTaxes={handleTaxes:this.itemHandleTax,lsTaxes:this.lsTaxesSelected},this.calculateTaxesByItem(this.itemAndTaxes)),this.vehicleService.setListVehicleTypeSelected(e.lsVehicleType),this.vehicleService.setListVehicleModelsSelected(e.lsVehicleModel)}clearDataForm(){this.frmMaintenanceItem.reset(),this.lsTaxesSelected=[],this.presentationUnit=null,this.typeOfItem=null,this.category=null,this.idType=A.b.REPUESTO,this.itemHandleTax=!1,this.lsTaxesSelected=[];const e=document.querySelector("#taxesValue"),t=document.querySelector("#totalValue");e.value="",t.value="",this.maintenanceItem=null,this.lsVehicleTypes=[],this.lsVehicleModels=[]}comeBack(){this.clearDataForm(),this.maintenanceItemWasCanceled.emit(!0)}setBrand(e){this.brandSelected=e}setVehiclType(){this.countChanges+=1}setListVehicleTypes(e){this.lsVehicleTypes=e,this.vehicleTypeIsValid=0==(null!=this.lsVehicleTypes?this.lsVehicleTypes.length:0),this.amountChangesVehicleType++}setLisVehicleModels(e){this.lsVehicleModels=e}calculateTaxesByItem(e){let t=0;if(e.handleTaxes){const n=document.querySelector("#taxesValue"),i=document.querySelector("#totalValue");this.lsTaxesSelected=e.lsTaxes;const{referencePrice:c}=this.frmMaintenanceItem.controls;this.taxesAreInvalid=!(this.lsTaxesSelected.length>0);const s=null!=c.value?c.value:0;t=this.maintenanceItemService.calculateTaxes(s,this.lsTaxesSelected),n.value=t.toString();const a=this.maintenanceItemService.calculateTotalByItem(s,0,t);i.value=a.toString()}else this.taxesAreInvalid=!1;return t}validatePresentationUnit(e){null==e||null==e?this.presentationUnitIsInvalid=!0:(this.presentationUnitIsInvalid=!1,this.presentationUnit=e)}validateTypeOfMaintenanceItem(e){try{null==e||null==e?this.typeIsInvalid=!0:(this.typeIsInvalid=!1,this.typeOfItem=e)}catch(t){console.warn(t)}}get fieldCode(){return this.frmMaintenanceItem.get("code")}get fieldName(){return this.frmMaintenanceItem.get("name")}get fieldReferencePrice(){return this.frmMaintenanceItem.get("referencePrice")}setTypeOfItem(e){e&&(this.typeOfItem=e,this.idType=this.typeOfItem.id)}setPresentationUnit(e){e&&(this.presentationUnit=e)}setCategory(e){this.category=e}}return e.\u0275fac=function(t){return new(t||e)(r.Vb(h.a),r.Vb(u.a),r.Vb(c.f))},e.\u0275cmp=r.Pb({type:e,selectors:[["app-maintenance-item"]],inputs:{countChanges:"countChanges",setMaintenanceItem:["maintenanceItem","setMaintenanceItem"],setDisableControls:["disableControls","setDisableControls"]},outputs:{maintenanceItemWasSetted:"maintenanceItemWasSetted",maintenanceItemWasCanceled:"maintenanceItemWasCanceled"},decls:70,vars:25,consts:[[1,"container-item"],[3,"formGroup","ngSubmit"],[1,"card"],["id","container__header",1,"card-header"],[1,"container__buttonClose"],[3,"click"],[1,"fas","fa-times"],[1,"card-body"],["id","container__maintenanceItem"],[1,"row__container"],[1,"col"],["type","text","formControlName","code","placeholder","C\xf3digo ...",1,"form-control"],["class","error",4,"ngIf"],["type","text","formControlName","name","placeholder","Nombre ...",1,"form-control"],["type","text","formControlName","description","placeholder","Descripci\xf3n ...",1,"form-control"],[3,"disableControls","typeOfItem","chageType","lostFocus"],[3,"disableControls","idTypeOfItem","presentationUnit","changePresentation","lostFocus"],[3,"disableControls","category","changeCategory","onFocusOut"],["type","number","formControlName","referencePrice","placeholder","Valor sin impuestos ...",1,"form-control",3,"input"],["type","number","id","taxesValue","placeholder","Valor impuestos ...","disabled","",1,"form-control"],["type","number","id","totalValue","placeholder","Valor con impuestos ...","disabled","",1,"form-control"],[3,"disableControls","itemHandleTax","inpLsTaxSelected","taxWasSelected"],[3,"defaultBrandId","brand","disableControls","onBrandWasSelected"],[1,"container__groups"],[3,"disableControls","lsTypes","onVehicleTypeWasSelected"],[3,"disableControls","lsVehicleModelsSelected","onVehicleModelsWasSetted"],["id","container__buttons",1,"buttons__container"],["type","button",1,"btn","btn-danger",3,"click"],["type","submit","class","btn btn-success",3,"disabled",4,"ngIf"],["class","container__infoError","id","cont_error_add_maintenance_item",4,"ngIf"],[1,"error"],[4,"ngIf"],["type","submit",1,"btn","btn-success",3,"disabled"],["id","cont_error_add_maintenance_item",1,"container__infoError"]],template:function(e,t){1&e&&(r.bc(0,"div",0),r.bc(1,"form",1),r.ic("ngSubmit",(function(e){return t.setDataMaintenanceItem(e)})),r.bc(2,"div",2),r.bc(3,"div",3),r.bc(4,"legend"),r.Mc(5,"Datos del art\xedculo de mantenimiento"),r.ac(),r.bc(6,"div",4),r.bc(7,"a",5),r.ic("click",(function(){return t.comeBack()})),r.Wb(8,"i",6),r.ac(),r.ac(),r.ac(),r.bc(9,"div",7),r.bc(10,"div",8),r.bc(11,"div",9),r.bc(12,"div",10),r.bc(13,"label"),r.Mc(14,"C\xf3digo"),r.ac(),r.Wb(15,"input",11),r.Lc(16,te,2,1,"div",12),r.ac(),r.bc(17,"div",10),r.bc(18,"label"),r.Mc(19,"Nombre"),r.ac(),r.Wb(20,"input",13),r.Lc(21,ie,2,1,"div",12),r.ac(),r.bc(22,"div",10),r.bc(23,"label"),r.Mc(24,"Descripci\xf3n"),r.ac(),r.Wb(25,"input",14),r.ac(),r.ac(),r.bc(26,"div",9),r.bc(27,"div",10),r.bc(28,"app-type-of-maintenance-item",15),r.ic("chageType",(function(e){return t.setTypeOfItem(e)}))("lostFocus",(function(e){return t.validateTypeOfMaintenanceItem(e)})),r.ac(),r.Lc(29,ce,3,0,"div",12),r.ac(),r.bc(30,"div",10),r.bc(31,"app-presentation-unit",16),r.ic("changePresentation",(function(e){return t.setPresentationUnit(e)}))("lostFocus",(function(e){return t.validatePresentationUnit(e)})),r.ac(),r.Lc(32,se,3,0,"div",12),r.ac(),r.bc(33,"div",10),r.bc(34,"app-maintenance-item-category",17),r.ic("changeCategory",(function(e){return t.setCategory(e)}))("onFocusOut",(function(e){return t.setCategory(e)})),r.ac(),r.ac(),r.ac(),r.Wb(35,"hr"),r.bc(36,"div",9),r.bc(37,"div",10),r.bc(38,"label"),r.Mc(39,"Valor sin impuestos"),r.ac(),r.bc(40,"input",18),r.ic("input",(function(){return t.calculateTaxesByItem(t.itemAndTaxes)})),r.ac(),r.Lc(41,re,3,2,"div",12),r.ac(),r.bc(42,"div",10),r.bc(43,"label"),r.Mc(44,"Valor Impuestos"),r.ac(),r.Wb(45,"input",19),r.ac(),r.bc(46,"div",10),r.bc(47,"label"),r.Mc(48,"Valor Total"),r.ac(),r.Wb(49,"input",20),r.ac(),r.ac(),r.bc(50,"div"),r.bc(51,"app-taxes-list",21),r.ic("taxWasSelected",(function(e){return t.calculateTaxesByItem(e)})),r.ac(),r.ac(),r.Wb(52,"hr"),r.bc(53,"div",9),r.bc(54,"div",10),r.bc(55,"app-vehicle-brand",22),r.ic("onBrandWasSelected",(function(e){return t.setBrand(e)})),r.ac(),r.ac(),r.bc(56,"div",10),r.bc(57,"div",23),r.bc(58,"app-check-list-vehicle-type",24),r.ic("onVehicleTypeWasSelected",(function(e){return t.setListVehicleTypes(e)})),r.ac(),r.ac(),r.ac(),r.ac(),r.Wb(59,"hr"),r.Wb(60,"hr"),r.bc(61,"div",23),r.bc(62,"app-check-list-vehicle-model",25),r.ic("onVehicleModelsWasSetted",(function(e){return t.setLisVehicleModels(e)})),r.ac(),r.ac(),r.Wb(63,"hr"),r.bc(64,"div",26),r.bc(65,"button",27),r.ic("click",(function(){return t.comeBack()})),r.Mc(66," Cancelar "),r.ac(),r.Lc(67,le,2,1,"button",28),r.ac(),r.bc(68,"div"),r.Lc(69,de,3,0,"div",29),r.ac(),r.ac(),r.ac(),r.ac(),r.ac(),r.ac()),2&e&&(r.Jb(1),r.uc("formGroup",t.frmMaintenanceItem),r.Jb(15),r.uc("ngIf",(t.fieldCode.dirty||t.fieldCode.touched)&&t.fieldCode.invalid),r.Jb(5),r.uc("ngIf",(t.fieldName.dirty||t.fieldName.touched)&&t.fieldName.invalid),r.Jb(7),r.uc("disableControls",t.disableControls)("typeOfItem",t.typeOfItem),r.Jb(1),r.uc("ngIf",t.typeIsInvalid),r.Jb(2),r.uc("disableControls",t.disableControls)("idTypeOfItem",t.idType)("presentationUnit",t.presentationUnit),r.Jb(1),r.uc("ngIf",t.presentationUnitIsInvalid),r.Jb(2),r.uc("disableControls",t.disableControls)("category",t.category),r.Jb(7),r.uc("ngIf",(t.fieldReferencePrice.dirty||t.fieldReferencePrice.touched)&&t.fieldReferencePrice.invalid),r.Jb(10),r.uc("disableControls",t.disableControls)("itemHandleTax",t.itemHandleTax)("inpLsTaxSelected",t.lsTaxesSelected),r.Jb(4),r.uc("defaultBrandId",t.brandChevrolet)("brand",t.brandSelected)("disableControls",t.disableControls),r.Jb(3),r.uc("disableControls",t.disableControls)("lsTypes",t.lsVehicleTypes),r.Jb(4),r.uc("disableControls",t.disableControls)("lsVehicleModelsSelected",t.lsVehicleModels),r.Jb(5),r.uc("ngIf",!t.disableControls),r.Jb(2),r.uc("ngIf",t.frmMaintenanceItem.invalid||t.presentationUnitIsInvalid||t.typeIsInvalid||t.vehicleTypeIsValid||t.taxesAreInvalid))},directives:[c.B,c.r,c.k,c.c,c.q,c.i,i.o,B,E,j,c.v,X,p.a,Q,Z.a],styles:['.container-item[_ngcontent-%COMP%]{margin-top:30px}.row__container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:1fr;margin-top:10px;margin-bottom:20px}.buttons__container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}legend[_ngcontent-%COMP%]{margin-bottom:10px}button[_ngcontent-%COMP%], legend[_ngcontent-%COMP%]{margin-left:10px}button[_ngcontent-%COMP%]{width:250px;margin-top:20px}.container__groups[_ngcontent-%COMP%]{margin-left:10px}#container__header[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}label[_ngcontent-%COMP%]{cursor:pointer}.container__buttonClose[_ngcontent-%COMP%]{margin-top:10px}@media only screen and (max-width:600px){form[_ngcontent-%COMP%]{padding:30px 20px}.row__container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr 1fr 1fr;margin-top:0;margin-bottom:0}.col[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px}button[_ngcontent-%COMP%]{width:150px}}.tax-description[_ngcontent-%COMP%]{margin-left:25px}.container_handle_taxes[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start}.container__check[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;width:60px}.row__container_tax[_ngcontent-%COMP%]{display:flex;flex-direction:row;padding-left:10px}.container__tax[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;padding:2px 5px;margin-left:10px;width:auto}.error[_ngcontent-%COMP%]{color:red;margin-top:10px}.container__infoError[_ngcontent-%COMP%]:before{position:absolute;content:"";display:block;width:0;height:0;left:50%;margin-left:-10px;margin-top:-30px;border:10px solid transparent;border-bottom-color:#ebd4d4}.container__infoError[_ngcontent-%COMP%]{background-color:#ebd4d4;cursor:pointer;position:absolute;padding:10px 15px;z-index:50;width:200px;height:auto;border-radius:20px;right:3%;margin-top:30px;box-shadow:10px 10px 17px -7px rgba(0,0,0,.75)}',"select[_ngcontent-%COMP%]{cursor:pointer}.container__row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:1fr}i[_ngcontent-%COMP%]{margin:0 3px;cursor:pointer}.col-number[_ngcontent-%COMP%]{max-width:50px;width:50px}.btn-add[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{cursor:pointer}.btn-add[_ngcontent-%COMP%]{border-radius:50%;width:50px;height:50px;position:relative;left:93%;margin-bottom:20px;top:30px;outline:none;text-align:center;font-size:24px;border:none;z-index:55}#container__content[_ngcontent-%COMP%]{transition:margin-left 1s;padding:20px;margin-left:250px}.container__row_buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;justify-content:right;margin-top:30px}.container__row_buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px}.overlay[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3fr);grid-template-rows:repeat(3fr);position:fixed;left:0;right:0;top:0;bottom:0;background-color:rgba(6,129,230,.1);border-radius:15px;align-items:center;justify-items:center;z-index:5000;width:100%;height:100%}.container__buttonClose[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;margin-bottom:20px}@media only screen and (max-width:600px){.col-mobile-hide[_ngcontent-%COMP%]{display:none}.btn-add[_ngcontent-%COMP%]{left:80vw}}",'.container__checkbox[_ngcontent-%COMP%]{display:block;position:relative;padding-left:3px;padding-right:3px;margin-bottom:12px;cursor:pointer;font-size:22px;-webkit-user-select:none;user-select:none}.container__checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;opacity:0;cursor:pointer;height:0;width:0}.checkmark[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:20px;width:20px;background-color:#eee;border:1px solid #686d76;border-radius:5px}.container__checkbox[_ngcontent-%COMP%]:hover   input[_ngcontent-%COMP%] ~ .checkmark[_ngcontent-%COMP%]{background-color:#ccc}.container__checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]{background-color:#81b214;border-radius:50%;border:none}.checkmark[_ngcontent-%COMP%]:after{content:"";position:absolute;display:none}.container__checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]:after{display:block}.container__checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled ~ .checkmark[_ngcontent-%COMP%]{border:1px solid #686d76;border-radius:5px}.container__checkbox[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]:after{left:8px;top:5px;width:5px;height:10px;border:solid #fff;border-width:0 2px 2px 0;transform:rotate(45deg)}']}),e})();function ue(e,t){if(1&e){const e=r.cc();r.bc(0,"tr"),r.bc(1,"td"),r.Mc(2),r.ac(),r.bc(3,"td"),r.Mc(4),r.ac(),r.bc(5,"td"),r.Mc(6),r.nc(7,"slice"),r.nc(8,"titlecase"),r.ac(),r.bc(9,"td"),r.Mc(10),r.nc(11,"titlecase"),r.ac(),r.bc(12,"td"),r.Mc(13),r.nc(14,"titlecase"),r.ac(),r.bc(15,"td"),r.Mc(16),r.nc(17,"currency"),r.ac(),r.bc(18,"td"),r.Mc(19),r.nc(20,"currency"),r.nc(21,"calculateTaxes"),r.ac(),r.bc(22,"td"),r.Mc(23),r.nc(24,"currency"),r.nc(25,"calculateTotalPrice"),r.ac(),r.bc(26,"td"),r.bc(27,"i",20),r.ic("click",(function(){r.Dc(e);const n=t.$implicit;return r.mc(2).seeDetailsMaintenanceItem(n)})),r.ac(),r.bc(28,"i",21),r.ic("click",(function(){r.Dc(e);const n=t.$implicit;return r.mc(2).updateMaintenanceItem(n)})),r.ac(),r.bc(29,"i",22),r.ic("click",(function(){r.Dc(e);const n=t.$implicit;return r.mc(2).deleteMaintenanceItem(n)})),r.ac(),r.ac(),r.ac()}if(2&e){const e=t.index,n=t.$implicit;r.Jb(2),r.Nc(e+1),r.Jb(2),r.Nc(n.code),r.Jb(2),r.Nc(r.qc(7,8,r.oc(8,12,n.name),0,50)),r.Jb(4),r.Nc(r.oc(11,14,n.type.name)),r.Jb(3),r.Nc(r.oc(14,16,n.presentationUnit.longName)),r.Jb(3),r.Nc(r.rc(17,18,n.referencePrice,"USD","symbol","1.0-0")),r.Jb(3),r.Oc(" ",r.rc(20,23,r.qc(21,28,n,n.referencePrice,1),"USD","symbol","1.0-0")," "),r.Jb(4),r.Oc(" ",r.rc(24,32,r.qc(25,37,n,n.referencePrice,1),"USD","symbol","1.0-0")," ")}}const pe=function(e){return{itemsPerPage:100,currentPage:e}};function be(e,t){if(1&e){const e=r.cc();r.bc(0,"div",2),r.bc(1,"div",3),r.bc(2,"div"),r.bc(3,"app-type-of-maintenance-item",4),r.ic("chageType",(function(t){return r.Dc(e),r.mc().filterItems(t)})),r.ac(),r.ac(),r.bc(4,"div"),r.bc(5,"label"),r.Mc(6,"Nombre / C\xf3digo: "),r.ac(),r.Wb(7,"input",5),r.ac(),r.bc(8,"div"),r.bc(9,"button",6),r.ic("click",(function(){return r.Dc(e),r.mc().clearFilter()})),r.Mc(10," Borrar filtro "),r.ac(),r.bc(11,"button",7),r.ic("click",(function(){return r.Dc(e),r.Cc(14).click()})),r.Mc(12," Cargar mantenimientos "),r.ac(),r.bc(13,"input",8,9),r.ic("change",(function(t){return r.Dc(e),r.mc().getFile(t)})),r.ac(),r.ac(),r.ac(),r.bc(15,"div",10),r.bc(16,"button",11),r.ic("click",(function(){return r.Dc(e),r.mc().downloaExcel()})),r.Mc(17," Descargar Excel "),r.ac(),r.ac(),r.bc(18,"button",12),r.ic("click",(function(){return r.Dc(e),r.mc().insertMaintenanceItem()})),r.Wb(19,"i",13),r.ac(),r.bc(20,"table",14),r.bc(21,"thead"),r.bc(22,"th",15),r.Mc(23,"#"),r.ac(),r.bc(24,"th"),r.Mc(25,"C\xf3digo"),r.ac(),r.bc(26,"th"),r.Mc(27,"Nombre"),r.ac(),r.bc(28,"th",16),r.Mc(29,"Tipo"),r.ac(),r.bc(30,"th",16),r.Mc(31,"Presentaci\xf3n"),r.ac(),r.bc(32,"th",16),r.Mc(33,"Valor sin impuestos"),r.ac(),r.bc(34,"th",16),r.Mc(35,"Valor Impuetos"),r.ac(),r.bc(36,"th",16),r.Mc(37,"Valor con impuestos"),r.ac(),r.bc(38,"th",16),r.Mc(39,"Acciones"),r.ac(),r.ac(),r.bc(40,"tbody"),r.Lc(41,ue,30,41,"tr",17),r.nc(42,"paginate"),r.ac(),r.ac(),r.bc(43,"div",18),r.bc(44,"pagination-controls",19),r.ic("pageChange",(function(t){return r.Dc(e),r.mc().pag=t})),r.ac(),r.ac(),r.ac()}if(2&e){const e=r.mc();r.Jb(3),r.uc("typeOfItem",e.typeFiltered),r.Jb(4),r.uc("formControl",e.txtDescription),r.Jb(34),r.uc("ngForOf",r.pc(42,3,e.lsMaintenanceItemsFiltered,r.xc(6,pe,e.pag)))}}function me(e,t){if(1&e){const e=r.cc();r.bc(0,"div"),r.bc(1,"app-maintenance-item",23),r.ic("maintenanceItemWasSetted",(function(){return r.Dc(e),r.mc().saveMaintenanceItem()}))("maintenanceItemWasCanceled",(function(){return r.Dc(e),r.mc().comeBackToTable()})),r.ac(),r.ac()}if(2&e){const e=r.mc();r.Jb(1),r.uc("disableControls",e.disableControls)("maintenanceItem",e.maintenanceItemSelected)}}function ge(e,t){1&e&&r.Wb(0,"app-img-loading")}let fe=(()=>{class e{constructor(e,t,n,i,s,a,o){this.vehicleService=e,this.maintenanceItemService=t,this._alert=n,this.dialog=i,this.currency=s,this.taxesPipe=a,this.calculatePipe=o,this.pag=1,this.lsMaintenanceItems=[],this.lsMaintenanceItemsFiltered=[],this.descriptionFiltered="",this.typeOfItemId=0,this.isDetailVisible=!1,this.isErrorVisible=!1,this.errorTitle="",this.errorMessageApi="",this.isTableVisible=!0,this.isMaintenanceItemVisible=!1,this.typeFiltered=null,this.txtDescription=new c.g,this.maintenanceItemSelected={id:0,code:"",name:"",description:"",category:{id:1,name:"",state:!0,registrationDate:null},type:{id:1,code:"",state:!0,registrationDate:null},presentationUnit:{id:1,shortName:"",longName:"",state:!0,registrationDate:null},referencePrice:0,lsVehicleModel:[],lsVehicleType:[],lsTaxes:[],valueWithDiscountWithoutTaxes:0,taxesValue:0,discountValue:0,valueWithoutDiscount:0,amount:0,handleTax:!1,state:!0,registrationDate:null},this.disableControls=!1,this.txtDescription.valueChanges.subscribe(e=>{""!=e?(this.descriptionFiltered=e,this.filterMaintenanceItems(e,this.typeFiltered)):this.lsMaintenanceItemsFiltered=this.lsMaintenanceItems})}ngOnInit(){this.initComponents()}async initComponents(){this.validateUserCompany(),this.isToUpdate=!1,this.isAwaiting=!1,this.showTableItems()}validateUserCompany(){try{const e=JSON.parse(sessionStorage.getItem("sessionUser"));this.dealer_id=e.company.type==C.a.DEALER?e.company.id:0}catch(e){console.warn(e)}}showTableItems(){this.clearFilter(),this.isAwaiting=!0,this.maintenanceItemService.getMaintenanceItems(this.dealer_id).subscribe(e=>{this.lsMaintenanceItems=e,this.lsMaintenanceItemsFiltered=e}),this.lsMaintenanceItemsTmp=this.lsMaintenanceItems,this.isAwaiting=!1}insertMaintenanceItem(){this.disableControls=!1,this.isToUpdate=!1,this.maintenanceItemSelected=null,this.hideTable()}showTable(){this.isTableVisible=!0,this.isMaintenanceItemVisible=!1}hideTable(){this.isTableVisible=!1,this.isMaintenanceItemVisible=!0}updateMaintenanceItem(e){this.disableControls=!1,this.isToUpdate=!0,this.isAwaiting=!0,this.maintenanceItemService.getMaintenanceItemById(e.id).subscribe(e=>{this.maintenanceItemSelected=e,this.showTableItems(),this.isAwaiting=!1,this.hideTable()})}deleteMaintenanceItem(e){confirm("\xbfEst\xe1 seguro que desea eliminar este art\xedculo de mantenimiento?")&&(this.isAwaiting=!0,this.maintenanceItemService.delete(e).subscribe(e=>{O.a.fire({position:"center",icon:"success",title:e.message,showConfirmButton:!0}),this.showTableItems(),this.isAwaiting=!1},e=>{this.isErrorVisible=!0,this.errorTitle="Ocurri\xf3 un error intentando Eliminar el art\xedculo de mantenimiento",this.errorMessageApi=e.message,this.isAwaiting=!1}),this.showTableItems()),this.isAwaiting=!1}comeBackToTable(){this.showTable()}saveMaintenanceItem(){try{const e=this.maintenanceItemService.getItem(),t=this.setDealerToItem(e);this.saveDataInDB(t)}catch(e){console.error(e.error.Message),O.a.fire({icon:"error",title:"Oops...",text:e.error.Message,footer:"</a>Consulte con Soporte el problema</a>"}),this.isAwaiting=!1}}saveDataInDB(e){this.isAwaiting=!0,this.isToUpdate?this.maintenanceItemService.update(e).subscribe(e=>{O.a.fire({position:"center",icon:"success",title:e.message,showConfirmButton:!0}),this.isAwaiting=!1,this.showTable(),this.showTableItems(),this.isAwaiting=!1},e=>{this.isErrorVisible=!0,this.errorTitle="Ocurri\xf3 un error intentando Actualizar el item de mantenimiento",this.errorMessageApi=e.Message,this.isAwaiting=!1}):this.maintenanceItemService.insert(e).subscribe(e=>{O.a.fire({position:"center",icon:"success",title:e.message,showConfirmButton:!0}),this.isAwaiting=!1,this.showTable()},e=>{this.isErrorVisible=!0,this.errorTitle="Ocurri\xf3 un error intentando Insertar el item de mantenimiento",this.errorMessageApi=e.Message,this.isAwaiting=!1})}getVehicleModel(e){return null==e?"GEN\xc9RICO":e.shortName}filterItems(e){this.typeOfItemId=e.id,this.filterMaintenanceItems(this.descriptionFiltered,e)}filterMaintenanceItems(e,t){this.lsMaintenanceItemsFiltered=this.lsMaintenanceItems.filter(n=>null!=e&&null!=t?n.code.toLowerCase().includes(this.descriptionFiltered)||n.name.toLowerCase().includes(this.descriptionFiltered)&&n.type.id==t.id:null!=t?n.type.id==t.id:n.code.toLowerCase().includes(e)||n.name.toLowerCase().includes(e))}seeDetailsMaintenanceItem(e){this.disableControls=!0,this.isAwaiting=!0,this.maintenanceItemService.getMaintenanceItemById(e.id).subscribe(e=>{this.maintenanceItemSelected=e,this.isAwaiting=!1,this.hideTable()})}clearFilter(){this.typeFiltered=null,this.txtDescription.setValue(null),this.lsMaintenanceItemsFiltered=this.lsMaintenanceItems}setDealerToItem(e){const t=JSON.parse(sessionStorage.getItem("sessionUser"));let n={};return this.isToUpdate?n=this.maintenanceItemSelected.dealer:t.company.type==C.a.DEALER?n.id=t.company.id:n=null,e.dealer=n,e}getFile(e){const t=new S.e;v.a.convertExcelToArray(e.target.files[0],e=>{t.data=e,t.width="800px",this.dialog.open(F,t).beforeClosed().subscribe(()=>this.showTableItems())})}downloaExcel(){const e=this.lsMaintenanceItems.map(e=>({Codigo:e.code,Nombre:e.name,Tipo:e.type.name,Presentacion:e.presentationUnit.longName,ValorSinImpuestos:this.getCurrency(e.referencePrice),ValorImpuestos:this.getCurrency(this.taxesPipe.transform(e,e.referencePrice,1)),ValorConImpuestos:this.getCurrency(this.calculatePipe.transform(e,e.referencePrice,1))}));v.a.convertArrayToFile(e,"Articulos de mantenimiento")}getCurrency(e){return this.currency.transform(e)}}return e.\u0275fac=function(t){return new(t||e)(r.Vb(u.a),r.Vb(h.a),r.Vb(T.a),r.Vb(S.b),r.Vb(i.d),r.Vb(D.a),r.Vb(R.a))},e.\u0275cmp=r.Pb({type:e,selectors:[["app-tbl-maintenance-item"]],decls:3,vars:3,consts:[["class","container__table","id","container__table_items",4,"ngIf"],[4,"ngIf"],["id","container__table_items",1,"container__table"],[1,"container__filter"],[3,"typeOfItem","chageType"],["type","text","placeholder","Nombre",1,"form-control",3,"formControl"],["type","button",1,"btn","btn-danger","btn-filter",3,"click"],["type","button",1,"btn","btn-success","btn-filter",3,"click"],["type","file","hidden","","accept",".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",3,"change"],["file",""],[1,"text-right","mt-2"],[1,"btn","btn-primary",3,"click"],[1,"btn-add","btn-info",3,"click"],[1,"fas","fa-plus"],[1,"table","table-striped"],[1,"col-number","col-mobile-hide"],[1,"col-mobile-hide"],[4,"ngFor","ngForOf"],[1,"paginationContainer"],[3,"pageChange"],["title","M\xe1s informaci\xf3n",1,"fas","fa-info-circle","text-info",3,"click"],["title","Modificar",1,"fas","fa-edit","text-warning",3,"click"],["title","Eliminar",1,"fas","fa-trash-alt","text-danger",3,"click"],[3,"disableControls","maintenanceItem","maintenanceItemWasSetted","maintenanceItemWasCanceled"]],template:function(e,t){1&e&&(r.Lc(0,be,45,8,"div",0),r.Lc(1,me,2,2,"div",1),r.Lc(2,ge,1,0,"app-img-loading",1)),2&e&&(r.uc("ngIf",t.isTableVisible),r.Jb(1),r.uc("ngIf",t.isMaintenanceItemVisible),r.Jb(1),r.uc("ngIf",t.isAwaiting))},directives:[i.o,B,c.c,c.q,c.h,i.n,W.c,he,g.a],pipes:[W.b,i.w,i.x,i.d,D.a,R.a],styles:["#container__formMaintenanceItem[_ngcontent-%COMP%]{display:none}.card-body[_ngcontent-%COMP%]{width:1000px}.container__filter[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);grid-row:1fr}.container__filter[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:0 10px}.btn-filter[_ngcontent-%COMP%]{margin-top:28px;width:auto;margin-right:2px}.container__filter[_ngcontent-%COMP%]{margin-top:30px}","select[_ngcontent-%COMP%]{cursor:pointer}.container__row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:1fr}i[_ngcontent-%COMP%]{margin:0 3px;cursor:pointer}.col-number[_ngcontent-%COMP%]{max-width:50px;width:50px}.btn-add[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{cursor:pointer}.btn-add[_ngcontent-%COMP%]{border-radius:50%;width:50px;height:50px;position:relative;left:93%;margin-bottom:20px;top:30px;outline:none;text-align:center;font-size:24px;border:none;z-index:55}#container__content[_ngcontent-%COMP%]{transition:margin-left 1s;padding:20px;margin-left:250px}.container__row_buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;justify-content:right;margin-top:30px}.container__row_buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px}.overlay[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3fr);grid-template-rows:repeat(3fr);position:fixed;left:0;right:0;top:0;bottom:0;background-color:rgba(6,129,230,.1);border-radius:15px;align-items:center;justify-items:center;z-index:5000;width:100%;height:100%}.container__buttonClose[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;margin-bottom:20px}@media only screen and (max-width:600px){.col-mobile-hide[_ngcontent-%COMP%]{display:none}.btn-add[_ngcontent-%COMP%]{left:80vw}}"]}),e})();function ye(e,t){if(1&e&&(r.bc(0,"option",2),r.Mc(1),r.nc(2,"titlecase"),r.ac()),2&e){const e=t.$implicit;r.uc("value",e.id),r.Jb(1),r.Nc(r.oc(2,2,e.name))}}let Me=(()=>{class e{constructor(e){this.maintenanceRoutineService=e,this.frequencyWasSelected=new r.q,this.frequencySelected=null,this.frmFrequency=new c.j({cmbFrequency:new c.g("Seleccione ...")})}set setFrequencySelected(e){this.frequencySelected=e,this.setDataInForm(this.frequencySelected)}set setDisableControls(e){this.disableControls=e,this.disableControls?this.frmFrequency.disable():this.frmFrequency.enable()}ngOnChanges(e){for(const t in e)"countChanges"==t&&(this.frequencytoUpdate=this.maintenanceRoutineService.getFrecuencySelected(),null!=this.frequencytoUpdate?this.setDataInForm(this.frequencytoUpdate):this.clearForm())}ngOnInit(){this.initComponents()}initComponents(){this.countChanges=0,this.maintenanceRoutineService.getFrequency().subscribe(e=>{this.lsFrequency=e})}setFrequency(e){const t=this.lsFrequency.find(t=>t.id==e.value);this.maintenanceRoutineService.setFrecuencySelected(t),this.frequencyWasSelected.emit(t)}setDataInForm(e){e?this.frmFrequency.controls.cmbFrequency.setValue(e.id):this.clearForm()}clearForm(){const{cmbFrequency:e}=this.frmFrequency.controls;e.setValue(0)}}return e.\u0275fac=function(t){return new(t||e)(r.Vb(d.a))},e.\u0275cmp=r.Pb({type:e,selectors:[["app-frequency"]],inputs:{countChanges:"countChanges",setFrequencySelected:["frequency","setFrequencySelected"],setDisableControls:["disableControls","setDisableControls"]},outputs:{frequencyWasSelected:"frequencyWasSelected"},features:[r.Hb],decls:7,vars:3,consts:[[3,"formGroup"],["formControlName","cmbFrequency",1,"browser-default","custom-select",3,"change"],[3,"value"],[3,"value",4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(r.bc(0,"form",0),r.bc(1,"label"),r.Mc(2,"Kilometraje de la rutina"),r.ac(),r.bc(3,"select",1),r.ic("change",(function(e){return t.setFrequency(e.target)})),r.bc(4,"option",2),r.Mc(5,"Seleccione ..."),r.ac(),r.Lc(6,ye,3,4,"option",3),r.ac(),r.ac()),2&e&&(r.uc("formGroup",t.frmFrequency),r.Jb(4),r.uc("value",0),r.Jb(2),r.uc("ngForOf",t.lsFrequency))},directives:[c.B,c.r,c.k,c.x,c.q,c.i,c.u,c.A,i.n],pipes:[i.x],styles:["","select[_ngcontent-%COMP%]{cursor:pointer}.container__row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:1fr}i[_ngcontent-%COMP%]{margin:0 3px;cursor:pointer}.col-number[_ngcontent-%COMP%]{max-width:50px;width:50px}.btn-add[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{cursor:pointer}.btn-add[_ngcontent-%COMP%]{border-radius:50%;width:50px;height:50px;position:relative;left:93%;margin-bottom:20px;top:30px;outline:none;text-align:center;font-size:24px;border:none;z-index:55}#container__content[_ngcontent-%COMP%]{transition:margin-left 1s;padding:20px;margin-left:250px}.container__row_buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;justify-content:right;margin-top:30px}.container__row_buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px}.overlay[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3fr);grid-template-rows:repeat(3fr);position:fixed;left:0;right:0;top:0;bottom:0;background-color:rgba(6,129,230,.1);border-radius:15px;align-items:center;justify-items:center;z-index:5000;width:100%;height:100%}.container__buttonClose[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;margin-bottom:20px}@media only screen and (max-width:600px){.col-mobile-hide[_ngcontent-%COMP%]{display:none}.btn-add[_ngcontent-%COMP%]{left:80vw}}"]}),e})();class _e{}var xe=n("2Vo4"),Ce=n("pMMx");function ve(e,t){1&e&&(r.bc(0,"p"),r.Mc(1," * El campo de nombre es obligatorio "),r.ac())}function Ie(e,t){if(1&e&&(r.bc(0,"div",24),r.Lc(1,ve,2,0,"p",25),r.ac()),2&e){const e=r.mc();r.Jb(1),r.uc("ngIf",e.fieldName.hasError("required"))}}function Oe(e,t){if(1&e&&(r.bc(0,"div",24),r.bc(1,"p"),r.Mc(2),r.ac(),r.ac()),2&e){const e=r.mc();r.Jb(2),r.Nc(e.msgRoutineDuplicated)}}function Se(e,t){if(1&e&&(r.bc(0,"button",26),r.Mc(1," Guardar rutina "),r.ac()),2&e){const e=r.mc();r.uc("disabled",e.fieldName.invalid||!e.routineIsValid)}}function Te(e,t){1&e&&(r.bc(0,"div",27),r.bc(1,"span"),r.Mc(2,"No se puede guardar la rutina de mantenimiento debido a que el formulario no cumple con los datos requeridos"),r.ac(),r.ac())}function Pe(e,t){1&e&&r.Wb(0,"app-img-loading",28)}let we=(()=>{class e{constructor(e,t,n,i){this.maintenanceItemService=e,this.vehicleService=t,this.maintenanceRoutineService=n,this.formBuilder=i,this.lsMaintenanceItems=[],this.lsItemsSelected=[],this.routinewasCanceled=new r.q,this.maintenanceRoutineSelected=null,this.brandSelected=null,this.vehicleTypeSelected=null,this.vehicleModelSelected=null,this.frequencySelected=null,this.isAwaiting=!1,this.itemsWereChanged=new xe.a([]),this.maintenanceItems$=this.itemsWereChanged.asObservable(),this.totalRoutine="0",this.routineWasSaved=new r.q,this.frmMaintenanceRoutine=this.formBuilder.group({name:["",[c.z.required]],referencePrice:[""]}),this.sharedFunction=new N.a,this.routineIsValid=!0,this.initialRoutine=0,this.vehicleModel_id=0,this.frequency_id=0,this.msgRoutineDuplicated=""}set setMaintenanceRoutineSelected(e){this.maintenanceRoutineSelected=e,this.maintenanceRoutineSelected?(this.setDataInForm(this.maintenanceRoutineSelected),this.brandSelected=e.vehicleModel.brand,this.vehicleTypeSelected=e.vehicleModel.type,this.vehicleModelSelected=e.vehicleModel):(this.clearDataForm(),this.brandSelected=null,this.vehicleTypeSelected=null,this.vehicleModelSelected=null)}set setDisableControls(e){this.disableControls=e,this.disableControls?this.frmMaintenanceRoutine.controls.name.disable():this.frmMaintenanceRoutine.controls.name.enable()}get fieldName(){return this.frmMaintenanceRoutine.get("name")}ngOnInit(){this.initComponents()}initComponents(){this.lsMaintenanceItems=[],this.lsItemsSelected=[]}setDataInForm(e){this.frmMaintenanceRoutine.patchValue(e),this.brandSelected=e.vehicleModel.brand,this.vehicleTypeSelected=e.vehicleModel.type,this.frequencySelected=e.frequency,this.lsItemsSelected=e.lsItems,this.totalRoutine=this.sharedFunction.formatNumberToString(e.referencePrice),this.maintenanceItemService.getItemsByVehicleModel(e.vehicleModel.id).subscribe(e=>{this.lsMaintenanceItems=e})}clearDataForm(){this.frmMaintenanceRoutine.reset(),this.brandSelected=null,this.vehicleTypeSelected=null,this.frequencySelected=null,this.lsMaintenanceItems=[],this.lsItemsSelected=[],this.totalRoutine="0"}setBrand(e){this.brandSelected=e}setVehiclType(e){this.vehicleTypeSelected=e}setFrequency(e){this.frequencySelected=e,this.frequency_id=null!=e&&null!=e?e.id:0,this.initialRoutine!=this.frequency_id?this.validateRoutineAndFrequency(this.vehicleModel_id,this.frequency_id):(this.routineIsValid=!0,this.msgRoutineDuplicated="")}setVehicleModel(e){this.vehicleModelSelected=e,this.vehicleModel_id=null!=e&&null!=e?e.id:0,this.GetItemsByVehicleModel(this.vehicleModel_id),null!=this.maintenanceRoutineSelected?e.id!=this.maintenanceRoutineSelected.vehicleModel.id&&(confirm("\xbfEst\xe1 seguro que desea modificar la l\xednea?, al hacer eso perder\xe1 todos los cambios registrados hasta el momento")?(this.GetItemsByVehicleModel(this.vehicleModel_id),this.lsItemsSelected=[],this.totalRoutine="0"):this.GetItemsByVehicleModel(this.vehicleModel_id)):this.GetItemsByVehicleModel(this.vehicleModel_id),this.GetItemsByVehicleModel(this.vehicleModel_id),this.validateRoutineAndFrequency(this.vehicleModel_id,this.frequency_id)}async validateRoutineAndFrequency(e,t){this.maintenanceRoutineService.ValidateRoutineAndFrequency(e,t).then(e=>{this.routineIsValid=e.response,this.msgRoutineDuplicated=e.message})}setItemsToRoutine(e){this.lsItemsSelected=e}setTotalRoutine(e){this.totalRoutine=this.sharedFunction.formatNumberToString(e)}GetItemsByVehicleModel(e){this.isAwaiting=!0,this.maintenanceItemService.getItemsByVehicleModel(e).subscribe(e=>{this.lsMaintenanceItems=e,this.itemsWereChanged.next(this.lsMaintenanceItems),this.isAwaiting=!1})}saveMaintenanceRoutine(){try{const{name:e}=this.frmMaintenanceRoutine.controls,t=new _e;t.id=null!=this.maintenanceRoutineSelected?this.maintenanceRoutineSelected.id:0,t.name=e.value,t.description=e.value,t.referencePrice=parseInt(this.totalRoutine.replace(/,/g,"")),t.vehicleModel=this.vehicleModelSelected,t.frequency=this.frequencySelected,t.lsItems=this.lsItemsSelected,this.routineWasSaved.emit(t)}catch(e){console.warn(e)}}cancelRoutine(){this.routinewasCanceled.emit(!0)}}return e.\u0275fac=function(t){return new(t||e)(r.Vb(h.a),r.Vb(u.a),r.Vb(d.a),r.Vb(c.f))},e.\u0275cmp=r.Pb({type:e,selectors:[["app-maintenance-routine"]],inputs:{countChanges:"countChanges",setMaintenanceRoutineSelected:["maintenanceRoutine","setMaintenanceRoutineSelected"],setDisableControls:["disableControls","setDisableControls"]},outputs:{routinewasCanceled:"routinewasCanceled",routineWasSaved:"routineWasSaved"},decls:39,vars:20,consts:[[1,"container__formRoutine"],[3,"formGroup","ngSubmit"],[1,"card"],["id","container__header",1,"card-header"],[1,"container__buttonClose"],[3,"click"],[1,"fas","fa-times"],[1,"card-body"],[1,"container__row"],[1,"col"],["type","text","formControlName","name","placeholder","Nombre ...",1,"form-control"],["class","error",4,"ngIf"],[3,"frequency","disableControls","frequencyWasSelected"],["type","text","formControlName","referencePrice","placeholder","Precio ...","disabled","",1,"form-control",3,"value"],[3,"brand","disableControls","onBrandWasSelected"],[3,"vehicleType","disableControls","onVehicleTypeWasModified"],[3,"brand","vehicleType","vehicleModel","disableControls","VehicleModelWasSelected"],[1,"container-table"],[3,"contract","maintenanceItems","maintenanceItemsSelected","onItemsWereSelected","onRoutineWasCalculated"],[1,"container__row_buttons"],["class","btn btn-success","type","submit",3,"disabled",4,"ngIf"],["type","button",1,"btn","btn-danger",3,"click"],["class","container__infoError","id","cont_error_add_maintenance_routine",4,"ngIf"],["style","position: absolut; z-index: 10",4,"ngIf"],[1,"error"],[4,"ngIf"],["type","submit",1,"btn","btn-success",3,"disabled"],["id","cont_error_add_maintenance_routine",1,"container__infoError"],[2,"position","absolut","z-index","10"]],template:function(e,t){1&e&&(r.bc(0,"div",0),r.bc(1,"form",1),r.ic("ngSubmit",(function(){return t.saveMaintenanceRoutine()})),r.bc(2,"div",2),r.bc(3,"div",3),r.bc(4,"legend"),r.Mc(5,"Datos de la rutina de mantenimiento"),r.ac(),r.bc(6,"div",4),r.bc(7,"a",5),r.ic("click",(function(){return t.cancelRoutine()})),r.Wb(8,"i",6),r.ac(),r.ac(),r.ac(),r.bc(9,"div",7),r.bc(10,"div",8),r.bc(11,"div",9),r.bc(12,"label"),r.Mc(13,"Nombre:"),r.ac(),r.Wb(14,"input",10),r.Lc(15,Ie,2,1,"div",11),r.ac(),r.bc(16,"div",9),r.bc(17,"app-frequency",12),r.ic("frequencyWasSelected",(function(e){return t.setFrequency(e)})),r.ac(),r.Lc(18,Oe,3,1,"div",11),r.ac(),r.bc(19,"div",9),r.bc(20,"label"),r.Mc(21,"Precio de la rutina:"),r.ac(),r.Wb(22,"input",13),r.ac(),r.ac(),r.bc(23,"div",8),r.bc(24,"div",9),r.bc(25,"app-vehicle-brand",14),r.ic("onBrandWasSelected",(function(e){return t.setBrand(e)})),r.ac(),r.ac(),r.bc(26,"div",9),r.bc(27,"app-vehicle-type",15),r.ic("onVehicleTypeWasModified",(function(e){return t.setVehiclType(e)})),r.ac(),r.ac(),r.bc(28,"div",9),r.bc(29,"app-vehicle-model",16),r.ic("VehicleModelWasSelected",(function(e){return t.setVehicleModel(e)})),r.ac(),r.ac(),r.ac(),r.bc(30,"div",17),r.bc(31,"app-tbl-check-items-for-routine",18),r.ic("onItemsWereSelected",(function(e){return t.setItemsToRoutine(e)}))("onRoutineWasCalculated",(function(e){return t.setTotalRoutine(e)})),r.ac(),r.ac(),r.bc(32,"div",19),r.Lc(33,Se,2,1,"button",20),r.bc(34,"button",21),r.ic("click",(function(){return t.cancelRoutine()})),r.Mc(35," Cancelar "),r.ac(),r.ac(),r.bc(36,"div"),r.Lc(37,Te,3,0,"div",22),r.ac(),r.ac(),r.ac(),r.ac(),r.ac(),r.Lc(38,Pe,1,0,"app-img-loading",23)),2&e&&(r.Jb(1),r.uc("formGroup",t.frmMaintenanceRoutine),r.Jb(14),r.uc("ngIf",t.fieldName.invalid&&(t.fieldName.dirty||t.fieldName.touched)),r.Jb(2),r.uc("frequency",t.frequencySelected)("disableControls",t.disableControls),r.Jb(1),r.uc("ngIf",!t.routineIsValid),r.Jb(4),r.uc("value",t.totalRoutine),r.Jb(3),r.uc("brand",t.brandSelected)("disableControls",t.disableControls),r.Jb(2),r.uc("vehicleType",t.vehicleTypeSelected)("disableControls",t.disableControls),r.Jb(2),r.uc("brand",t.brandSelected)("vehicleType",t.vehicleTypeSelected)("vehicleModel",t.vehicleModelSelected)("disableControls",t.disableControls),r.Jb(2),r.uc("contract",null)("maintenanceItems",t.lsMaintenanceItems)("maintenanceItemsSelected",t.lsItemsSelected),r.Jb(2),r.uc("ngIf",!t.disableControls),r.Jb(4),r.uc("ngIf",t.fieldName.invalid||!t.routineIsValid),r.Jb(1),r.uc("ngIf",t.isAwaiting))},directives:[c.B,c.r,c.k,c.c,c.q,c.i,i.o,Me,p.a,b.a,m.a,Ce.a,g.a],styles:['.txt-amount[_ngcontent-%COMP%]{width:50px}input[_ngcontent-%COMP%]{cursor:pointer}button[_ngcontent-%COMP%]{width:250px;margin-left:10px;margin-top:20px}label[_ngcontent-%COMP%]{cursor:pointer}.container__row[_ngcontent-%COMP%]{margin-top:15px}#container__header[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}table[_ngcontent-%COMP%]{margin-top:40px}.error[_ngcontent-%COMP%]{color:red;margin-top:10px}.container__infoError[_ngcontent-%COMP%]:before{position:absolute;content:"";display:block;width:0;height:0;left:50%;margin-left:-10px;margin-top:-30px;border:10px solid transparent;border-bottom-color:#ebd4d4}.container__infoError[_ngcontent-%COMP%]{background-color:#ebd4d4;cursor:pointer;position:absolute;padding:10px 15px;z-index:50;width:200px;height:auto;border-radius:20px;right:3%;margin-top:30px;box-shadow:10px 10px 17px -7px rgba(0,0,0,.75)}.container-table[_ngcontent-%COMP%]{margin-top:20px}',"select[_ngcontent-%COMP%]{cursor:pointer}.container__row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:1fr}i[_ngcontent-%COMP%]{margin:0 3px;cursor:pointer}.col-number[_ngcontent-%COMP%]{max-width:50px;width:50px}.btn-add[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{cursor:pointer}.btn-add[_ngcontent-%COMP%]{border-radius:50%;width:50px;height:50px;position:relative;left:93%;margin-bottom:20px;top:30px;outline:none;text-align:center;font-size:24px;border:none;z-index:55}#container__content[_ngcontent-%COMP%]{transition:margin-left 1s;padding:20px;margin-left:250px}.container__row_buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;justify-content:right;margin-top:30px}.container__row_buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px}.overlay[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3fr);grid-template-rows:repeat(3fr);position:fixed;left:0;right:0;top:0;bottom:0;background-color:rgba(6,129,230,.1);border-radius:15px;align-items:center;justify-items:center;z-index:5000;width:100%;height:100%}.container__buttonClose[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;margin-bottom:20px}@media only screen and (max-width:600px){.col-mobile-hide[_ngcontent-%COMP%]{display:none}.btn-add[_ngcontent-%COMP%]{left:80vw}}"]}),e})();var ke=n("KBxE");function Ve(e,t){if(1&e){const e=r.cc();r.bc(0,"tr"),r.bc(1,"td"),r.Mc(2),r.ac(),r.bc(3,"td"),r.Mc(4),r.ac(),r.bc(5,"td"),r.Mc(6),r.ac(),r.bc(7,"td"),r.Mc(8),r.ac(),r.bc(9,"td"),r.Mc(10),r.nc(11,"currency"),r.ac(),r.bc(12,"td"),r.bc(13,"i",17),r.ic("click",(function(){r.Dc(e);const n=t.$implicit;return r.mc(2).seeDetailsRoutine(n)})),r.ac(),r.bc(14,"i",18),r.ic("click",(function(){r.Dc(e);const n=t.$implicit;return r.mc(2).updateRoutine(n)})),r.ac(),r.bc(15,"i",19),r.ic("click",(function(){r.Dc(e);const n=t.$implicit;return r.mc(2).deleteRoutine(n)})),r.ac(),r.ac(),r.ac()}if(2&e){const e=t.index,n=t.$implicit;r.Jb(2),r.Nc(e+1),r.Jb(2),r.Nc(n.name),r.Jb(2),r.Nc(n.vehicleModel.shortName),r.Jb(2),r.Nc(n.frequency.name),r.Jb(2),r.Nc(r.rc(11,5,n.referencePrice,"USD","symbol","1.0-0"))}}const Fe=function(e){return{itemsPerPage:20,currentPage:e}};function De(e,t){if(1&e){const e=r.cc();r.bc(0,"div",4),r.bc(1,"div",5),r.bc(2,"div"),r.bc(3,"app-vehicle-model",6),r.ic("VehicleModelWasSelected",(function(t){return r.Dc(e),r.mc().filterByVehicleModel(t)})),r.ac(),r.ac(),r.bc(4,"div"),r.bc(5,"app-frequency",7),r.ic("frequencyWasSelected",(function(t){return r.Dc(e),r.mc().filterByFrequency(t)})),r.ac(),r.ac(),r.bc(6,"div"),r.bc(7,"button",8),r.ic("click",(function(){return r.Dc(e),r.mc().clearFilter()})),r.Mc(8," Borrar filtro "),r.ac(),r.ac(),r.ac(),r.bc(9,"div",9),r.bc(10,"button",10),r.ic("click",(function(){return r.Dc(e),r.mc().downloaExcel()})),r.Mc(11," Descargar Excel "),r.ac(),r.ac(),r.bc(12,"button",11),r.ic("click",(function(){return r.Dc(e),r.mc().insertRoutine()})),r.Wb(13,"i",12),r.ac(),r.bc(14,"table",13),r.bc(15,"thead"),r.bc(16,"th"),r.Mc(17,"#"),r.ac(),r.bc(18,"th"),r.Mc(19,"Nombre"),r.ac(),r.bc(20,"th"),r.Mc(21,"L\xednea"),r.ac(),r.bc(22,"th"),r.Mc(23,"Kilometraje de la rutina"),r.ac(),r.bc(24,"th"),r.Mc(25,"Precio de referencia con impuestos"),r.ac(),r.bc(26,"th"),r.Mc(27,"Acciones"),r.ac(),r.ac(),r.bc(28,"tbody"),r.Lc(29,Ve,16,10,"tr",14),r.nc(30,"paginate"),r.ac(),r.ac(),r.bc(31,"div",15),r.bc(32,"pagination-controls",16),r.ic("pageChange",(function(t){return r.Dc(e),r.mc().p=t})),r.ac(),r.ac(),r.ac()}if(2&e){const e=r.mc();r.Jb(3),r.uc("vehicleModel",e.vehicleModelSelected),r.Jb(2),r.uc("frequency",e.frequencySelected),r.Jb(24),r.uc("ngForOf",r.pc(30,3,e.lsMaintenanceRoutinesFiltered,r.xc(6,Fe,e.p)))}}function Re(e,t){if(1&e){const e=r.cc();r.bc(0,"div",20),r.bc(1,"app-maintenance-routine",21),r.ic("routineWasSaved",(function(t){return r.Dc(e),r.mc().saveDataRoutine(t)}))("routinewasCanceled",(function(){return r.Dc(e),r.mc().cancelRoutine()})),r.ac(),r.ac()}if(2&e){const e=r.mc();r.Jb(1),r.uc("maintenanceRoutine",e.maintenanceRoutineSelected)("disableControls",e.disableControls)}}function qe(e,t){if(1&e){const e=r.cc();r.bc(0,"app-alert-error",22),r.ic("onAlertWasClose",(function(){return r.Dc(e),r.mc().closeErrorMessage()})),r.ac()}if(2&e){const e=r.mc();r.uc("title",e.errorTitle)("errorMessage",e.errorMessageApi)}}function Be(e,t){1&e&&r.Wb(0,"app-img-loading")}let We=(()=>{class e{constructor(e,t,n){this.maintenanceRoutineService=e,this.currency=t,this._alert=n,this.lsMaintenanceRoutines=[],this.lsMaintenanceRoutinesFiltered=[],this.p=1,this.frequencySelected=null,this.vehicleModelFilterSelected=null,this.vehicleModelIdFiltered=0,this.frequencyIdFiltered=0,this.isRoutineVisible=!1,this.isTableVisible=!0,this.maintenanceRoutineSelected=null,this.isErrorVisible=!1,this.errorTitle="",this.errorMessageApi="",this.frequency_id=0,this.vehicleModel_id=0}ngOnInit(){this.initComponents()}initComponents(){this.oCountChanges=0,this.isAwaiting=!1,this.isToUpdate=!1,this.containerTable=document.querySelector("#container__table"),this.containerFromRoutine=document.querySelector("#container__maintenanceRoutine"),this.showTableRoutines()}showTableRoutines(){this.isAwaiting=!0,this.maintenanceRoutineService.getMaintenanceRoutines().subscribe(e=>{this.lsMaintenanceRoutines=e,this.lsMaintenanceRoutinesFiltered=this.lsMaintenanceRoutines,this.isAwaiting=!1})}insertRoutine(){this.disableControls=!1,this.isToUpdate=!1,this.maintenanceRoutineSelected=null,this.hideTable()}hideTable(){this.isRoutineVisible=!0,this.isTableVisible=!1}showTable(){this.isTableVisible=!0,this.isRoutineVisible=!1}saveDataRoutine(e){console.log("saveDataRoutine"),console.log(e),this.saveDataInDB(e),this.showTable()}saveDataInDB(e){this.isAwaiting=!0,this.isToUpdate?this.maintenanceRoutineService.update(e).subscribe(t=>{this._alert.succes(t.message),this.isAwaiting=!1;const n=this.lsMaintenanceRoutinesFiltered.findIndex(t=>t.id==e.id);this.lsMaintenanceRoutinesFiltered[n]=e},e=>{this.isErrorVisible=!0,this.errorTitle="Ocurri\xf3 un error intentando Actualizar la rutina de mantenimiento",this.errorMessageApi=e.Message}):this.maintenanceRoutineService.insert(e).subscribe(t=>{this._alert.succes(t.message),this.isAwaiting=!1;try{this.lsMaintenanceRoutinesFiltered.push(e)}catch(n){this.showTableRoutines()}},e=>{this.isErrorVisible=!0,this.errorTitle="Ocurri\xf3 un error intentando Insertar la rutina de mantenimiento",this.errorMessageApi=e.Message})}cancelRoutine(){confirm("\xbfEst\xe1 seguro de querer cerrar esta ventana?, al cerrar esta ventana se perdera toda la infromaci\xf3n consignada ac\xe1")&&this.showTable()}seeDetailsRoutine(e){this.disableControls=!0,this.isToUpdate=!1,this.isAwaiting=!0,this.maintenanceRoutineService.getMaintenanceRoutineByID(e.id).subscribe(e=>{this.maintenanceRoutineSelected=e,this.isAwaiting=!1}),this.hideTable()}updateRoutine(e){this.disableControls=!1,this.isToUpdate=!0,this.isAwaiting=!0,this.maintenanceRoutineService.getMaintenanceRoutineByID(e.id).subscribe(e=>{this.maintenanceRoutineSelected=e,this.maintenanceRoutineService.setRoutine(e),this.isAwaiting=!1}),this.hideTable()}deleteRoutine(e){confirm("\xbfEst\xe1 seguro que desea eliminar esta rutina de mantenimiento?")&&(this.isAwaiting=!0,this.maintenanceRoutineService.delete(e).subscribe(e=>{this.isAwaiting=!1,this._alert.succes("Rutina de mantenimiento eliminada con \xe9xito"),this.showTableRoutines()}))}filterByVehicleModel(e){this.vehicleModelIdFiltered=null!=e?e.id:0,this.vehicleModelFilterSelected=e,this.filterRoutines(this.vehicleModelIdFiltered,this.frequencyIdFiltered)}filterByFrequency(e){this.frequencyIdFiltered=null!=e?e.id:0,this.frequencySelected=e,this.filterRoutines(this.vehicleModelIdFiltered,this.frequencyIdFiltered)}filterRoutines(e,t){e>0&&t>0?this.lsMaintenanceRoutinesFiltered=this.lsMaintenanceRoutines.filter(n=>n.frequency.id==t&&n.vehicleModel.id==e):0==e&&0==t?(this.lsMaintenanceRoutinesFiltered=this.lsMaintenanceRoutines,this.frequencySelected=null,this.vehicleModelFilterSelected=null):this.lsMaintenanceRoutinesFiltered=this.lsMaintenanceRoutines.filter(n=>n.vehicleModel.id==e||n.frequency.id==t)}clearFilter(){this.frequencySelected=null,this.vehicleModelFilterSelected=null,this.filterRoutines(0,0)}closeErrorMessage(){this.isErrorVisible=!1}downloaExcel(){const e=this.lsMaintenanceRoutinesFiltered.map(e=>({Nombre:e.name,Linea:e.vehicleModel.shortName,KilometrajeDeLaRutina:e.frequency.name,PrecioDeLaFrecuenciaConImpuestos:this.currency.transform(e.referencePrice)}));v.a.convertArrayToFile(e,"Rutinas de mantenimiento")}}return e.\u0275fac=function(t){return new(t||e)(r.Vb(d.a),r.Vb(i.d),r.Vb(T.a))},e.\u0275cmp=r.Pb({type:e,selectors:[["app-tbl-maintenance-routines"]],decls:4,vars:4,consts:[["id","container__table",4,"ngIf"],["class","container__maintenanceRoutine",4,"ngIf"],[3,"title","errorMessage","onAlertWasClose",4,"ngIf"],[4,"ngIf"],["id","container__table"],[1,"container__filter"],[3,"vehicleModel","VehicleModelWasSelected"],[3,"frequency","frequencyWasSelected"],["type","button",1,"btn","btn-danger","btn-filter",3,"click"],[1,"text-right","mt-2"],[1,"btn","btn-primary",3,"click"],[1,"btn-add","btn-info",3,"click"],[1,"fas","fa-plus"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[1,"paginationContainer"],[3,"pageChange"],["title","M\xe1s informaci\xf3n",1,"fas","fa-info-circle","text-info",3,"click"],["title","Modificar",1,"fas","fa-edit","text-warning",3,"click"],["title","Eliminar",1,"fas","fa-trash-alt","text-danger",3,"click"],[1,"container__maintenanceRoutine"],[3,"maintenanceRoutine","disableControls","routineWasSaved","routinewasCanceled"],[3,"title","errorMessage","onAlertWasClose"]],template:function(e,t){1&e&&(r.Lc(0,De,33,8,"div",0),r.Lc(1,Re,2,2,"div",1),r.Lc(2,qe,1,2,"app-alert-error",2),r.Lc(3,Be,1,0,"app-img-loading",3)),2&e&&(r.uc("ngIf",t.isTableVisible),r.Jb(1),r.uc("ngIf",t.isRoutineVisible),r.Jb(1),r.uc("ngIf",t.isErrorVisible),r.Jb(1),r.uc("ngIf",t.isAwaiting))},directives:[i.o,m.a,Me,i.n,W.c,we,ke.a,g.a],pipes:[W.b,i.d],styles:[".container__maintenanceRoutine[_ngcontent-%COMP%]{position:relative;top:30px;height:100vh}.container__filter[_ngcontent-%COMP%]{display:grid;grid-template-columns:40% 40% 20%;grid-template-rows:1fr;margin-top:30px}.container__filter[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:0 10px}.btn-filter[_ngcontent-%COMP%]{margin-top:28px;position:relative;width:100%}","select[_ngcontent-%COMP%]{cursor:pointer}.container__row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:1fr}i[_ngcontent-%COMP%]{margin:0 3px;cursor:pointer}.col-number[_ngcontent-%COMP%]{max-width:50px;width:50px}.btn-add[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{cursor:pointer}.btn-add[_ngcontent-%COMP%]{border-radius:50%;width:50px;height:50px;position:relative;left:93%;margin-bottom:20px;top:30px;outline:none;text-align:center;font-size:24px;border:none;z-index:55}#container__content[_ngcontent-%COMP%]{transition:margin-left 1s;padding:20px;margin-left:250px}.container__row_buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;justify-content:right;margin-top:30px}.container__row_buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px}.overlay[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3fr);grid-template-rows:repeat(3fr);position:fixed;left:0;right:0;top:0;bottom:0;background-color:rgba(6,129,230,.1);border-radius:15px;align-items:center;justify-items:center;z-index:5000;width:100%;height:100%}.container__buttonClose[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;margin-bottom:20px}@media only screen and (max-width:600px){.col-mobile-hide[_ngcontent-%COMP%]{display:none}.btn-add[_ngcontent-%COMP%]{left:80vw}}"]}),e})();function Je(e,t){1&e&&r.Wb(0,"app-img-loading")}const Ae=[{path:"",component:o.a,children:[{path:"",component:(()=>{class e{constructor(){this.p=1}ngOnInit(){this.initComponents()}initComponents(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Pb({type:e,selectors:[["app-items-and-routines"]],decls:9,vars:1,consts:[["id","container__content"],["mat-align-tabs","start"],["label","Matrices de mantenimiento"],["label","Art\xedculos de mantenimiento"],["label","Rutinas de mantenimiento"],[4,"ngIf"]],template:function(e,t){1&e&&(r.bc(0,"div",0),r.bc(1,"mat-tab-group",1),r.bc(2,"mat-tab",2),r.Wb(3,"app-tbl-maintenance-matrix"),r.ac(),r.bc(4,"mat-tab",3),r.Wb(5,"app-tbl-maintenance-item"),r.ac(),r.bc(6,"mat-tab",4),r.Wb(7,"app-tbl-maintenance-routines"),r.ac(),r.ac(),r.ac(),r.Lc(8,Je,1,0,"app-img-loading",5)),2&e&&(r.Jb(8),r.uc("ngIf",t.isAwaiting))},directives:[l.b,l.a,x,fe,We,i.o,g.a],styles:[".card-body[_ngcontent-%COMP%]{padding:10px}.container__titles[_ngcontent-%COMP%]{overflow:hidden;border:1px solid #ccc;background-color:#f1f1f1}.container__titles[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:inherit;float:left;border:none;outline:none;cursor:pointer;padding:14px 16px;transition:.3s;font-size:20px}.container__titles[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#ddd}.container__titles[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:#ccc}.tab_content[_ngcontent-%COMP%]{padding:20px 50px;border:1px solid #ccc;border-top:none}#container__content[_ngcontent-%COMP%]{transition:margin-left 1s;padding:20px;margin-left:250px}i[_ngcontent-%COMP%]{margin:0 3px;cursor:pointer}.col-number[_ngcontent-%COMP%]{max-width:50px;width:50px}.btn-add[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{cursor:pointer}.btn-add[_ngcontent-%COMP%]{border-radius:50%;width:50px;height:50px;position:relative;left:93%;margin-bottom:20px;top:30px;outline:none;text-align:center;font-size:24px;border:none;z-index:55}#container__formMaintenanceItem[_ngcontent-%COMP%]{display:none}.card-body[_ngcontent-%COMP%]{width:850px}.overlay[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3fr);grid-template-rows:repeat(3fr);position:absolute;left:0;right:0;top:0;bottom:0;background-color:rgba(6,129,230,.1);border-radius:15px;align-items:center;justify-items:center;z-index:5000;width:100%;height:100%}"]}),e})()}]}];let Le=(()=>{class e{}return e.\u0275mod=r.Tb({type:e}),e.\u0275inj=r.Sb({factory:function(t){return new(t||e)},imports:[[a.f.forChild(Ae)],a.f]}),e})(),Ne=(()=>{class e{}return e.\u0275mod=r.Tb({type:e}),e.\u0275inj=r.Sb({factory:function(t){return new(t||e)},imports:[[i.c,c.l,c.w,s.a,Le,l.c,S.g]]}),e})()},"97n9":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("fXoL"),c=n("3Pt+"),s=n("0x5P"),a=n("ofXK");function o(e,t){if(1&e&&(i.bc(0,"option",2),i.Mc(1),i.nc(2,"titlecase"),i.ac()),2&e){const e=t.$implicit;i.uc("value",e.id),i.Jb(1),i.Oc(" ",i.oc(2,2,e.shortName)," ")}}let r=(()=>{class e{constructor(e){this.vehicleService=e,this.lsVehicleModel=[],this.lsVehicleModelFiltered=[],this.VehicleModelWasSelected=new i.q,this.vehicleModelSelected=null,this.brandSelected=null,this.vehicleTypeSelected=null,this.frmVehicleModel=new c.j({cmbVehicleModel:new c.g("Seleccione ...")})}set setDisableControls(e){this.disableControls=e,this.disableControls?this.frmVehicleModel.disable():this.frmVehicleModel.enable()}set setVehicleModelSelected(e){this.vehicleModelSelected=e,this.setDataInFields(this.vehicleModelSelected)}set setBrandSelected(e){this.brandSelected=e,this.vehicleModelSelected||this.filterVehicleModels(this.brandSelected,this.vehicleTypeSelected),this.setDataInFields(this.vehicleModelSelected)}set setVehicleType(e){this.vehicleTypeSelected=e,this.vehicleModelSelected||this.filterVehicleModels(this.brandSelected,this.vehicleTypeSelected),this.setDataInFields(this.vehicleModelSelected)}ngOnInit(){this.initComponents()}initComponents(){this.getDataToLists(0,0)}getDataToLists(e,t){try{this.vehicleService.getVehicleModelByBrandAndType(e,t).subscribe(e=>{this.lsVehicleModel=e,this.lsVehicleModelFiltered=e})}catch(n){console.error(n)}}filterVehicleModels(e,t){const n=e?e.id:0,i=t?t.id:0;this.lsVehicleModelFiltered=0!=n&&0!=i?this.lsVehicleModel.filter(e=>e.brand.id==n&&e.type.id==i):this.lsVehicleModel}setVehicleModel(e){const t=this.lsVehicleModel.find(t=>t.id==e.value);this.VehicleModelWasSelected.emit(null!=t?t:null)}setDataInFields(e){const{cmbVehicleModel:t}=this.frmVehicleModel.controls;e?t.setValue(e.id):this.clearDataFields()}clearDataFields(){this.frmVehicleModel.controls.cmbVehicleModel.setValue(0)}}return e.\u0275fac=function(t){return new(t||e)(i.Vb(s.a))},e.\u0275cmp=i.Pb({type:e,selectors:[["app-vehicle-model"]],inputs:{setDisableControls:["disableControls","setDisableControls"],setVehicleModelSelected:["vehicleModel","setVehicleModelSelected"],setBrandSelected:["brand","setBrandSelected"],setVehicleType:["vehicleType","setVehicleType"]},outputs:{VehicleModelWasSelected:"VehicleModelWasSelected"},decls:7,vars:3,consts:[[3,"formGroup"],["formControlName","cmbVehicleModel",1,"browser-default","custom-select",3,"change"],[3,"value"],[3,"value",4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(i.bc(0,"form",0),i.bc(1,"label"),i.Mc(2,"L\xednea"),i.ac(),i.bc(3,"select",1),i.ic("change",(function(e){return t.setVehicleModel(e.target)})),i.bc(4,"option",2),i.Mc(5,"Seleccione ..."),i.ac(),i.Lc(6,o,3,4,"option",3),i.ac(),i.ac()),2&e&&(i.uc("formGroup",t.frmVehicleModel),i.Jb(4),i.uc("value",0),i.Jb(2),i.uc("ngForOf",t.lsVehicleModelFiltered))},directives:[c.B,c.r,c.k,c.x,c.q,c.i,c.u,c.A,a.n],pipes:[a.x],styles:[".row__container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:1fr;margin-top:10px;margin-bottom:10px}select[_ngcontent-%COMP%]{cursor:pointer}@media only screen and (max-width:600px){.row__container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr 1fr 1fr;margin-top:0;margin-bottom:0}.col[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px}}"]}),e})()},fp5r:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("fXoL"),c=n("3Pt+"),s=n("0x5P"),a=n("ofXK");function o(e,t){if(1&e&&(i.bc(0,"option",2),i.Mc(1),i.nc(2,"titlecase"),i.ac()),2&e){const e=t.$implicit;i.uc("value",e.id),i.Jb(1),i.Nc(i.oc(2,2,e.name))}}let r=(()=>{class e{constructor(e){this.vehicleService=e,this.vehicleBrandWasSetted=new i.q,this.defaultBrandId=1,this.brandSelected=null,this.onBrandWasSelected=new i.q,this.frmBrand=new c.j({cmbBrand:new c.g("Seleccione ...")})}set setBrandSelected(e){this.brandSelected=e,this.setDataInForm(e)}set setDisableControls(e){this.disableControls=e,this.disableControls?this.frmBrand.disable():this.frmBrand.enable()}ngOnInit(){this.initComponents()}async initComponents(){try{this.vehicleService.getBrands().subscribe(e=>{this.lsBrand=e,this.frmBrand.controls.cmbBrand.setValue(0!==this.defaultBrandId?this.defaultBrandId:0)})}catch(e){console.error(e.Message)}}setBrand(e){const t=this.lsBrand.find(t=>t.id==e.value);this.vehicleService.setBrandSelected(t),this.vehicleBrandWasSetted.emit(!0),this.onBrandWasSelected.emit(t)}setDataInForm(e){this.frmBrand.controls.cmbBrand.setValue(e?e.id:0)}clearDataForm(){const e=0!==this.defaultBrandId?this.defaultBrandId:0;this.frmBrand.controls.cmbBrand.setValue(e),0!==e&&(this.lsBrand.find(t=>t.id==e),this.vehicleBrandWasSetted.emit(!0))}}return e.\u0275fac=function(t){return new(t||e)(i.Vb(s.a))},e.\u0275cmp=i.Pb({type:e,selectors:[["app-vehicle-brand"]],inputs:{defaultBrandId:"defaultBrandId",setBrandSelected:["brand","setBrandSelected"],setDisableControls:["disableControls","setDisableControls"]},outputs:{vehicleBrandWasSetted:"vehicleBrandWasSetted",onBrandWasSelected:"onBrandWasSelected"},decls:7,vars:3,consts:[[3,"formGroup"],["formControlName","cmbBrand",1,"browser-default","custom-select",3,"change"],[3,"value"],[3,"value",4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(i.bc(0,"form",0),i.bc(1,"label"),i.Mc(2,"Marca"),i.ac(),i.bc(3,"select",1),i.ic("change",(function(e){return t.setBrand(e.target)})),i.bc(4,"option",2),i.Mc(5,"Seleccione ..."),i.ac(),i.Lc(6,o,3,4,"option",3),i.ac(),i.ac()),2&e&&(i.uc("formGroup",t.frmBrand),i.Jb(4),i.uc("value",0),i.Jb(2),i.uc("ngForOf",t.lsBrand))},directives:[c.B,c.r,c.k,c.x,c.q,c.i,c.u,c.A,a.n],pipes:[a.x],styles:["select[_ngcontent-%COMP%]{cursor:pointer}"]}),e})()}}]);