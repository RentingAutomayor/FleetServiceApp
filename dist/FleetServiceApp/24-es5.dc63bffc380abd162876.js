!function(){function e(e,n){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,n)}(e))||n&&e&&"number"==typeof e.length){i&&(e=i);var r=0,c=function(){};return{s:c,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw a}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function n(e,t,n,i,r,c,a){try{var o=e[c](a),s=o.value}catch(l){return void n(l)}o.done?t(s):Promise.resolve(s).then(i,r)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{"mX/K":function(e,t,r){"use strict";r.r(t),r.d(t,"DealerModule",(function(){return le}));var a,o=r("ofXK"),s=r("3Pt+"),l=r("Z/wE"),u=r("tyNb"),d=r("uswQ"),p=r("xHqg"),f=r("FGSN"),h=r("2OTn"),m=r("1W2K"),b=r("PSD3"),g=r.n(b),v=r("fXoL"),y=r("FMJ1"),M=r("qxAM"),I=((a=function(){function e(){i(this,e)}return c(e,[{key:"setAction",value:function(e){this.actionToDo=e}},{key:"getAction",value:function(){return this.actionToDo}}]),e}()).\u0275fac=function(e){return new(e||a)},a.\u0275prov=v.Rb({token:a,factory:a.\u0275fac,providedIn:"root"}),a),P=r("AMxS"),k=r("OJc7"),C=r("bTqV"),D=r("VOuA"),x=r("xch/"),w=r("7I7t"),_=r("p9j/"),A=r("R7St"),O=r("2Vo4"),B=r("vllv"),F=r("oOf3"),T=r("YOAU"),S=r("woZN");function R(e,t){if(1&e){var n=v.cc();v.bc(0,"tr"),v.bc(1,"td"),v.Mc(2),v.ac(),v.bc(3,"td"),v.Mc(4),v.ac(),v.bc(5,"td"),v.Mc(6),v.nc(7,"slice"),v.nc(8,"titlecase"),v.ac(),v.bc(9,"td"),v.Mc(10),v.nc(11,"titlecase"),v.ac(),v.bc(12,"td"),v.Mc(13),v.nc(14,"titlecase"),v.ac(),v.bc(15,"td"),v.bc(16,"input",10),v.ic("keypress",(function(e){return v.Dc(n),v.mc().validateTyping(e)}))("input",(function(e){v.Dc(n);var i=t.$implicit,r=v.mc();return r.formatNumber(e),r.setReferencePriceByItem(e,i)})),v.ac(),v.ac(),v.bc(17,"td"),v.Mc(18),v.nc(19,"currency"),v.nc(20,"calculateTaxes"),v.ac(),v.bc(21,"td"),v.Mc(22),v.nc(23,"currency"),v.nc(24,"calculateTotalPrice"),v.ac(),v.ac()}if(2&e){var i=t.index,r=t.$implicit,c=v.mc();v.Jb(2),v.Nc(i+1),v.Jb(2),v.Nc(r.code),v.Jb(2),v.Nc(v.qc(7,9,v.oc(8,13,r.name),0,40)),v.Jb(4),v.Nc(v.oc(11,15,r.type.name)),v.Jb(3),v.Nc(v.oc(14,17,r.presentationUnit.longName)),v.Jb(3),v.uc("value",c.sharedFunction.formatNumberToString(r.referencePrice))("disabled",c.isFormBlocked),v.Jb(2),v.Oc(" ",v.rc(19,19,v.qc(20,24,r,r.referencePrice,1),"USD","symbol","1.0-0")," "),v.Jb(4),v.Oc(" ",v.rc(23,28,v.qc(24,33,r,r.referencePrice,1),"USD","symbol","1.0-0")," ")}}var U,W=function(e){return{itemsPerPage:10,currentPage:e}},L=((U=function(){function e(t){var n=this;i(this,e),this.maintenanceItemManagerService=t,this.pag=1,this.descriptionToFilter=null,this.lsMaintenanceItems=[],this.lsMaintenanceItemsFiltered=[],this.maintenanceItemsChange=new O.a([]),this.lsMaintenanceItems$=this.maintenanceItemsChange.asObservable(),this.isFormBlocked=!1,this.lsMaintenanceItemsReference=[],this.lsMaintenanceItemsWithPrice=[],this.onItemsWereModified=new v.q,this.sharedFunction=new A.a,this.txtFilter=new s.g,this.isDataFilted=!1,this.lsMaintenanceItems$.subscribe((function(e){n.lsMaintenanceItemsFiltered=e})),this.txtFilter.valueChanges.subscribe((function(e){n.descriptionToFilter=e,n.lsMaintenanceItemsFiltered=n.filterItemsByDescription(n.descriptionToFilter),n.maintenanceItemsChange.next(n.lsMaintenanceItemsFiltered)}))}return c(e,[{key:"filterItemsByDescription",value:function(e){var t=this;return this.lsMaintenanceItems.filter((function(n){return null!=e?(t.isDataFilted=!0,n.code.toUpperCase().includes(e.toUpperCase())||n.name.toUpperCase().includes(e.toUpperCase())):(t.isDataFilted=!1,null)}))}},{key:"ngOnInit",value:function(){this.initComponents()}},{key:"initComponents",value:function(){this.validateCompany()}},{key:"validateCompany",value:function(){try{this.companyStorage=w.a.validateUserAndCompany()}catch(e){console.warn(e)}}},{key:"validateTyping",value:function(e){_.a.validateTyping(e,"numbers")}},{key:"formatNumber",value:function(e){var t=e.target.value.toString().replace(/\,/g,"");t=""!=t?t:0,e.target.value=this.sharedFunction.formatNumberToString(t)}},{key:"formatStringToNumber",value:function(e){return Math.round(parseInt(e.replace(/\,/g,"")))}},{key:"removeFilter",value:function(){this.txtFilter.setValue(null),this.lsMaintenanceItemsFiltered=this.lsMaintenanceItems,this.maintenanceItemsChange.next(this.lsMaintenanceItemsFiltered)}},{key:"setReferencePriceByItem",value:function(e,t){var n=this.lsMaintenanceItems.find((function(e){return e.id==t.id}));n.referencePrice=this.formatStringToNumber(e.target.value);var i=this.lsMaintenanceItems.findIndex((function(e){return e.id==n.id}));this.lsMaintenanceItems[i]=n,this.lsMaintenanceItemsFiltered=this.isDataFilted?this.filterItemsByDescription(this.descriptionToFilter):this.lsMaintenanceItems,this.maintenanceItemsChange.next(this.lsMaintenanceItemsFiltered),this.onItemsWereModified.emit(this.lsMaintenanceItems)}},{key:"setIsFormBlocked",set:function(e){this.isFormBlocked=e}},{key:"setLsMaintenanceItemsReference",set:function(e){this.lsMaintenanceItemsReference=e,this.lsMaintenanceItems=this.maintenanceItemManagerService.updatePrices(this.lsMaintenanceItemsReference,this.lsMaintenanceItemsWithPrice),this.maintenanceItemsChange.next(this.lsMaintenanceItemsReference)}},{key:"setLsMaintenanceWithPrice",set:function(e){this.lsMaintenanceItemsWithPrice=e,this.lsMaintenanceItems=this.maintenanceItemManagerService.updatePrices(this.lsMaintenanceItemsReference,this.lsMaintenanceItemsWithPrice),this.maintenanceItemsChange.next(this.lsMaintenanceItems)}}]),e}()).\u0275fac=function(e){return new(e||U)(v.Vb(B.a))},U.\u0275cmp=v.Pb({type:U,selectors:[["app-tbl-prices-maintenance-items"]],inputs:{setIsFormBlocked:["isFormBlocked","setIsFormBlocked"],setLsMaintenanceItemsReference:["itemsReference","setLsMaintenanceItemsReference"],setLsMaintenanceWithPrice:["itemsWithPrice","setLsMaintenanceWithPrice"]},outputs:{onItemsWereModified:"onItemsWereModified"},decls:29,vars:9,consts:[["id","container__table_items",1,"container__table"],[1,"container-filter"],["placeholder","C\xf3digo \xf3 descripci\xf3n ...","type","text",1,"form-control",3,"formControl"],[1,"btn","btn-danger",3,"click"],[1,"table","table-striped"],[1,"col-number","col-mobile-hide"],[1,"col-mobile-hide"],[4,"ngFor","ngForOf"],[1,"paginationContainer"],[3,"pageChange"],["type","text",1,"form-control","txt-price",3,"value","disabled","keypress","input"]],template:function(e,t){1&e&&(v.bc(0,"div",0),v.bc(1,"div",1),v.Wb(2,"input",2),v.bc(3,"button",3),v.ic("click",(function(){return t.removeFilter()})),v.Mc(4," Borrar filtro "),v.ac(),v.ac(),v.bc(5,"table",4),v.bc(6,"thead"),v.bc(7,"th",5),v.Mc(8,"#"),v.ac(),v.bc(9,"th"),v.Mc(10,"C\xf3digo"),v.ac(),v.bc(11,"th"),v.Mc(12,"Nombre"),v.ac(),v.bc(13,"th",6),v.Mc(14,"Tipo"),v.ac(),v.bc(15,"th",6),v.Mc(16,"Presentaci\xf3n"),v.ac(),v.bc(17,"th",6),v.Mc(18,"Valor sin impuesto"),v.ac(),v.bc(19,"th",6),v.Mc(20,"Valor impuestos"),v.ac(),v.bc(21,"th",6),v.Mc(22,"Valor total x item"),v.ac(),v.ac(),v.bc(23,"tbody"),v.Lc(24,R,25,37,"tr",7),v.nc(25,"paginate"),v.nc(26,"async"),v.ac(),v.ac(),v.bc(27,"div",8),v.bc(28,"pagination-controls",9),v.ic("pageChange",(function(e){return t.pag=e})),v.ac(),v.ac(),v.ac()),2&e&&(v.Jb(2),v.uc("formControl",t.txtFilter),v.Jb(22),v.uc("ngForOf",v.pc(25,2,v.oc(26,5,t.lsMaintenanceItems$),v.xc(7,W,t.pag))))},directives:[s.c,s.q,s.h,o.n,F.c],pipes:[F.b,o.b,o.w,o.x,o.d,T.a,S.a],styles:[".buttons__container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.buttons__container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:200px;margin-left:10px;margin-top:20px}input[_ngcontent-%COMP%]::-webkit-inner-spin-button, input[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}.txt-price[_ngcontent-%COMP%]{width:100px}.container-filter[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-bottom:20px}.container-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:150px;cursor:pointer;margin-left:10px}"]}),U),E=r("9Wwi");function J(e,t){1&e&&v.Wb(0,"app-img-loading")}var V,N=((V=function(){function e(t){i(this,e),this.maintenanceItemService=t,this.isFormBlocked=!1,this.lsMaintenanceItemsReference=[],this.lsMaintenanceItemsWithPrices=[],this.onItemsWereModified=new v.q}return c(e,[{key:"ngOnInit",value:function(){}},{key:"getListMaintenanceItems",value:function(e){var t=this;try{this.isAwaiting=!0,this.maintenanceItemService.getMaintenanceItems(e).subscribe((function(e){t.lsMaintenanceItemsReference=e,t.isAwaiting=!1}))}catch(n){this.isAwaiting=!1,console.warn(n)}}},{key:"getPricesByDealer",value:function(e){var t=this;try{this.isAwaiting=!0,this.maintenanceItemService.getPricesByDealer(e).subscribe((function(e){t.priceByDealer=e,t.lsMaintenanceItemsWithPrices=t.priceByDealer.lsMaintenanceItems,t.isAwaiting=!1}))}catch(n){this.isAwaiting=!1,console.warn(n)}}},{key:"setPricesByDealer",value:function(e){this.onItemsWereModified.emit(e)}},{key:"setDealerSelected",set:function(e){this.dealerSelected=e,this.getListMaintenanceItems(this.dealerSelected.id),this.getPricesByDealer(this.dealerSelected.id)}},{key:"setIsFormBlocked",set:function(e){this.isFormBlocked=e}}]),e}()).\u0275fac=function(e){return new(e||V)(v.Vb(x.a))},V.\u0275cmp=v.Pb({type:V,selectors:[["app-tbl-prices-by-dealer"]],inputs:{setDealerSelected:["dealer","setDealerSelected"],setIsFormBlocked:"setIsFormBlocked"},outputs:{onItemsWereModified:"onItemsWereModified"},decls:5,vars:7,consts:[[3,"itemsReference","itemsWithPrice","isFormBlocked","onItemsWereModified"],[4,"ngIf"]],template:function(e,t){1&e&&(v.bc(0,"h2"),v.Mc(1),v.nc(2,"titlecase"),v.ac(),v.bc(3,"app-tbl-prices-maintenance-items",0),v.ic("onItemsWereModified",(function(e){return t.setPricesByDealer(e)})),v.ac(),v.Lc(4,J,1,0,"app-img-loading",1)),2&e&&(v.Jb(1),v.Oc("Precios por art\xedculo de mantenimiento: ",null!=t.dealerSelected?t.dealerSelected.name:v.oc(2,5,"")," "),v.Jb(2),v.uc("itemsReference",t.lsMaintenanceItemsReference)("itemsWithPrice",t.lsMaintenanceItemsWithPrices)("isFormBlocked",t.isFormBlocked),v.Jb(1),v.uc("ngIf",t.isAwaiting))},directives:[L,o.o,E.a],pipes:[o.x],styles:["h2[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:40px}"]}),V),j=r("KBxE");function q(e,t){1&e&&v.Mc(0,"Datos b\xe1sicos del concesionario")}function H(e,t){1&e&&v.Mc(0,"Sucursales")}function G(e,t){1&e&&v.Mc(0,"Contactos")}function $(e,t){1&e&&v.Mc(0,"Precios por insumo")}function z(e,t){if(1&e){var n=v.cc();v.bc(0,"button",16),v.ic("click",(function(){return v.Dc(n),v.mc().saveDealer()})),v.Mc(1," Guardar Concesionario "),v.ac()}}function K(e,t){if(1&e){var n=v.cc();v.bc(0,"app-alert-error",17),v.ic("onAlertWasClose",(function(){return v.Dc(n),v.mc().closeErrorMessage()})),v.ac()}if(2&e){var i=v.mc();v.uc("title",i.errorTitle)("errorMessage",i.errorMessageApi)}}function Q(e,t){1&e&&v.Wb(0,"app-img-loading")}var X,Z=((X=function(){function e(t,n,r,c,a){i(this,e),this.dealerService=t,this.personService=n,this.navigationService=r,this.router=c,this.activeRoute=a,this.isAwaiting=!0,this.lsContacts=[],this.lsBranches=[],this.lsMaintenanceItems=[],this.maintenceItems=[],this.dealerID="",this.blockFormDealer=!1,this.isErrorVisible=!1,this.errorTitle="",this.errorMessageApi="",this.sReturnPath="/MasterDealers",this.oIsToDealer=!0}var t,r;return c(e,[{key:"ngOnInit",value:function(){this.action=parseInt(Object(m.a)("actionToPerform")),this.validateActionToDo(this.action),this.initComponents(),this.extractDataFromParams()}},{key:"initComponents",value:function(){this.configurePersonComponent(),this.errorMessage="",this.bFormHasError=!1,this.oDealerWasSaved=!1}},{key:"extractDataFromParams",value:function(){var e=this;this.isAwaiting=!0,this.activeRoute.paramMap.subscribe((function(t){e.dealerID=t.get("id"),e.dealerID?e.dealerService.getDealerById(parseInt(e.dealerID)).subscribe((function(t){e.oDealerToUpdate=t,e.lsContacts=t.contacts,e.lsBranches=t.branches,e.lsMaintenanceItems=t.maintenanceItems,e.isAwaiting=!1})):(e.oDealerToUpdate={id:0,document:"",name:"",phone:"",cellphone:"",address:"",email:"",website:"",city:{id:0,name:"",departmentId:0,state:!1},contacts:[],branches:[],state:!1,registrationDate:null,updateDate:null,deleteDate:null},e.lsContacts=[],e.lsBranches=[],e.lsMaintenanceItems=[],e.isAwaiting=!1)}))}},{key:"validateActionToDo",value:function(e){this.blockFormDealer=e==f.a.READ}},{key:"configurePersonComponent",value:function(){this.oConfigPersonComp=new h.a,this.oConfigPersonComp.documentIsVisible=!0,this.oConfigPersonComp.nameIsVisible=!0}},{key:"updateContactsToDealer",value:function(e){this.lsContacts=e}},{key:"updateBranchesToDealer",value:function(e){this.lsBranches=e}},{key:"setMaintenanceItemsByDealer",value:function(e){var t=this;this.maintenceItems=e.map((function(e){var n=t.lsMaintenanceItems.find((function(t){return t.code===e.code}));if((null==n?void 0:n.referencePrice)!==(null==e?void 0:e.referencePrice))return e})).filter((function(e){return e}))}},{key:"setPersonInfo",value:(t=regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.oDealerToUpdate=this.personService.getPerson(),e.next=3,setTimeout((function(){t.stepper.next()}),100);case 3:case"end":return e.stop()}}),e,this)})),r=function(){var e=this,i=arguments;return new Promise((function(r,c){var a=t.apply(e,i);function o(e){n(a,r,c,o,s,"next",e)}function s(e){n(a,r,c,o,s,"throw",e)}o(void 0)}))},function(){return r.apply(this,arguments)})},{key:"comeBack",value:function(){(this.action==f.a.READ||confirm("\xbfEst\xe1 seguro que desea regresar? , al hacerlo perder\xe1 los cambios consignados ac\xe1."))&&this.router.navigate([this.sReturnPath])}},{key:"saveDealer",value:function(){var e=this;this.isAwaiting=!0;var t=this.oDealerToUpdate;t.contacts=this.lsContacts,t.branches=this.lsBranches,t.maintenanceItems=this.maintenceItems,this.action==f.a.CREATE?this.dealerService.insertDealer(t).subscribe((function(t){g.a.fire({position:"center",icon:"success",title:"El concesionario ha sido insertado de manera correcta en la base de datos",showConfirmButton:!0}),e.isAwaiting=!1,e.router.navigate([e.sReturnPath])}),(function(t){e.isErrorVisible=!0,e.isAwaiting=!1,e.errorTitle="Ocurri\xf3 un error intentando Insertar el concesionario",e.errorMessageApi=t.error.Message})):this.action==f.a.UPDATE&&this.dealerService.updateDealer(t).subscribe((function(t){g.a.fire({position:"center",icon:"success",title:"El concesionario ha sido actualizado de manera correcta",showConfirmButton:!0}),e.isAwaiting=!1,e.router.navigate([e.sReturnPath])}),(function(t){e.isErrorVisible=!0,e.isAwaiting=!1,e.errorTitle="Ocurri\xf3 un error intentando Actualizar el concesionario",e.errorMessageApi=t.error.Message}))}},{key:"closeErrorMessage",value:function(){this.isErrorVisible=!1}}]),e}()).\u0275fac=function(e){return new(e||X)(v.Vb(y.a),v.Vb(M.a),v.Vb(I),v.Vb(u.b),v.Vb(u.a))},X.\u0275cmp=v.Pb({type:X,selectors:[["app-dealer"]],viewQuery:function(e,t){var n;1&e&&v.Qc(p.f,!0),2&e&&v.Bc(n=v.jc())&&(t.stepper=n.first)},decls:34,vars:20,consts:[["id","container__content"],[3,"linear"],["matStepLabel",""],[1,"card"],[3,"frmPersonMustBeBlocked","configComponent","personToUpdate","returnPath","formHasError","error","personWasSetted"],[3,"dealer","branchs","action","disableActionButtons","onBranchsWereModified"],[1,"container-step-buttons"],["matStepperPrevious","","type","button","mat-raised-button","","color","primary",1,"btn-step"],["matStepperNext","","type","button","mat-raised-button","","color","primary",1,"btn-step"],[3,"dealer","contacts","action","disableActionButtons","onContactsWereModified"],[3,"dealer","setIsFormBlocked","onItemsWereModified"],[1,"buttons__container"],["type","button",1,"btn","btn-danger",3,"click"],["type","button","class","btn btn-success",3,"click",4,"ngIf"],[3,"title","errorMessage","onAlertWasClose",4,"ngIf"],[4,"ngIf"],["type","button",1,"btn","btn-success",3,"click"],[3,"title","errorMessage","onAlertWasClose"]],template:function(e,t){1&e&&(v.bc(0,"div",0),v.bc(1,"mat-vertical-stepper",1),v.bc(2,"mat-step"),v.Lc(3,q,1,0,"ng-template",2),v.bc(4,"div",3),v.bc(5,"app-person",4),v.ic("personWasSetted",(function(){return t.setPersonInfo()})),v.ac(),v.ac(),v.ac(),v.bc(6,"mat-step"),v.Lc(7,H,1,0,"ng-template",2),v.bc(8,"app-branch",5),v.ic("onBranchsWereModified",(function(e){return t.updateBranchesToDealer(e)})),v.ac(),v.bc(9,"div",6),v.bc(10,"button",7),v.Mc(11," Atr\xe1s "),v.ac(),v.bc(12,"button",8),v.Mc(13," Siguiente "),v.ac(),v.ac(),v.ac(),v.bc(14,"mat-step"),v.Lc(15,G,1,0,"ng-template",2),v.bc(16,"app-contact",9),v.ic("onContactsWereModified",(function(e){return t.updateContactsToDealer(e)})),v.ac(),v.bc(17,"div",6),v.bc(18,"button",7),v.Mc(19," Atr\xe1s "),v.ac(),v.bc(20,"button",8),v.Mc(21," Siguiente "),v.ac(),v.ac(),v.ac(),v.bc(22,"mat-step"),v.Lc(23,$,1,0,"ng-template",2),v.bc(24,"app-tbl-prices-by-dealer",10),v.ic("onItemsWereModified",(function(e){return t.setMaintenanceItemsByDealer(e)})),v.ac(),v.bc(25,"div",6),v.bc(26,"button",7),v.Mc(27," Atr\xe1s "),v.ac(),v.ac(),v.bc(28,"div",11),v.bc(29,"button",12),v.ic("click",(function(){return t.comeBack()})),v.Mc(30," Cancelar "),v.ac(),v.Lc(31,z,2,0,"button",13),v.ac(),v.ac(),v.ac(),v.Lc(32,K,1,2,"app-alert-error",14),v.ac(),v.Lc(33,Q,1,0,"app-img-loading",15)),2&e&&(v.Jb(1),v.uc("linear",!0),v.Jb(4),v.uc("frmPersonMustBeBlocked",t.blockFormDealer)("configComponent",t.oConfigPersonComp)("personToUpdate",t.oDealerToUpdate)("returnPath",t.sReturnPath)("formHasError",t.bFormHasError)("error",t.errorMessage),v.Jb(3),v.uc("dealer",t.oDealerToUpdate)("branchs",t.lsBranches)("action",t.action)("disableActionButtons",t.blockFormDealer),v.Jb(8),v.uc("dealer",t.oDealerToUpdate)("contacts",t.lsContacts)("action",t.action)("disableActionButtons",t.blockFormDealer),v.Jb(8),v.uc("dealer",t.oDealerToUpdate)("setIsFormBlocked",t.blockFormDealer),v.Jb(7),v.uc("ngIf",!t.blockFormDealer),v.Jb(1),v.uc("ngIf",t.isErrorVisible),v.Jb(1),v.uc("ngIf",t.isAwaiting))},directives:[p.f,p.a,p.b,P.a,k.a,p.e,C.a,p.d,D.a,N,o.o,j.a,E.a],styles:[".card-body[_ngcontent-%COMP%]{padding:10px}.container__titles[_ngcontent-%COMP%]{overflow:hidden;border:1px solid #ccc;background-color:#f1f1f1}.container__titles[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:inherit;float:left;border:none;outline:none;cursor:pointer;padding:14px 16px;transition:.3s;font-size:20px}.container__titles[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#ddd}.container__titles[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:#ccc}.tab_content[_ngcontent-%COMP%]{padding:20px 50px;border:1px solid #ccc;border-top:none}#container__content[_ngcontent-%COMP%]{transition:margin-left 1s;padding:20px;margin-left:250px}.container-step-buttons[_ngcontent-%COMP%]{direction:ltr;display:flex;justify-content:flex-end}.container-step-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:5px;width:100px}.buttons__container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.buttons__container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:200px;margin-left:10px;margin-top:20px}"]}),X),Y=r("QgiH");function ee(e,t){if(1&e){var n=v.cc();v.bc(0,"tr"),v.bc(1,"th",8),v.Mc(2),v.ac(),v.bc(3,"td"),v.Mc(4),v.ac(),v.bc(5,"td"),v.Mc(6),v.nc(7,"titlecase"),v.ac(),v.bc(8,"td"),v.bc(9,"i",15),v.ic("click",(function(){v.Dc(n);var e=t.$implicit;return v.mc().getDetailsByDealer(e.id)})),v.ac(),v.bc(10,"i",16),v.ic("click",(function(){v.Dc(n);var e=t.$implicit;return v.mc().updateDealer(e.id)})),v.ac(),v.bc(11,"i",17),v.ic("click",(function(){v.Dc(n);var e=t.$implicit;return v.mc().deleteDealer(e)})),v.ac(),v.ac(),v.ac()}if(2&e){var i=t.index,r=t.$implicit;v.Jb(2),v.Nc(i+1),v.Jb(2),v.Nc(r.document),v.Jb(2),v.Nc(v.oc(7,3,r.name))}}function te(e,t){if(1&e){var n=v.cc();v.bc(0,"app-alert-error",18),v.ic("onAlertWasClose",(function(){return v.Dc(n),v.mc().closeErrorMessage()})),v.ac()}if(2&e){var i=v.mc();v.uc("title",i.errorTitle)("errorMessage",i.errorMessageApi)}}function ne(e,t){1&e&&v.Wb(0,"app-img-loading")}var ie,re,ce,ae=function(e){return{itemsPerPage:10,currentPage:e}},oe=[{path:"",component:d.a,children:[{path:"",component:(ie=function(){function e(t,n,r){var c=this;i(this,e),this.router=t,this.dealerService=n,this.navigationService=r,this.lsDealer=[],this.lsDealerFiltered=[],this.p=1,this.isErrorVisible=!1,this.errorTitle="",this.errorMessageApi="",this.txtFilter=new s.g,this.txtFilter.valueChanges.subscribe((function(e){c.lsDealerFiltered=c.lsDealer.filter((function(t){if(null!=e)return t.document.includes(e)||t.name.toUpperCase().includes(e.toUpperCase())}))}))}return c(e,[{key:"ngOnInit",value:function(){this.initComponents()}},{key:"initComponents",value:function(){this.showTableDealers()}},{key:"showTableDealers",value:function(){var e=this;try{this.isAwaiting=!0,this.dealerService.getDealers().subscribe((function(t){e.lsDealer=t,e.lsDealerFiltered=t})),this.isAwaiting=!1}catch(t){console.error(t.error.Message)}}},{key:"updateDealer",value:function(e){this.action=f.a.UPDATE,Object(m.b)("actionToPerform",this.action),this.router.navigate(["/MasterDealers/Dealer",e])}},{key:"getDetailsByDealer",value:function(e){this.action=f.a.READ,Object(m.b)("actionToPerform",this.action),this.router.navigate(["/MasterDealers/Dealer",e])}},{key:"deleteDealer",value:function(e){var t=this;confirm("\xbfEst\xe1 seguro que desea eliminar este concesionario?")&&(this.isAwaiting=!0,this.dealerService.deleteDealer(e).subscribe((function(n){var i=t.lsDealer.findIndex((function(t){return t.id==e.id}));t.lsDealer.splice(i,1),t.lsDealerFiltered=t.lsDealer,t.isAwaiting=!1,g.a.fire({position:"center",icon:"success",title:n.message,showConfirmButton:!0})}),(function(e){t.isErrorVisible=!0,t.isAwaiting=!1,t.errorTitle="Ocurri\xf3 un error intentando Actualizar el concesionario",t.errorMessageApi=e.error.Message})))}},{key:"insertDealer",value:function(){this.action=f.a.CREATE,Object(m.b)("actionToPerform",this.action),this.router.navigate(["/MasterDealers/Dealer"])}},{key:"validateCityName",value:function(e){return""}},{key:"removeFilter",value:function(){this.txtFilter.setValue(null),this.lsDealerFiltered=this.lsDealer}},{key:"closeErrorMessage",value:function(){this.isErrorVisible=!1}},{key:"downloadExcel",value:function(){var e=this.lsDealer.map((function(e){return{Documento:e.document,RazonSocial:e.name}}));Y.a.convertArrayToFile(e,"Concesionarios")}}]),e}(),ie.\u0275fac=function(e){return new(e||ie)(v.Vb(u.b),v.Vb(y.a),v.Vb(I))},ie.\u0275cmp=v.Pb({type:ie,selectors:[["app-tbl-dealer"]],decls:30,vars:9,consts:[["id","container__content"],[1,"container-filter"],["placeholder","Nit \xf3 Nombre...","type","text",1,"form-control",3,"formControl"],["type","button",1,"btn","btn-danger",3,"click"],[1,"btn","btn-primary",3,"click"],[1,"btn-add","btn-info",3,"click"],[1,"fas","fa-plus"],[1,"table","table-striped"],[1,"col-number","col-mobile-hide"],[1,"col-mobile-hide"],[4,"ngFor","ngForOf"],[1,"paginationContainer"],[3,"pageChange"],[3,"title","errorMessage","onAlertWasClose",4,"ngIf"],[4,"ngIf"],["title","M\xe1s informaci\xf3n",1,"fas","fa-info-circle","text-info",3,"click"],["title","Modificar",1,"fas","fa-edit","text-warning",3,"click"],["title","Eliminar",1,"fas","fa-trash-alt","text-danger",3,"click"],[3,"title","errorMessage","onAlertWasClose"]],template:function(e,t){1&e&&(v.bc(0,"div",0),v.bc(1,"h1"),v.Mc(2,"Concesionarios"),v.ac(),v.bc(3,"label"),v.Mc(4,"Buscar concesionarios por ..."),v.ac(),v.bc(5,"div",1),v.Wb(6,"input",2),v.bc(7,"button",3),v.ic("click",(function(){return t.removeFilter()})),v.Mc(8," Borrar filtro "),v.ac(),v.bc(9,"button",4),v.ic("click",(function(){return t.downloadExcel()})),v.Mc(10," Descargar Excel "),v.ac(),v.ac(),v.bc(11,"button",5),v.ic("click",(function(){return t.insertDealer()})),v.Wb(12,"i",6),v.ac(),v.bc(13,"table",7),v.bc(14,"thead"),v.bc(15,"th",8),v.Mc(16,"#"),v.ac(),v.bc(17,"th"),v.Mc(18,"Documento"),v.ac(),v.bc(19,"th"),v.Mc(20,"Raz\xf3n social"),v.ac(),v.bc(21,"th",9),v.Mc(22,"Acciones"),v.ac(),v.ac(),v.bc(23,"tbody"),v.Lc(24,ee,12,5,"tr",10),v.nc(25,"paginate"),v.ac(),v.ac(),v.bc(26,"div",11),v.bc(27,"pagination-controls",12),v.ic("pageChange",(function(e){return t.p=e})),v.ac(),v.ac(),v.Lc(28,te,1,2,"app-alert-error",13),v.ac(),v.Lc(29,ne,1,0,"app-img-loading",14)),2&e&&(v.Jb(6),v.uc("formControl",t.txtFilter),v.Jb(18),v.uc("ngForOf",v.pc(25,4,t.lsDealerFiltered,v.xc(7,ae,t.p))),v.Jb(4),v.uc("ngIf",t.isErrorVisible),v.Jb(1),v.uc("ngIf",t.isAwaiting))},directives:[s.c,s.q,s.h,o.n,F.c,o.o,j.a,E.a],pipes:[F.b,o.x],styles:["i[_ngcontent-%COMP%]{margin:0 3px;cursor:pointer}.col-number[_ngcontent-%COMP%]{max-width:50px;width:50px}.btn-add[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{cursor:pointer}.btn-add[_ngcontent-%COMP%]{border-radius:50%;width:50px;height:50px;position:relative;left:93%;margin-bottom:20px;top:10px;outline:none;text-align:center;font-size:24px;border:none;z-index:55}#container__content[_ngcontent-%COMP%]{transition:margin-left 1s;padding:20px 50px;margin-left:250px}@media only screen and (max-width:600px){.col-mobile-hide[_ngcontent-%COMP%]{display:none}.btn-add[_ngcontent-%COMP%]{left:80vw}}.container-filter[_ngcontent-%COMP%]{display:flex;flex-direction:row}.container-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:150px;cursor:pointer;margin-left:10px}"]}),ie)},{path:"Dealer",component:Z},{path:"Dealer/:id",component:Z}]}],se=((ce=function e(){i(this,e)}).\u0275mod=v.Tb({type:ce}),ce.\u0275inj=v.Sb({factory:function(e){return new(e||ce)},imports:[[u.f.forChild(oe)],u.f]}),ce),le=((re=function e(){i(this,e)}).\u0275mod=v.Tb({type:re}),re.\u0275inj=v.Sb({factory:function(e){return new(e||re)},imports:[[o.c,l.a,s.l,s.w,se,p.c,C.b]]}),re)},"xch/":function(t,n,r){"use strict";r.d(n,"a",(function(){return l}));var a=r("tk/3"),o=r("AytR"),s=r("fXoL"),l=function(){var t=function(){function t(e){i(this,t),this.http=e,this.URL_API=o.a.apiUrl+"/MaintenanceItem",this.HttpOptions={headers:new a.c({"Content-Type":"application/json"})}}return c(t,[{key:"getCategorySelected",value:function(){return this.category}},{key:"setCategorySelected",value:function(e){this.category=e}},{key:"getPresentationUnit",value:function(){return this.presentationUnit}},{key:"setPresentationUnit",value:function(e){this.presentationUnit=e}},{key:"getTypeOfItem",value:function(){return this.typeOfItem}},{key:"getItem",value:function(){return this.item}},{key:"setItem",value:function(e){this.item=e}},{key:"settypeOfItem",value:function(e){this.typeOfItem=e}},{key:"getItemToUpdate",value:function(){return this.itemToUpdate}},{key:"setItemToUpdate",value:function(e){this.itemToUpdate=e}},{key:"getMaintenanceItems",value:function(e){return this.http.get("".concat(this.URL_API,"/Get?dealer_id=").concat(e))}},{key:"getMaintenanceItemById",value:function(e){return this.http.get("".concat(this.URL_API,"/GetById?itemId=").concat(e))}},{key:"getItemsByVehicleModel",value:function(e){return this.http.get("".concat(this.URL_API,"/GetItemsByVehicleModel?vehicleModel_id=").concat(e))}},{key:"getPresentationUnits",value:function(){return this.http.get(this.URL_API+"/GetPresentationUnits")}},{key:"getCategories",value:function(){return this.http.get(this.URL_API+"/GetCategories")}},{key:"getTypeOfMaintenanceItem",value:function(){return this.http.get(this.URL_API+"/getTypeOfMaintenanceItem")}},{key:"getPricesByDealer",value:function(e){return this.http.get("".concat(this.URL_API,"/GetPricesByDealer?dealer_id=").concat(e))}},{key:"setPricesByDealer",value:function(e){return this.http.post(this.URL_API+"/SetPricesByDealer",e,this.HttpOptions)}},{key:"getPricesByContract",value:function(e){return this.http.get("".concat(this.URL_API,"/GetPricesByContract?contract_id=").concat(e))}},{key:"setPricesByContract",value:function(e){return this.http.post(this.URL_API+"/SetPricesByContract",e,this.HttpOptions)}},{key:"getTaxesList",value:function(){return this.http.get(this.URL_API+"/GetTaxesList")}},{key:"insert",value:function(e){return this.http.post(this.URL_API+"/Insert",e,this.HttpOptions)}},{key:"update",value:function(e){return this.http.put(this.URL_API+"/Update",e,this.HttpOptions)}},{key:"delete",value:function(e){return this.http.delete("".concat(this.URL_API,"/Delete?maintenanceItemId=").concat(e.id),this.HttpOptions)}},{key:"calculateTaxes",value:function(t,n){var i=0;if(n.length>0){var r,c=e(n);try{for(c.s();!(r=c.n()).done;){var a=r.value;i+=Math.round(t*(a.percentValue/100))}}catch(o){c.e(o)}finally{c.f()}}return i}},{key:"calculateTotalByItem",value:function(e,t,n){return Math.round(e-t+n)}},{key:"getItemRAAdministration",value:function(){return this.http.get(this.URL_API+"/GetByTypeId?typeId=3")}},{key:"updateMaintence",value:function(e){return this.http.post(this.URL_API+"/Update",e)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s.fc(a.a))},t.\u0275prov=s.Rb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()}}])}();