(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{Y2t2:function(t,c,a){"use strict";a.r(c),a.d(c,"ApprovalcontractModule",(function(){return P}));var n=a("ofXK"),e=a("tyNb"),o=a("uswQ"),i=a("7I7t"),r=a("0IaG"),s=a("fXoL"),b=(a("cRgG"),a("Wp6s")),l=a("kmnG"),d=a("bTqV");let p=(()=>{class t{constructor(t,c){this.dialogRef=t,this.data=c}onNoClick(){this.dialogRef.close()}}return t.\u0275fac=function(c){return new(c||t)(s.Vb(r.h),s.Vb(r.a))},t.\u0275cmp=s.Pb({type:t,selectors:[["dialog-approvalcontract"]],decls:79,vars:14,consts:[[1,"content"],[1,"title"],["mat-dialog-title",""],[1,"content-data"],[1,"img"],["mat-card-image","","src","../../../../assets/images/contract.svg","alt","Contract"],[1,"info"],["mat-dialog-content",""],["matInput","",3,"disabled","value"],["mat-dialog-actions","","align","center"],["mat-raised-button","","mat-dialog-close","","color","warn",3,"click"]],template:function(t,c){1&t&&(s.bc(0,"div",0),s.bc(1,"div",1),s.bc(2,"h1",2),s.Mc(3,"Informacion del Contrato"),s.ac(),s.ac(),s.bc(4,"div",3),s.bc(5,"div",4),s.Wb(6,"img",5),s.ac(),s.bc(7,"div",6),s.bc(8,"div",7),s.bc(9,"ul"),s.bc(10,"li"),s.bc(11,"b"),s.Mc(12,"Codigo Interno: "),s.ac(),s.bc(13,"span"),s.Mc(14),s.ac(),s.ac(),s.bc(15,"li"),s.bc(16,"b"),s.Mc(17,"C\xf3digo referencia: "),s.ac(),s.bc(18,"span"),s.Mc(19),s.ac(),s.ac(),s.bc(20,"li"),s.bc(21,"b"),s.Mc(22,"Cliente: "),s.ac(),s.bc(23,"span"),s.Mc(24),s.ac(),s.ac(),s.bc(25,"li"),s.bc(26,"b"),s.Mc(27,"Concesionario: "),s.ac(),s.bc(28,"span"),s.Mc(29),s.ac(),s.ac(),s.bc(30,"li"),s.bc(31,"b"),s.Mc(32,"Plazo en meses: "),s.ac(),s.bc(33,"span"),s.Mc(34),s.ac(),s.ac(),s.bc(35,"li"),s.bc(36,"b"),s.Mc(37,"Veh. contratados: "),s.ac(),s.bc(38,"span"),s.Mc(39),s.ac(),s.ac(),s.bc(40,"li"),s.bc(41,"b"),s.Mc(42,"Estado: "),s.ac(),s.bc(43,"span"),s.Mc(44),s.ac(),s.ac(),s.bc(45,"li"),s.bc(46,"b"),s.Mc(47,"Tipo De Descuento: "),s.ac(),s.bc(48,"span"),s.Mc(49),s.ac(),s.ac(),s.bc(50,"li"),s.bc(51,"b"),s.Mc(52,"Valor Del Descuento: "),s.ac(),s.bc(53,"span"),s.Mc(54),s.ac(),s.ac(),s.bc(55,"li"),s.bc(56,"b"),s.Mc(57,"Fecha Registro Contrato: "),s.ac(),s.bc(58,"span"),s.Mc(59),s.ac(),s.ac(),s.bc(60,"li"),s.bc(61,"b"),s.Mc(62,"Fecha Inicio Contrato: "),s.ac(),s.bc(63,"span"),s.Mc(64),s.ac(),s.ac(),s.bc(65,"li"),s.bc(66,"b"),s.Mc(67,"Fecha Fin Contrato: "),s.ac(),s.bc(68,"span"),s.Mc(69),s.ac(),s.ac(),s.bc(70,"li"),s.bc(71,"mat-label"),s.bc(72,"b"),s.Mc(73,"Observaciones Del Contrato:"),s.ac(),s.ac(),s.Wb(74,"br"),s.Wb(75,"textarea",8),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.bc(76,"div",9),s.bc(77,"button",10),s.ic("click",(function(){return c.onNoClick()})),s.Mc(78,"Cancelar"),s.ac(),s.ac(),s.ac()),2&t&&(s.Jb(14),s.Nc(c.data.code),s.Jb(5),s.Nc(c.data.name),s.Jb(5),s.Nc(c.data.client.name),s.Jb(5),s.Nc(c.data.dealer.name),s.Jb(5),s.Nc(c.data.duration),s.Jb(5),s.Nc(c.data.amountVehicles),s.Jb(5),s.Nc(c.data.contractState.name),s.Jb(5),s.Nc(c.data.discountType.name),s.Jb(5),s.Nc(c.data.discountValue),s.Jb(5),s.Nc(c.data.registrationDate),s.Jb(5),s.Nc(c.data.startingDate),s.Jb(5),s.Nc(c.data.endingDate),s.Jb(6),s.uc("disabled",!0)("value",c.data.observation))},directives:[r.i,b.g,r.f,l.f,r.c,d.a,r.d],styles:[".content[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;flex-direction:column}.content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{height:100%;font-weight:700}.content[_ngcontent-%COMP%]   .content-data[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;flex-direction:row;justify-content:space-between}.content[_ngcontent-%COMP%]   .content-data[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-left:20px;margin-bottom:20px}.content[_ngcontent-%COMP%]   .content-data[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{padding:5px;box-shadow:0 2px 5px -1px rgba(50,50,93,.25),0 1px 3px -1px rgba(0,0,0,.3);border-radius:20px;width:400px}"]}),t})();var g=a("AytR"),u=a("tk/3");let m=(()=>{class t{constructor(t){this.http=t,this.URL_API=g.a.apiUrl+"Contract/",this.URL_API_USER=g.a.apiUrl+"/Users/"}GetUserWithDealer(t){return this.http.get(`${this.URL_API_USER}/GetUserByDealer?usr_id=${t}`)}updateStateContract(t,c){return this.http.post(this.URL_API+"/ChangeStateContract",{contract_id:t,state:c})}}return t.\u0275fac=function(c){return new(c||t)(s.fc(u.a))},t.\u0275prov=s.Rb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var h=a("2jix"),C=a("3LUQ"),f=a("f0Cb"),v=a("bv9b");function M(t,c){if(1&t){const t=s.cc();s.bc(0,"mat-card",4),s.bc(1,"mat-card-header"),s.bc(2,"div",5),s.ic("click",(function(){s.Dc(t);const a=c.$implicit;return s.mc().openDialog(a.id)})),s.ac(),s.bc(3,"mat-card-title"),s.Mc(4),s.ac(),s.bc(5,"mat-card-subtitle"),s.Mc(6),s.ac(),s.ac(),s.Wb(7,"mat-divider",1),s.Wb(8,"br"),s.bc(9,"mat-card-content"),s.bc(10,"ul"),s.bc(11,"li"),s.bc(12,"b"),s.Mc(13,"Cliente: "),s.ac(),s.bc(14,"span"),s.Mc(15),s.ac(),s.ac(),s.bc(16,"li"),s.bc(17,"b"),s.Mc(18,"Concesionario: "),s.ac(),s.bc(19,"span"),s.Mc(20),s.ac(),s.ac(),s.ac(),s.ac(),s.bc(21,"mat-card-actions",6),s.bc(22,"button",7),s.ic("click",(function(){s.Dc(t);const a=c.$implicit;return s.mc().approveContract(a.id)})),s.Mc(23,"Aceptar"),s.ac(),s.bc(24,"button",8),s.ic("click",(function(){s.Dc(t);const a=c.$implicit;return s.mc().declineContract(a.id)})),s.Mc(25,"Cancelar"),s.ac(),s.ac(),s.bc(26,"mat-card-footer"),s.Wb(27,"mat-progress-bar",9),s.ac(),s.ac()}if(2&t){const t=c.$implicit;s.Jb(4),s.Nc(t.code),s.Jb(2),s.Nc(t.name),s.Jb(9),s.Nc(t.client.name),s.Jb(5),s.Nc(t.dealer.name)}}const _=[{path:"",component:o.a,children:[{path:"",component:(()=>{class t{constructor(t,c,a,n){this.dialog=t,this.approvalContractService=c,this.contractService=a,this.alertService=n,this.contractsToApprove=[],this.contractDialog=null}openDialog(t){this.contractDialog=this.contractsToApprove.find(c=>c.id==t),this.dialog.open(p,{disableClose:!0,data:this.contractDialog})}ngOnInit(){this.initdata()}initdata(){this.setCompany(),this.setDealerid()}setDealerid(){this.approvalContractService.GetUserWithDealer(this.company.usr_id).subscribe(t=>{console.log(),3==(null==t?void 0:t.id_group)&&null!=(null==t?void 0:t.dealerid)&&(this.dealerID=null==t?void 0:t.dealerid,this.getContractsToList())})}getContractsToList(){this.contractService.getContractPending(this.dealerID).subscribe(t=>{this.contractsToApprove=t})}setCompany(){this.company=i.a.validateUserAndCompany()}approveContract(t){this.alertService.confirm("\xbfEst\xe1 seguro de aprobar el contrato?",()=>{this.approvalContractService.updateStateContract(t,!0).subscribe(t=>{console.log(t),this.getContractsToList()})})}declineContract(t){this.alertService.confirm("\xbfEst\xe1 seguro de Cancelar el contrato?",()=>{this.approvalContractService.updateStateContract(t,!1).subscribe(t=>{console.log(t),this.getContractsToList()})})}}return t.\u0275fac=function(c){return new(c||t)(s.Vb(r.b),s.Vb(m),s.Vb(h.a),s.Vb(C.a))},t.\u0275cmp=s.Pb({type:t,selectors:[["app-approvalcontract"]],decls:6,vars:1,consts:[["id","container__content"],["inset",""],[1,"cards"],["class","contract-card",4,"ngFor","ngForOf"],[1,"contract-card"],["mat-card-avatar","",1,"infobtn",3,"click"],["align","center"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click"],["mode","indeterminate","color","primary"]],template:function(t,c){1&t&&(s.bc(0,"div",0),s.bc(1,"h1"),s.Mc(2,"APROBACION DE CONTRATOS"),s.ac(),s.Wb(3,"mat-divider",1),s.bc(4,"div",2),s.Lc(5,M,28,4,"mat-card",3),s.ac(),s.ac()),2&t&&(s.Jb(5),s.uc("ngForOf",c.contractsToApprove))},directives:[f.a,n.n,b.a,b.f,b.c,b.j,b.i,b.d,b.b,d.a,b.e,v.a],styles:["#container__content[_ngcontent-%COMP%]{transition:margin-left 1s;padding:20px;margin-left:250px}#container__content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center}.cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr))}.contract-card[_ngcontent-%COMP%]{max-width:250px;margin-top:10px}.infobtn[_ngcontent-%COMP%]{background-image:url(info.344998574b2e0b46ef3b.svg);background-size:cover}li[_ngcontent-%COMP%]{list-style:none}"]}),t})()}]}];let x=(()=>{class t{}return t.\u0275mod=s.Tb({type:t}),t.\u0275inj=s.Sb({factory:function(c){return new(c||t)},imports:[[e.f.forChild(_)],e.f]}),t})(),P=(()=>{class t{}return t.\u0275mod=s.Tb({type:t}),t.\u0275inj=s.Sb({factory:function(c){return new(c||t)},imports:[[n.c,b.h,d.b,x,v.b,r.g,f.b,l.e]]}),t})()}}]);