!function(){function e(e,n){var c;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(c=function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var c=Object.prototype.toString.call(e).slice(8,-1);"Object"===c&&e.constructor&&(c=e.constructor.name);if("Map"===c||"Set"===c)return Array.from(e);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return t(e,n)}(e))||n&&e&&"number"==typeof e.length){c&&(e=c);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){c=e[Symbol.iterator]()},n:function(){var e=c.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==c.return||c.return()}finally{if(s)throw r}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,c=new Array(t);n<t;n++)c[n]=e[n];return c}function n(e,t,n,c,i,a,r){try{var o=e[a](r),s=o.value}catch(u){return void n(u)}o.done?t(s):Promise.resolve(s).then(c,i)}function c(e){return function(){var t=this,c=arguments;return new Promise((function(i,a){var r=e.apply(t,c);function o(e){n(r,i,a,o,s,"next",e)}function s(e){n(r,i,a,o,s,"throw",e)}o(void 0)}))}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var c=t[n];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(e,c.key,c)}}function r(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"0x5P":function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var a=n("tk/3"),o=n("LRne"),s=n("JIr8"),u=n("AytR"),l=n("fXoL"),h=function(){var e=function(){function e(t){i(this,e),this.http=t,this.URL_API=u.a.apiUrl+"/Vehicle",this.HttpOptions={headers:new a.c({"Content-Type":"application/json"})}}var t,n;return r(e,[{key:"getBrands",value:function(){return this.http.get(this.URL_API+"/GetBrands")}},{key:"getVehicleTypes",value:function(){return this.http.get(this.URL_API+"/GetVehicleType")}},{key:"getVehicleStates",value:function(){return this.http.get(this.URL_API+"/GetVehicleStates")}},{key:"getVehicleModelByBrandAndType",value:function(e,t){return this.http.get("".concat(this.URL_API,"/GetVehicleModelByBrandAndType?pId_brand=").concat(e,"&pId_VehicleType=").concat(t))}},{key:"getVehicleModelByTypes",value:(n=c(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",e.abrupt("return",(t.forEach((function(e){return n+=e.id+","})),n=n.substr(0,n.length-1),this.http.get("".concat(this.URL_API,"/GetVehicleModelsByTypes?sLsTypes=").concat(n)).toPromise()));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"getVehiclesByClient",value:(t=c(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.http.get("".concat(this.URL_API,"/GetVehiclesByClient?pClient_id=").concat(t)).toPromise());case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getVehiclesByClientAndModel",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.http.get("".concat(this.URL_API,"/GetVehiclesByClientAndModel?pClient_id=").concat(e,"&sModels=").concat(t,"&contract_id=").concat(n))}},{key:"Insert",value:function(e){return this.http.post(this.URL_API+"/Insert",e,this.HttpOptions)}},{key:"Update",value:function(e){return this.http.put(this.URL_API+"/Update",e,this.HttpOptions)}},{key:"Delete",value:function(e){return this.http.delete("".concat(this.URL_API,"/Delete?vehicleId=").concat(e.id),this.HttpOptions)}},{key:"getVehiclesByLicensePlate",value:function(e){return e.trim()?this.http.get("".concat(this.URL_API,"/GetVehiclesByLicensePlate?pLicensePlate=").concat(e)).pipe(Object(s.a)(this.handleError("getVehiclesByLicensePlate",[]))):Object(o.a)([])}},{key:"setListVehicleTypeSelected",value:function(e){this.lsVehicleTypeSelected=e}},{key:"getListVehicleTypeSelected",value:function(){return this.lsVehicleTypeSelected}},{key:"setVehicleModelSelected",value:function(e){this.vehicleModelSelected=e}},{key:"getVehicleModelSelected",value:function(){return this.vehicleModelSelected}},{key:"setVehicleStateSelected",value:function(e){this.vehicleState=e}},{key:"getVehicleStateSelected",value:function(){return this.vehicleState}},{key:"setVehicle",value:function(e){this.vehicle=e}},{key:"getVehicle",value:function(){return this.vehicle}},{key:"setVehicleToUpdate",value:function(e){this.vehicleToUpdate=e}},{key:"getVehicleToUpdate",value:function(){return this.vehicleToUpdate}},{key:"setBrandSelected",value:function(e){this.brandSelected=e}},{key:"getBrandSelected",value:function(){return this.brandSelected}},{key:"setVehicleTypeSelected",value:function(e){this.vehicleTypeSelected=e}},{key:"getVehicleTypeSelected",value:function(){return this.vehicleTypeSelected}},{key:"getListVehicleModelsSelected",value:function(){return this.lsVehicleModelsSelected}},{key:"setListVehicleModelsSelected",value:function(e){this.lsVehicleModelsSelected=e}},{key:"getListVehiclesSelected",value:function(){return this.lsVehiclesSelected}},{key:"setListVehiclesSelected",value:function(e){this.lsVehiclesSelected=e}},{key:"handleError",value:function(){var e=arguments.length>1?arguments[1]:void 0;return function(t){return console.error(t),Object(o.a)(e)}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(l.fc(a.a))},e.\u0275prov=l.Rb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},"930R":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var c=function(e){return e[e.MAIN_COMPANY=1]="MAIN_COMPANY",e[e.CLIENT=2]="CLIENT",e[e.DEALER=3]="DEALER",e}({})},Dhb6:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n("tk/3"),o=n("AytR"),s=n("fXoL"),u=function(){var e=function(){function e(t){i(this,e),this.http=t,this.URL_API=o.a.apiUrl+"/MaintenanceRoutine",this.HttpOptions={headers:new a.c({"Content-Type":"application/json"})}}var t;return r(e,[{key:"getFrecuencySelected",value:function(){return this.frecuencySelected}},{key:"setFrecuencySelected",value:function(e){this.frecuencySelected=e}},{key:"getRoutine",value:function(){return this.routine}},{key:"setRoutine",value:function(e){this.routine=e}},{key:"getFrequency",value:function(){return this.http.get(this.URL_API+"/GetFrequency")}},{key:"getMaintenanceRoutines",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.http.get("".concat(this.URL_API,"/GetMaintenanceRoutines?vehicleModel_id=").concat(e,"&frequency_id=").concat(t))}},{key:"getMaintenanceRoutineByID",value:function(e){return this.http.get("".concat(this.URL_API,"/GetMaintenanceRoutineById?pRoutine_id=").concat(e))}},{key:"getMaintenanceRoutineByModel",value:function(e){return this.http.get("".concat(this.URL_API,"/GetMaintenanceRoutineByModelId?model_id=").concat(e))}},{key:"ValidateRoutineAndFrequency",value:(t=c(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.http.get("".concat(this.URL_API,"/ValidateRoutineAndFrequency?vehicleModel_id=").concat(t,"&frequency_id=").concat(n)).toPromise());case 1:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"insert",value:function(e){return this.http.post(this.URL_API+"/Insert",e,this.HttpOptions)}},{key:"update",value:function(e){return this.http.put(this.URL_API+"/Update",e,this.HttpOptions)}},{key:"delete",value:function(e){return this.http.delete("".concat(this.URL_API,"/Delete?routineId=").concat(e.id))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.fc(a.a))},e.\u0275prov=s.Rb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},KBxE:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var c=n("fXoL"),a=function(){var e=function(){function e(){i(this,e),this.title="",this.errorMessage="",this.onAlertWasClose=new c.q}return r(e,[{key:"ngOnInit",value:function(){}},{key:"closeAlert",value:function(){this.onAlertWasClose.emit(!0)}},{key:"setTitle",set:function(e){this.title=e}},{key:"setErrorMessage",set:function(e){this.errorMessage=e}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Pb({type:e,selectors:[["app-alert-error"]],inputs:{setTitle:["title","setTitle"],setErrorMessage:["errorMessage","setErrorMessage"]},outputs:{onAlertWasClose:"onAlertWasClose"},decls:15,vars:2,consts:[[1,"item-overlay"],[1,"card"],["id","container__header",1,"card-header"],[1,"buttonClose",3,"click"],[1,"fas","fa-times"],[1,"card-body"],[1,"container-error"],["width","100px","height","100px","src","assets/error.png","alt","error"],[1,"error-description"]],template:function(e,t){1&e&&(c.bc(0,"div",0),c.bc(1,"div",1),c.bc(2,"div",2),c.bc(3,"a",3),c.ic("click",(function(){return t.closeAlert()})),c.Wb(4,"i",4),c.ac(),c.ac(),c.bc(5,"div",5),c.bc(6,"div",6),c.Wb(7,"img",7),c.bc(8,"div",8),c.bc(9,"h2"),c.Mc(10),c.ac(),c.bc(11,"p"),c.bc(12,"b"),c.Mc(13,"Detalle: "),c.ac(),c.Mc(14),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.ac()),2&e&&(c.Jb(10),c.Nc(t.title),c.Jb(4),c.Nc(t.errorMessage))},styles:[".card[_ngcontent-%COMP%]{position:relative;width:650px;margin:10px}.card-body[_ngcontent-%COMP%]{padding:10px}.container-error[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;padding:10px}.error-description[_ngcontent-%COMP%]{position:relative;max-width:450px;left:30px}#container__header[_ngcontent-%COMP%]{display:flex;flex-direction:row;direction:rtl}.item-overlay[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3fr);grid-template-rows:repeat(3fr);position:fixed;left:0;right:0;top:0;bottom:0;background-color:rgba(6,129,230,.1);border-radius:15px;align-items:center;justify-items:center;z-index:5000;width:100%;height:100%}"]}),e}()},R7St:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var c=function(){function e(){i(this,e)}return r(e,[{key:"formatNumberToString",value:function(e){var t=Math.round(e).toString(),n="",c="",i=t.indexOf(".");i>0?(n=t.substr(0,i),c=t.substr(i,t.length)):n=t.substr(0,t.length);for(var a=n.split("").reverse(),r=Math.floor(a.length/3),o=0;o<r;o++){var s,u=a.lastIndexOf(",");s=u>0?u+4:3,a.splice(s,0,",")}var l=a.reverse().join("");return","==l.split("")[0]&&(l=l.substr(1,l.length)),""!=c&&(l+=c=c.replace(/\,/g,".")),l}}]),e}()},pMMx:function(e,t,n){"use strict";n.d(t,"a",(function(){return P}));var c,a,o,s,u=n("fXoL"),l=n("2Vo4"),h=n("PSD3"),d=n.n(h),f=n("vllv"),m=((c=function(){function e(t){i(this,e),this.maintenanceItemManagerService=t}return r(e,[{key:"calculateTotalPriceByAmount",value:function(e){var t=this,n=0;return e.forEach((function(e){n+=t.maintenanceItemManagerService.calculatePriceByAmount(e.referencePrice,e.amount)})),n}},{key:"calculateTotalDiscount",value:function(e,t){var n=this,c=0;return e.forEach((function(e){c+=n.maintenanceItemManagerService.calculateDiscountByItem(e.referencePrice,e.amount,t,e)})),c}},{key:"calculateTotalTaxes",value:function(e,t){var n=this,c=0;return null!=e&&e.forEach((function(e){var i=n.maintenanceItemManagerService.calculatePriceByAmount(e.referencePrice,e.amount),a=n.maintenanceItemManagerService.calculateDiscountByItem(e.referencePrice,e.amount,t,e),r=n.maintenanceItemManagerService.calculatePriceWithDiscount(i,a);c+=n.maintenanceItemManagerService.calculateTaxesByItem(e,r)})),console.log("Taxes By routine -> "+c),c}}]),e}()).\u0275fac=function(e){return new(e||c)(u.fc(f.a))},c.\u0275prov=u.Rb({token:c,factory:c.\u0275fac,providedIn:"root"}),c),p=n("ofXK"),y=((s=function(){function e(t){i(this,e),this.maintenanceItemManagerService=t}return r(e,[{key:"transform",value:function(e,t,n){return this.maintenanceItemManagerService.calculatePriceByAmount(t,n)}}]),e}()).\u0275fac=function(e){return new(e||s)(u.Vb(f.a))},s.\u0275pipe=u.Ub({name:"calculatePriceByAmount",type:s,pure:!0}),s),v=((o=function(){function e(t){i(this,e),this.maintenanceItemManagerService=t}return r(e,[{key:"transform",value:function(e,t,n,c){var i=0;return null!=c&&(i=this.maintenanceItemManagerService.calculateDiscountByItem(t,n,c,e)),i}}]),e}()).\u0275fac=function(e){return new(e||o)(u.Vb(f.a))},o.\u0275pipe=u.Ub({name:"calculateDiscount",type:o,pure:!0}),o),b=((a=function(){function e(t){i(this,e),this.maintenanceItemManagerService=t}return r(e,[{key:"transform",value:function(e,t,n,c){var i=this.maintenanceItemManagerService.calculatePriceByAmount(t,n),a=0;return c&&(a=this.maintenanceItemManagerService.calculateDiscountByItem(t,n,c,e)),this.maintenanceItemManagerService.calculatePriceWithDiscount(i,a)}}]),e}()).\u0275fac=function(e){return new(e||a)(u.Vb(f.a))},a.\u0275pipe=u.Ub({name:"calculatePriceWithoutDiscount",type:a,pure:!0}),a),I=n("YOAU"),g=n("woZN");function M(e,t){if(1&e){var n=u.cc();u.bc(0,"tr"),u.bc(1,"td"),u.Mc(2),u.ac(),u.bc(3,"td"),u.bc(4,"label",6),u.bc(5,"input",7),u.ic("click",(function(e){u.Dc(n);var c=t.$implicit;return u.mc().pickItem(e.target.checked,c)})),u.ac(),u.Wb(6,"span",8),u.ac(),u.ac(),u.bc(7,"td"),u.bc(8,"Label",9),u.Mc(9),u.nc(10,"slice"),u.nc(11,"titlecase"),u.ac(),u.ac(),u.bc(12,"td"),u.Mc(13),u.ac(),u.bc(14,"td"),u.bc(15,"input",10),u.ic("keypress",(function(e){u.Dc(n);var c=t.$implicit;return u.mc().validateTyping(e,c)}))("input",(function(e){u.Dc(n);var c=t.$implicit;return u.mc().updateAmoutByItem(e.target.value,c)})),u.ac(),u.ac(),u.bc(16,"td"),u.Mc(17),u.nc(18,"currency"),u.ac(),u.bc(19,"td"),u.Mc(20),u.nc(21,"currency"),u.nc(22,"calculatePriceByAmount"),u.ac(),u.bc(23,"td"),u.Mc(24),u.nc(25,"currency"),u.nc(26,"calculateDiscount"),u.ac(),u.bc(27,"td"),u.Mc(28),u.nc(29,"currency"),u.nc(30,"calculatePriceWithoutDiscount"),u.ac(),u.bc(31,"td"),u.Mc(32),u.nc(33,"currency"),u.nc(34,"calculateTaxes"),u.ac(),u.bc(35,"td"),u.Mc(36),u.nc(37,"currency"),u.nc(38,"calculateTotalPrice"),u.ac(),u.ac()}if(2&e){var c=t.$implicit,i=t.index,a=u.mc();u.Jb(2),u.Nc(i+1),u.Jb(3),u.uc("id",a.getCheckBoxId(c.id))("disabled",a.disableControls),u.Jb(3),u.uc("for",a.getCheckBoxId(c.id)),u.Jb(1),u.Oc(" ",u.qc(10,14,u.oc(11,18,c.name),0,50)," "),u.Jb(4),u.Nc(c.presentationUnit.shortName),u.Jb(2),u.uc("id",a.getTextAmountId(c.id))("value",c.amount),u.Jb(2),u.Oc(" ",u.rc(18,20,c.referencePrice,"USD","symbol","1.0-0")," "),u.Jb(3),u.Oc(" ",u.rc(21,25,u.qc(22,30,c,c.referencePrice,c.amount),"USD","symbol","1.0-0")," "),u.Jb(4),u.Oc(" ",u.rc(25,34,u.rc(26,39,c,c.referencePrice,c.amount,a.contract),"USD","symbol","1.0-0")," "),u.Jb(4),u.Oc(" ",u.rc(29,44,u.rc(30,49,c,c.referencePrice,c.amount,a.contract),"USD","symbol","1.0-0")," "),u.Jb(4),u.Oc(" ",u.rc(33,54,u.rc(34,59,c,c.referencePrice,c.amount,a.contract),"USD","symbol","1.0-0")," "),u.Jb(4),u.Oc(" ",u.rc(37,64,u.rc(38,69,c,c.referencePrice,c.amount,a.contract),"USD","symbol","1.0-0")," ")}}var k,P=((k=function(){function e(t,n){var c=this;i(this,e),this.maintenanceRoutineManagerService=t,this.maintenanceItemManagerService=n,this.itemsWereChanged=new l.a([]),this.maintenanceItems$=this.itemsWereChanged.asObservable(),this.itemsSelectedWereModified=new l.a([]),this.maintenanceItemsSelected$=this.itemsSelectedWereModified.asObservable(),this.totalRoutineLessDiscountWasModified=new l.a(0),this.totalRoutineLessDiscount$=this.totalRoutineLessDiscountWasModified.asObservable(),this.lsMaintenanceItems=[],this.lsMaintenanceItemsSelected=[],this.contract=null,this.isAmountEditable=!1,this.disableControls=!1,this.totalPriceByAmount=0,this.totalDiscount=0,this.totalLessDiscount=0,this.totalTaxes=0,this.totalRoutine=0,this.totalLeesDiscountAndLessRaItem=0,this.totalTaxesLeesRaItem=0,this.onItemsWereSelected=new u.q,this.onRoutineWasCalculated=new u.q,this.AdministrationRAItemCode="RAADMIN",this.maintenanceItemsSelected$.subscribe((function(e){c.lsMaintenanceItemsSelected=e;var t=c.lsMaintenanceItemsSelected.filter((function(e){return e.code!=c.AdministrationRAItemCode}));c.totalLeesDiscountAndLessRaItem=0,c.calculateTotals(t);try{var n=c.lsMaintenanceItemsSelected.find((function(e){return e.code==c.AdministrationRAItemCode}));if(n){c.updateAmountByIntoReferenceList(n);var i=c.maintenanceItemManagerService.calculateTaxesByItem(n,n.referencePrice);c.totalPriceByAmount+=n.referencePrice,c.totalLessDiscount=c.totalLeesDiscountAndLessRaItem+n.referencePrice,c.totalTaxes=c.totalTaxesLeesRaItem+i,c.calculateRoutinePrice()}}catch(r){console.log(r)}c.updateDataPerItemSelected(),c.onItemsWereSelected.emit(c.lsMaintenanceItemsSelected);var a={};a.valueWithDiscountWithoutTaxes=c.totalLessDiscount,a.valueWithoutDiscount=c.totalPriceByAmount,a.discountValue=c.totalDiscount,a.taxesValue=c.totalTaxes,a.value=c.totalRoutine,c.onRoutineWasCalculated.emit(a)}));var a=0;this.totalRoutineLessDiscount$.subscribe((function(e){a!=e&&(a=e,c.calculatePriceOfRAAdmin())}))}return r(e,[{key:"ngOnInit",value:function(){}},{key:"getCheckBoxId",value:function(e){return"chk_"+e}},{key:"getTextAmountId",value:function(e){return"txt_"+e}},{key:"pickItem",value:function(e,t){var n=document.querySelector("#txt_"+t.id);this.lsMaintenanceItemsSelected.find((function(e){return e.id==t.id})),e?(n.disabled=!1,this.addOrUpdateMaintenanceItemIntoList(t)):(n.disabled=!0,this.deleteMaintenanceItemToList(t)),n.value="0";var c=parseFloat("0");this.updateAmoutByItem(c,t)}},{key:"validateTyping",value:function(e,t){var n=e.target.value;n<0&&(e.target.value=0,this.updateAmoutByItem(0,t),d.a.fire({icon:"error",title:"Oops...",text:"No se permiten cantidades negativas"})),this.updateAmoutByItem(n,t)}},{key:"updateAmoutByItem",value:function(e,t){var n=this.lsMaintenanceItems.findIndex((function(e){return t.id==e.id}));t.amount=e,this.lsMaintenanceItems[n]=t,this.addOrUpdateMaintenanceItemIntoList(t)}},{key:"addOrUpdateMaintenanceItemIntoList",value:function(e){var t=this.lsMaintenanceItemsSelected.findIndex((function(t){return t.id==e.id}));t>=0?this.lsMaintenanceItemsSelected[t]=e:this.lsMaintenanceItemsSelected.push(e),this.itemsSelectedWereModified.next(this.lsMaintenanceItemsSelected)}},{key:"updateAmountByIntoReferenceList",value:function(e){var t=this.lsMaintenanceItems.findIndex((function(t){return t.id==e.id}));t>=0?this.lsMaintenanceItems[t]=e:this.lsMaintenanceItems.push(e),this.itemsWereChanged.next(this.lsMaintenanceItems)}},{key:"deleteMaintenanceItemToList",value:function(e){var t=this.lsMaintenanceItemsSelected.findIndex((function(t){return t.id==e.id}));this.lsMaintenanceItemsSelected.splice(t,1),this.itemsSelectedWereModified.next(this.lsMaintenanceItemsSelected)}},{key:"calculateTotalPriceByAmount",value:function(e){this.totalPriceByAmount=this.maintenanceRoutineManagerService.calculateTotalPriceByAmount(e)}},{key:"calculateTotalDiscount",value:function(e){this.totalDiscount=this.maintenanceRoutineManagerService.calculateTotalDiscount(e,this.contract)}},{key:"calculatePriceLessDiscount",value:function(){this.totalLeesDiscountAndLessRaItem=0,this.totalLeesDiscountAndLessRaItem=this.totalPriceByAmount-this.totalDiscount,this.totalRoutineLessDiscountWasModified.next(this.totalLeesDiscountAndLessRaItem)}},{key:"calculateTotalTaxes",value:function(e){this.totalTaxes=0,this.totalTaxesLeesRaItem=0,this.totalTaxesLeesRaItem=this.maintenanceRoutineManagerService.calculateTotalTaxes(e,this.contract)}},{key:"calculateRoutinePrice",value:function(){this.totalRoutine=this.totalLessDiscount+this.totalTaxes}},{key:"checkItemsSelected",value:function(e){var t=this;e&&(e.forEach((function(e){t.updateAmountByIntoReferenceList(e)})),setTimeout((function(){e.forEach((function(e){try{if(e.code.toUpperCase()==t.AdministrationRAItemCode.toUpperCase())t.disableItemAdminRA(e.id);else{var n="#"+t.getCheckBoxId(e.id);document.querySelector(n).checked=!0;var c="#"+t.getTextAmountId(e.id);document.querySelector(c).disabled=!1}}catch(i){console.log(e.name+" -> no existe checkbox ... continua")}}))}),1e3))}},{key:"calculateTotals",value:function(e){this.calculateTotalPriceByAmount(e),this.calculateTotalDiscount(e),this.calculatePriceLessDiscount(),this.calculateTotalTaxes(e),this.calculateRoutinePrice()}},{key:"disableItemAdminRA",value:function(e){var t="#"+this.getCheckBoxId(e),n=document.querySelector(t),c="#"+this.getTextAmountId(e),i=document.querySelector(c);i.value="1",n.checked=!0,i.disabled=!0,n.disabled=!0}},{key:"calculatePriceOfRAAdmin",value:function(){var e=this;try{var t=this.lsMaintenanceItems.find((function(t){return t.code==e.AdministrationRAItemCode})),n=Math.round(this.totalLeesDiscountAndLessRaItem*(this.contract.client.contractualInformation.adminPercentage/100));t.referencePrice=n,t.amount=1}catch(c){console.log(c)}}},{key:"updateDataPerItemSelected",value:function(){var e=this;this.lsMaintenanceItemsSelected.forEach((function(t){var n,c=e.maintenanceItemManagerService.calculateDiscountByItem(t.referencePrice,t.amount,e.contract,t),i=t.referencePrice*t.amount-c;n=e.maintenanceItemManagerService.calculateTaxesByItem(t,i),t.valueWithoutDiscount=t.referencePrice*t.amount,t.discountValue=c,t.valueWithDiscountWithoutTaxes=i,t.taxesValue=n}))}},{key:"setLsMaintenanceItems",set:function(e){this.lsMaintenanceItems=e,this.itemsWereChanged.next(this.lsMaintenanceItems),this.checkItemsSelected(this.lsMaintenanceItemsSelected)}},{key:"setLsMaintenanceItemsSelected",set:function(e){this.lsMaintenanceItemsSelected=e,this.checkItemsSelected(this.lsMaintenanceItemsSelected),this.itemsSelectedWereModified.next(this.lsMaintenanceItemsSelected)}},{key:"setContract",set:function(e){this.contract=e}},{key:"setIsAmountEditable",set:function(e){this.isAmountEditable=e}}]),e}()).\u0275fac=function(e){return new(e||k)(u.Vb(m),u.Vb(f.a))},k.\u0275cmp=u.Pb({type:k,selectors:[["app-tbl-check-items-for-routine"]],inputs:{setLsMaintenanceItems:["maintenanceItems","setLsMaintenanceItems"],setLsMaintenanceItemsSelected:["maintenanceItemsSelected","setLsMaintenanceItemsSelected"],setContract:["contract","setContract"],setIsAmountEditable:["isAmountEditable","setIsAmountEditable"]},outputs:{onItemsWereSelected:"onItemsWereSelected",onRoutineWasCalculated:"onRoutineWasCalculated"},decls:57,vars:33,consts:[[1,"container-table"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[1,"bold"],["id","lbl-total-routine",1,"bold"],["id","lbl-total-routine",1,"bold","less-value"],[1,"container__checkbox"],["type","checkbox",3,"id","disabled","click"],[1,"checkmark"],[3,"for"],["type","number","step","0.01","disabled","",1,"form-control","txt-amount",3,"id","value","keypress","input"]],template:function(e,t){1&e&&(u.bc(0,"div",0),u.bc(1,"table",1),u.bc(2,"thead"),u.bc(3,"th"),u.Mc(4,"#"),u.ac(),u.Wb(5,"th"),u.bc(6,"th"),u.Mc(7,"Nombre"),u.ac(),u.bc(8,"th"),u.Mc(9,"Presentaci\xf3n"),u.ac(),u.bc(10,"th"),u.Mc(11,"Cantidad"),u.ac(),u.bc(12,"th"),u.Mc(13,"Valor unitario sin impuesto"),u.ac(),u.bc(14,"th"),u.Mc(15,"Valor total sin impuesto"),u.ac(),u.bc(16,"th"),u.Mc(17,"DTO"),u.ac(),u.bc(18,"th"),u.Mc(19,"Valor con DTO"),u.ac(),u.bc(20,"th"),u.Mc(21,"Valor impuestos"),u.ac(),u.bc(22,"th"),u.Mc(23,"Valor total con impuestos"),u.ac(),u.ac(),u.bc(24,"tbody"),u.Lc(25,M,39,74,"tr",2),u.nc(26,"async"),u.ac(),u.bc(27,"tfoot"),u.bc(28,"tr"),u.Wb(29,"td"),u.Wb(30,"td"),u.Wb(31,"td"),u.Wb(32,"td"),u.Wb(33,"td"),u.bc(34,"td"),u.bc(35,"b",3),u.Mc(36,"Total mantenimiento:"),u.ac(),u.ac(),u.bc(37,"td"),u.bc(38,"span",4),u.Mc(39),u.nc(40,"currency"),u.ac(),u.ac(),u.bc(41,"td"),u.bc(42,"span",5),u.Mc(43),u.nc(44,"currency"),u.ac(),u.ac(),u.bc(45,"td"),u.bc(46,"span",4),u.Mc(47),u.nc(48,"currency"),u.ac(),u.ac(),u.bc(49,"td"),u.bc(50,"span",4),u.Mc(51),u.nc(52,"currency"),u.ac(),u.ac(),u.bc(53,"td"),u.bc(54,"span",4),u.Mc(55),u.nc(56,"currency"),u.ac(),u.ac(),u.ac(),u.ac(),u.ac(),u.ac()),2&e&&(u.Jb(25),u.uc("ngForOf",u.oc(26,6,t.maintenanceItems$)),u.Jb(14),u.Nc(u.rc(40,8,t.totalPriceByAmount,"USD","symbol","1.0-0")),u.Jb(4),u.Oc(" ",u.rc(44,13,t.totalDiscount,"USD","symbol","1.0-0"),""),u.Jb(4),u.Oc(" ",u.rc(48,18,t.totalLessDiscount,"USD","symbol","1.0-0"),""),u.Jb(4),u.Oc(" ",u.rc(52,23,t.totalTaxes,"USD","symbol","1.0-0"),""),u.Jb(4),u.Nc(u.rc(56,28,t.totalRoutine,"USD","symbol","1.0-0")))},directives:[p.n],pipes:[p.b,p.d,p.w,p.x,y,v,b,I.a,g.a],styles:['.container-table[_ngcontent-%COMP%]{margin-top:30px}.container__checkbox[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{cursor:pointer}.bold[_ngcontent-%COMP%]{font-weight:700}.less-value[_ngcontent-%COMP%]{color:red}.less-value[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:before{content:" - "}','.container__checkbox[_ngcontent-%COMP%]{display:block;position:relative;padding-left:3px;padding-right:3px;margin-bottom:12px;cursor:pointer;font-size:22px;-webkit-user-select:none;user-select:none}.container__checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;opacity:0;cursor:pointer;height:0;width:0}.checkmark[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:20px;width:20px;background-color:#eee;border:1px solid #686d76;border-radius:5px}.container__checkbox[_ngcontent-%COMP%]:hover   input[_ngcontent-%COMP%] ~ .checkmark[_ngcontent-%COMP%]{background-color:#ccc}.container__checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]{background-color:#81b214;border-radius:50%;border:none}.checkmark[_ngcontent-%COMP%]:after{content:"";position:absolute;display:none}.container__checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]:after{display:block}.container__checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled ~ .checkmark[_ngcontent-%COMP%]{border:1px solid #686d76;border-radius:5px}.container__checkbox[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]:after{left:8px;top:5px;width:5px;height:10px;border:solid #fff;border-width:0 2px 2px 0;transform:rotate(45deg)}']}),k)},"xch/":function(t,n,c){"use strict";c.d(n,"a",(function(){return u}));var a=c("tk/3"),o=c("AytR"),s=c("fXoL"),u=function(){var t=function(){function t(e){i(this,t),this.http=e,this.URL_API=o.a.apiUrl+"/MaintenanceItem",this.HttpOptions={headers:new a.c({"Content-Type":"application/json"})}}return r(t,[{key:"getCategorySelected",value:function(){return this.category}},{key:"setCategorySelected",value:function(e){this.category=e}},{key:"getPresentationUnit",value:function(){return this.presentationUnit}},{key:"setPresentationUnit",value:function(e){this.presentationUnit=e}},{key:"getTypeOfItem",value:function(){return this.typeOfItem}},{key:"getItem",value:function(){return this.item}},{key:"setItem",value:function(e){this.item=e}},{key:"settypeOfItem",value:function(e){this.typeOfItem=e}},{key:"getItemToUpdate",value:function(){return this.itemToUpdate}},{key:"setItemToUpdate",value:function(e){this.itemToUpdate=e}},{key:"getMaintenanceItems",value:function(e){return this.http.get("".concat(this.URL_API,"/Get?dealer_id=").concat(e))}},{key:"getMaintenanceItemById",value:function(e){return this.http.get("".concat(this.URL_API,"/GetById?itemId=").concat(e))}},{key:"getItemsByVehicleModel",value:function(e){return this.http.get("".concat(this.URL_API,"/GetItemsByVehicleModel?vehicleModel_id=").concat(e))}},{key:"getPresentationUnits",value:function(){return this.http.get(this.URL_API+"/GetPresentationUnits")}},{key:"getCategories",value:function(){return this.http.get(this.URL_API+"/GetCategories")}},{key:"getTypeOfMaintenanceItem",value:function(){return this.http.get(this.URL_API+"/getTypeOfMaintenanceItem")}},{key:"getPricesByDealer",value:function(e){return this.http.get("".concat(this.URL_API,"/GetPricesByDealer?dealer_id=").concat(e))}},{key:"setPricesByDealer",value:function(e){return this.http.post(this.URL_API+"/SetPricesByDealer",e,this.HttpOptions)}},{key:"getPricesByContract",value:function(e){return this.http.get("".concat(this.URL_API,"/GetPricesByContract?contract_id=").concat(e))}},{key:"setPricesByContract",value:function(e){return this.http.post(this.URL_API+"/SetPricesByContract",e,this.HttpOptions)}},{key:"getTaxesList",value:function(){return this.http.get(this.URL_API+"/GetTaxesList")}},{key:"insert",value:function(e){return this.http.post(this.URL_API+"/Insert",e,this.HttpOptions)}},{key:"update",value:function(e){return this.http.put(this.URL_API+"/Update",e,this.HttpOptions)}},{key:"delete",value:function(e){return this.http.delete("".concat(this.URL_API,"/Delete?maintenanceItemId=").concat(e.id),this.HttpOptions)}},{key:"calculateTaxes",value:function(t,n){var c=0;if(n.length>0){var i,a=e(n);try{for(a.s();!(i=a.n()).done;){var r=i.value;c+=Math.round(t*(r.percentValue/100))}}catch(o){a.e(o)}finally{a.f()}}return c}},{key:"calculateTotalByItem",value:function(e,t,n){return Math.round(e-t+n)}},{key:"getItemRAAdministration",value:function(){return this.http.get(this.URL_API+"/GetByTypeId?typeId=3")}},{key:"updateMaintence",value:function(e){return this.http.post(this.URL_API+"/Update",e)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s.fc(a.a))},t.\u0275prov=s.Rb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()}}])}();