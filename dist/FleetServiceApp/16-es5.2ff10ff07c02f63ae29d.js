!function(){function t(t,n){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,n){if(!t)return;if("string"==typeof t)return e(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return e(t,n)}(t))||n&&t&&"number"==typeof t.length){i&&(t=i);var c=0,a=function(){};return{s:a,n:function(){return c>=t.length?{done:!0}:{done:!1,value:t[c++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,s=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return r=t.done,t},e:function(t){s=!0,o=t},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw o}}}}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function n(t,e,n,i,c,a,o){try{var r=t[a](o),s=r.value}catch(l){return void n(l)}r.done?e(s):Promise.resolve(s).then(i,c)}function i(t){return function(){var e=this,i=arguments;return new Promise((function(c,a){var o=t.apply(e,i);function r(t){n(o,c,a,r,s,"next",t)}function s(t){n(o,c,a,r,s,"throw",t)}r(void 0)}))}}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"0x5P":function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var a=n("tk/3"),r=n("LRne"),s=n("JIr8"),l=n("AytR"),u=n("fXoL"),d=function(){var t=function(){function t(e){c(this,t),this.http=e,this.URL_API=l.a.apiUrl+"/Vehicle",this.HttpOptions={headers:new a.c({"Content-Type":"application/json"})}}var e,n;return o(t,[{key:"getBrands",value:function(){return this.http.get(this.URL_API+"/GetBrands")}},{key:"getVehicleTypes",value:function(){return this.http.get(this.URL_API+"/GetVehicleType")}},{key:"getVehicleStates",value:function(){return this.http.get(this.URL_API+"/GetVehicleStates")}},{key:"getVehicleModelByBrandAndType",value:function(t,e){return this.http.get("".concat(this.URL_API,"/GetVehicleModelByBrandAndType?pId_brand=").concat(t,"&pId_VehicleType=").concat(e))}},{key:"getVehicleModelByTypes",value:(n=i(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="",t.abrupt("return",(e.forEach((function(t){return n+=t.id+","})),n=n.substr(0,n.length-1),this.http.get("".concat(this.URL_API,"/GetVehicleModelsByTypes?sLsTypes=").concat(n)).toPromise()));case 2:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"getVehiclesByClient",value:(e=i(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.http.get("".concat(this.URL_API,"/GetVehiclesByClient?pClient_id=").concat(e)).toPromise());case 1:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"getVehiclesByClientAndModel",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.http.get("".concat(this.URL_API,"/GetVehiclesByClientAndModel?pClient_id=").concat(t,"&sModels=").concat(e,"&contract_id=").concat(n))}},{key:"Insert",value:function(t){return this.http.post(this.URL_API+"/Insert",t,this.HttpOptions)}},{key:"Update",value:function(t){return this.http.put(this.URL_API+"/Update",t,this.HttpOptions)}},{key:"Delete",value:function(t){return this.http.delete("".concat(this.URL_API,"/Delete?vehicleId=").concat(t.id),this.HttpOptions)}},{key:"getVehiclesByLicensePlate",value:function(t){return t.trim()?this.http.get("".concat(this.URL_API,"/GetVehiclesByLicensePlate?pLicensePlate=").concat(t)).pipe(Object(s.a)(this.handleError("getVehiclesByLicensePlate",[]))):Object(r.a)([])}},{key:"setListVehicleTypeSelected",value:function(t){this.lsVehicleTypeSelected=t}},{key:"getListVehicleTypeSelected",value:function(){return this.lsVehicleTypeSelected}},{key:"setVehicleModelSelected",value:function(t){this.vehicleModelSelected=t}},{key:"getVehicleModelSelected",value:function(){return this.vehicleModelSelected}},{key:"setVehicleStateSelected",value:function(t){this.vehicleState=t}},{key:"getVehicleStateSelected",value:function(){return this.vehicleState}},{key:"setVehicle",value:function(t){this.vehicle=t}},{key:"getVehicle",value:function(){return this.vehicle}},{key:"setVehicleToUpdate",value:function(t){this.vehicleToUpdate=t}},{key:"getVehicleToUpdate",value:function(){return this.vehicleToUpdate}},{key:"setBrandSelected",value:function(t){this.brandSelected=t}},{key:"getBrandSelected",value:function(){return this.brandSelected}},{key:"setVehicleTypeSelected",value:function(t){this.vehicleTypeSelected=t}},{key:"getVehicleTypeSelected",value:function(){return this.vehicleTypeSelected}},{key:"getListVehicleModelsSelected",value:function(){return this.lsVehicleModelsSelected}},{key:"setListVehicleModelsSelected",value:function(t){this.lsVehicleModelsSelected=t}},{key:"getListVehiclesSelected",value:function(){return this.lsVehiclesSelected}},{key:"setListVehiclesSelected",value:function(t){this.lsVehiclesSelected=t}},{key:"handleError",value:function(){var t=arguments.length>1?arguments[1]:void 0;return function(e){return console.error(e),Object(r.a)(t)}}}]),t}();return t.\u0275fac=function(e){return new(e||t)(u.fc(a.a))},t.\u0275prov=u.Rb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},"1W2K":function(t,e,n){"use strict";function i(t,e){window.sessionStorage.setItem(t,e)}function c(t){return window.sessionStorage.getItem(t)}n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return c}))},"7I7t":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("930R"),a=function t(){c(this,t)},r=function(){function t(){c(this,t)}return o(t,null,[{key:"validateUserAndCompany",value:function(){try{var t=new a,e=JSON.parse(sessionStorage.getItem("sessionUser"));return console.log(e),t.type=e.company.type,t.id=e.company.type==i.a.DEALER||e.company.type==i.a.CLIENT?e.company.id:0,t.usr_id=e.id_user,t}catch(n){console.warn(n)}}},{key:"validateUserLogged",value:function(){try{return JSON.parse(sessionStorage.getItem("sessionUser")).id_user}catch(t){console.warn(t)}}}]),t}()},"930R":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i=function(t){return t[t.MAIN_COMPANY=1]="MAIN_COMPANY",t[t.CLIENT=2]="CLIENT",t[t.DEALER=3]="DEALER",t}({})},FGSN:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i=function(t){return t[t.CREATE=1]="CREATE",t[t.READ=2]="READ",t[t.UPDATE=3]="UPDATE",t[t.DELETE=4]="DELETE",t}({})},KBxE:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n("fXoL"),a=function(){var t=function(){function t(){c(this,t),this.title="",this.errorMessage="",this.onAlertWasClose=new i.q}return o(t,[{key:"ngOnInit",value:function(){}},{key:"closeAlert",value:function(){this.onAlertWasClose.emit(!0)}},{key:"setTitle",set:function(t){this.title=t}},{key:"setErrorMessage",set:function(t){this.errorMessage=t}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Pb({type:t,selectors:[["app-alert-error"]],inputs:{setTitle:["title","setTitle"],setErrorMessage:["errorMessage","setErrorMessage"]},outputs:{onAlertWasClose:"onAlertWasClose"},decls:15,vars:2,consts:[[1,"item-overlay"],[1,"card"],["id","container__header",1,"card-header"],[1,"buttonClose",3,"click"],[1,"fas","fa-times"],[1,"card-body"],[1,"container-error"],["width","100px","height","100px","src","assets/error.png","alt","error"],[1,"error-description"]],template:function(t,e){1&t&&(i.bc(0,"div",0),i.bc(1,"div",1),i.bc(2,"div",2),i.bc(3,"a",3),i.ic("click",(function(){return e.closeAlert()})),i.Wb(4,"i",4),i.ac(),i.ac(),i.bc(5,"div",5),i.bc(6,"div",6),i.Wb(7,"img",7),i.bc(8,"div",8),i.bc(9,"h2"),i.Mc(10),i.ac(),i.bc(11,"p"),i.bc(12,"b"),i.Mc(13,"Detalle: "),i.ac(),i.Mc(14),i.ac(),i.ac(),i.ac(),i.ac(),i.ac(),i.ac()),2&t&&(i.Jb(10),i.Nc(e.title),i.Jb(4),i.Nc(e.errorMessage))},styles:[".card[_ngcontent-%COMP%]{position:relative;width:650px;margin:10px}.card-body[_ngcontent-%COMP%]{padding:10px}.container-error[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;padding:10px}.error-description[_ngcontent-%COMP%]{position:relative;max-width:450px;left:30px}#container__header[_ngcontent-%COMP%]{display:flex;flex-direction:row;direction:rtl}.item-overlay[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3fr);grid-template-rows:repeat(3fr);position:fixed;left:0;right:0;top:0;bottom:0;background-color:rgba(6,129,230,.1);border-radius:15px;align-items:center;justify-items:center;z-index:5000;width:100%;height:100%}"]}),t}()},PwQI:function(t,e,n){"use strict";n.r(e),n.d(e,"ContractModule",(function(){return wt}));var a=n("ofXK"),r=n("3Pt+"),s=n("wZkO"),l=n("hzby"),u=n("Z/wE"),d=n("tyNb"),h=n("uswQ"),p=n("fXoL"),b=n("FGSN"),f=n("930R"),v=n("cRgG"),g=n("us/p"),m=n("2fpb"),y=n("7I7t"),C=n("p9j/"),k=n("1W2K"),S=n("PSD3"),M=n.n(S),I=n("i5Qh"),T=n("FMJ1"),_=n("2jix"),P=n("Rw4P"),D=n("ZyAM"),x=n("wAkH");function V(t,e){if(1&t&&(p.bc(0,"option",4),p.Mc(1),p.nc(2,"lowercase"),p.ac()),2&t){var n=e.$implicit;p.uc("value",n.id),p.Jb(1),p.Oc(" ",p.oc(2,2,n.name)," ")}}var w,O=((w=function(){function t(e,n){var i=this;c(this,t),this.contractService=e,this.contracStateService=n,this.discountWasSelected=new p.q,this.frmDiscountType=new r.j({cmbDiscount:new r.g("Seleccione ...")}),this.contracStateService.discountType$.subscribe((function(t){i.discountSelected=t,i.discountSelected?i.setDataInForm(i.discountSelected):i.frmDiscountType.reset()})),this.disableField=!1}var e;return o(t,[{key:"ngOnChanges",value:function(t){for(var e in t)"countChanges"==e?(this.discountSelected=this.contractService.getDiscountTypeSelected(),null!=this.discountSelected&&null!=this.discountSelected&&(this.setDataInForm(this.discountSelected),this.discountWasSelected.emit(this.discountSelected))):"disableField"==e&&this.toggleDisableDiscountFiled()}},{key:"ngOnInit",value:function(){this.initComponents()}},{key:"initComponents",value:(e=i(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.countChanges=0,t.next=4,this.contractService.getDiscountTypes();case 4:this.lsDiscount=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])}))),function(){return e.apply(this,arguments)})},{key:"setDiscountType",value:function(t){var e=this.lsDiscount.find((function(e){return e.id==t.value}));this.discountSelected=e,this.contractService.setDiscountTypeSelected(e),this.discountWasSelected.emit(this.discountSelected)}},{key:"setDataInForm",value:function(t){this.frmDiscountType.controls.cmbDiscount.setValue(t.id)}},{key:"lostFocus",value:function(){this.discountWasSelected.emit(this.discountSelected)}},{key:"toggleDisableDiscountFiled",value:function(){var t=this.frmDiscountType.controls.cmbDiscount;this.disableField?t.disable():t.enable()}},{key:"setDiscountSelected",set:function(t){this.discountSelected=t,this.discountSelected?this.setDataInForm(this.discountSelected):this.frmDiscountType.reset()}}]),t}()).\u0275fac=function(t){return new(t||w)(p.Vb(_.a),p.Vb(P.a))},w.\u0275cmp=p.Pb({type:w,selectors:[["app-contract-discount-type"]],inputs:{countChanges:"countChanges",disableField:"disableField",setDiscountSelected:["discountType","setDiscountSelected"]},outputs:{discountWasSelected:"discountWasSelected"},features:[p.Hb],decls:7,vars:3,consts:[[3,"formGroup"],["formControlName","cmbDiscount",1,"browser-default","custom-select",3,"change","focusout"],["disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){1&t&&(p.bc(0,"form",0),p.bc(1,"label"),p.Mc(2,"Tipo de descuento:"),p.ac(),p.bc(3,"select",1),p.ic("change",(function(t){return e.setDiscountType(t.target)}))("focusout",(function(){return e.lostFocus()})),p.bc(4,"option",2),p.Mc(5,"Seleccione ..."),p.ac(),p.Lc(6,V,3,4,"option",3),p.ac(),p.ac()),2&t&&(p.uc("formGroup",e.frmDiscountType),p.Jb(4),p.uc("value",0),p.Jb(2),p.uc("ngForOf",e.lsDiscount))},directives:[r.B,r.r,r.k,r.x,r.q,r.i,r.u,r.A,a.n],pipes:[a.l],styles:["select[_ngcontent-%COMP%]{cursor:pointer}"]}),w),A=n("xRBo"),F=n("2Vo4"),E=n("0x5P"),L=n("MAxM");function R(t,e){1&t&&(p.bc(0,"div",4),p.bc(1,"H6"),p.Mc(2,"* Recuerde que si no aparece ninguna placa del cliente puede ser debido a que estas tienen un estado inactivo \xf3 ya est\xe1n asociadas a un contrato con estado activo *"),p.ac(),p.ac())}function U(t,e){if(1&t){var n=p.cc();p.bc(0,"tr"),p.bc(1,"td"),p.Mc(2),p.ac(),p.bc(3,"td"),p.bc(4,"div",5),p.bc(5,"app-input-checkbox",6),p.ic("onCheckItem",(function(t){p.Dc(n);var i=e.$implicit;return p.mc().setVehicleToContract(t,i.vehicle)})),p.ac(),p.ac(),p.ac(),p.bc(6,"td"),p.Mc(7),p.ac(),p.bc(8,"td"),p.Mc(9),p.ac(),p.bc(10,"td"),p.Mc(11),p.ac(),p.Wb(12,"td"),p.ac()}if(2&t){var i=e.$implicit,c=e.index,a=p.mc();p.Jb(2),p.Nc(c+1),p.Jb(3),p.uc("option",i.vehicle.licensePlate)("isActive",i.status)("disable",a.disableChecks),p.Jb(2),p.Nc(i.vehicle.vehicleModel.shortName),p.Jb(2),p.Nc(i.vehicle.mileage),p.Jb(2),p.Nc(i.vehicle.vehicleState.name)}}var B,J=((B=function(){function t(e,n){var i=this;c(this,t),this.vehicleService=e,this.contractStateService=n,this.lsVehiclesSelected=[],this.lsVehicles=[],this.vehiclesObserver=new F.a([]),this.vehicles$=this.vehiclesObserver.asObservable(),this.clientToFilter=void 0,this._vehicleModels=[],this._amountAllowed=0,this.contractToFilter=void 0,this.disableChecks=!1,this.clientToFilter=null,this.sModels="",this.disableChecks=!1,this.contractStateService.client$.subscribe((function(t){i.clientToFilter=t})),this.vehicles$.subscribe((function(t){i.lsVehicles=t})),this.contractStateService.vehicleModel$.subscribe((function(t){try{i.setModelsString(t),i.getVehicles()}catch(e){console.info(e)}}))}return o(t,[{key:"updateVehiclesSelected",value:function(){var t=this;this.contractStateService.vehicles$.subscribe((function(e){t.lsVehiclesSelected=e,t.lsVehiclesSelected.forEach((function(e){t.updateVehicleStatus(e,!0)}))}))}},{key:"ngOnInit",value:function(){this.initComponents()}},{key:"initComponents",value:function(){this.getVehicles()}},{key:"setModelsString",value:function(t){var e=this;try{this.sModels="",null!=t&&null!=t&&(t.forEach((function(t){return e.sModels+=t.id+","})),this.sModels=this.sModels.substring(0,this.sModels.length-1),""==this.sModels&&(this.sModels="0"))}catch(n){console.warn(n)}}},{key:"getVehicles",value:function(){var t=this;null!=this.clientToFilter&&null!=this.clientToFilter&&""!=this.sModels?this.vehicleService.getVehiclesByClientAndModel(this.clientToFilter.id,this.sModels,null!=this.contractToFilter&&null!=this.contractToFilter?this.contractToFilter.id:0).subscribe({next:function(e){if(e.length>0){var n=e.map((function(t){return{vehicle:t,status:!1}}));t.vehiclesObserver.next(n),t.updateVehiclesSelected()}}}):this.lsVehicles=[]}},{key:"setVehicleToContract",value:function(t,e){t?this.contractStateService.addVehicleToList(e):this.contractStateService.removeVehicleFromList(e)}},{key:"updateVehicleStatus",value:function(t,e){try{var n=this.lsVehicles,i=n.findIndex((function(e){return t.id==e.vehicle.id}));i>=0&&(n[i].status=e),this.vehiclesObserver.next(n)}catch(c){console.info(c)}}},{key:"setClientToFilter",set:function(t){this.clientToFilter=t}},{key:"setVehicleModels",set:function(t){this._vehicleModels=t,console.log("Models to filter"),console.log(this._vehicleModels),this.setModelsString(this._vehicleModels),this.getVehicles()}},{key:"setAmountAllowed",set:function(t){this._amountAllowed=t}},{key:"setContractToFilter",set:function(t){this.contractToFilter=t}},{key:"setDisableChecks",set:function(t){this.disableChecks=t}}]),t}()).\u0275fac=function(t){return new(t||B)(p.Vb(E.a),p.Vb(P.a))},B.\u0275cmp=p.Pb({type:B,selectors:[["app-tbl-check-vehicles"]],inputs:{setClientToFilter:["clientToFilter","setClientToFilter"],setVehicleModels:["vehicleModels","setVehicleModels"],setAmountAllowed:["amountAllowed","setAmountAllowed"],setContractToFilter:["contractToFilter","setContractToFilter"],setDisableChecks:["disableChecks","setDisableChecks"]},decls:18,vars:2,consts:[[1,"container__table"],["class","alert alert-warning","role","alert",4,"ngIf"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],["role","alert",1,"alert","alert-warning"],[1,"container_licensePlate"],[3,"option","isActive","disable","onCheckItem"]],template:function(t,e){1&t&&(p.bc(0,"div",0),p.Lc(1,R,3,0,"div",1),p.bc(2,"table",2),p.bc(3,"thead"),p.bc(4,"th"),p.Mc(5,"#"),p.ac(),p.bc(6,"th"),p.Mc(7,"Placa"),p.ac(),p.bc(8,"th"),p.Mc(9,"Modelo"),p.ac(),p.bc(10,"th"),p.Mc(11,"Kilometraje"),p.ac(),p.bc(12,"th"),p.Mc(13,"Estado"),p.ac(),p.bc(14,"th"),p.Mc(15,"Acciones"),p.ac(),p.ac(),p.bc(16,"tbody"),p.Lc(17,U,13,7,"tr",3),p.ac(),p.ac(),p.ac()),2&t&&(p.Jb(1),p.uc("ngIf",e.lsVehiclesEmty),p.Jb(16),p.uc("ngForOf",e.lsVehicles))},directives:[a.o,a.n,L.a],styles:[".container__table[_ngcontent-%COMP%]{margin-top:20px}.container_licensePlate[_ngcontent-%COMP%]{margin-top:-10px}.container__licensePlate[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{cursor:pointer}h6[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:20px}",'.container__checkbox[_ngcontent-%COMP%]{display:block;position:relative;padding-left:3px;padding-right:3px;margin-bottom:12px;cursor:pointer;font-size:22px;-webkit-user-select:none;user-select:none}.container__checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;opacity:0;cursor:pointer;height:0;width:0}.checkmark[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:20px;width:20px;background-color:#eee;border:1px solid #686d76;border-radius:5px}.container__checkbox[_ngcontent-%COMP%]:hover   input[_ngcontent-%COMP%] ~ .checkmark[_ngcontent-%COMP%]{background-color:#ccc}.container__checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]{background-color:#81b214;border-radius:50%;border:none}.checkmark[_ngcontent-%COMP%]:after{content:"";position:absolute;display:none}.container__checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]:after{display:block}.container__checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled ~ .checkmark[_ngcontent-%COMP%]{border:1px solid #686d76;border-radius:5px}.container__checkbox[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]:after{left:8px;top:5px;width:5px;height:10px;border:solid #fff;border-width:0 2px 2px 0;transform:rotate(45deg)}']}),B),N=function t(){c(this,t)},W=n("R7St"),j=n("xch/"),G=n("vllv"),q=n("oOf3"),$=n("9Wwi");function z(t,e){1&t&&(p.bc(0,"th"),p.Mc(1,"Valor del descuento"),p.ac())}function H(t,e){if(1&t){var n=p.cc();p.bc(0,"td"),p.bc(1,"input",10),p.ic("blur",(function(t){p.Dc(n);var e=p.mc().$implicit;return p.mc().savePersonalized(t,e)})),p.ac(),p.ac()}if(2&t){var i=p.mc().$implicit,c=p.mc();p.Jb(1),p.uc("value",c.getValueDiscount(i))}}function Y(t,e){if(1&t&&(p.bc(0,"tr"),p.Lc(1,H,2,1,"td",4),p.bc(2,"td"),p.Mc(3),p.ac(),p.bc(4,"td"),p.Mc(5),p.ac(),p.bc(6,"td"),p.Mc(7),p.nc(8,"slice"),p.nc(9,"titlecase"),p.ac(),p.bc(10,"td"),p.Mc(11),p.nc(12,"titlecase"),p.ac(),p.bc(13,"td"),p.Mc(14),p.nc(15,"currency"),p.ac(),p.bc(16,"td"),p.Mc(17),p.nc(18,"currency"),p.ac(),p.bc(19,"td"),p.Mc(20),p.nc(21,"currency"),p.ac(),p.bc(22,"td"),p.Mc(23),p.nc(24,"currency"),p.ac(),p.bc(25,"td"),p.Mc(26),p.nc(27,"currency"),p.ac(),p.ac()),2&t){var n=e.index,i=e.$implicit,c=p.mc();p.Jb(1),p.uc("ngIf",c.isCheckboxVisible),p.Jb(2),p.Nc(n+1),p.Jb(2),p.Nc(i.code),p.Jb(2),p.Nc(p.qc(8,10,p.oc(9,14,i.name),0,40)),p.Jb(4),p.Nc(p.oc(12,16,i.presentationUnit.longName)),p.Jb(3),p.Nc(p.oc(15,18,i.referencePrice)),p.Jb(3),p.Nc(p.oc(18,20,i.discountValue)),p.Jb(3),p.Nc(p.oc(21,22,i.referencePrice-i.discountValue)),p.Jb(3),p.Nc(p.oc(24,24,i.taxesValue)),p.Jb(3),p.Oc(" ",p.oc(27,26,i.referencePrice-i.discountValue+i.taxesValue)," ")}}function K(t,e){1&t&&p.Wb(0,"app-img-loading")}var X,Q=function(t){return{itemsPerPage:10,currentPage:t}},Z=((X=function(){function t(e,n,i,a){var o=this;c(this,t),this.maintenanceItemService=e,this.contractService=n,this.contracStateService=i,this.maintenanceItemManagerService=a,this.isCheckboxVisible=!1,this.lsMaintenanceItemsWasSetted=new p.q,this.maintencesItemsPersonalized=[],this.dealer=void 0,this.discountType=void 0,this.discountValue=0,this.p=1,this.lsMaintenanceItems=[],this.pricesByDealer=new N,this.pricesByDealer.lsMaintenanceItems=[],this.discountValue=0,this.discountType=new m.a,this.sharedFunction=new W.a,this.lsMaintenanceItemsWithPrice=[],this.contracStateService.dealer$.subscribe((function(t){o.dealer=t,t&&o.getInfoToShowTable()})),this.contracStateService.discountType$.subscribe((function(t){o.discountType=t,o.isCheckboxVisible=(null==t?void 0:t.id)===m.b.PORCENTAJE_POR_REPUESTOS||(null==t?void 0:t.id)===m.b.VALOR_FIJO_POR_REPUESTOS,o.getTypeDiscount(),o.calculateDiscountAndTaxes()})),this.contracStateService.discountValue$.subscribe((function(t){o.discountValue=t,o.calculateDiscountAndTaxes()}))}return o(t,[{key:"ngOnInit",value:function(){this.initComponents()}},{key:"initComponents",value:function(){this.getPricesOfContract=0,this.changeDealer=0,this.isAwaiting=!1,this.dealerSelected=this.dealer,this.dealerSelected&&this.getInfoToShowTable()}},{key:"getInfoToShowTable",value:function(){this.getListMaintenanceItems(),this.getPricesByDealer(),this.getPricesByContract()}},{key:"getListMaintenanceItems",value:function(){var t=this;try{this.isAwaiting=!0,this.maintenanceItemService.getMaintenanceItems(null!=this.dealerSelected?this.dealerSelected.id:0).subscribe((function(e){t.lsMaintenanceItems=e})),this.isAwaiting=!1}catch(e){console.warn(e)}}},{key:"getPricesByDealer",value:function(){var t,e,n=this;try{this.dealerSelected=this.dealer,this.isAwaiting=!0;var i=null!==(e=null===(t=this.dealerSelected)||void 0===t?void 0:t.id)&&void 0!==e?e:0;this.maintenanceItemService.getPricesByDealer(i).subscribe((function(t){n.pricesByDealer=t,n.lsMaintenanceItems=n.maintenanceItemManagerService.updatePrices(n.lsMaintenanceItems,n.pricesByDealer.lsMaintenanceItems),n.calculateDiscountAndTaxes(),n.isAwaiting=!1}))}catch(c){console.warn(c)}}},{key:"getPricesByContract",value:function(){var t,e,n=this;try{this.contractSelected=this.contractService.getContract();var i=null!==(e=null===(t=this.contractSelected)||void 0===t?void 0:t.id)&&void 0!==e?e:0;0!=i&&(this.isAwaiting=!0,this.maintenanceItemService.getPricesByContract(i).subscribe((function(t){n.pricesByContract=t,n.maintenanceItemManagerService.updatePrices(n.lsMaintenanceItems,n.pricesByContract.lsMaintenanceItems),n.calculateDiscountAndTaxes(),n.isAwaiting=!1})))}catch(c){console.warn(c)}}},{key:"calculateDiscount",value:function(t){t.amount=1;var e=0;this.discountType&&(e=this.discountType.id==m.b.PORCENTAJE_POR__TOTAL_MANTENIMIENTO||this.discountType.id==m.b.PORCENTAJE_POR_REPUESTOS?this.calculateDiscountPerPercentage(t.referencePrice,this.isCheckboxVisible?this.getValueDiscount(t):this.discountValue):this.isCheckboxVisible?this.getValueDiscount(t):this.discountValue);var n=this.maintenanceItemManagerService.calculateTaxesByItem(t,t.referencePrice-e);return{id:t.id,code:t.code,name:t.name,presentationUnit:{longName:t.presentationUnit.longName},handleTax:t.handleTax,lsTaxes:t.lsTaxes,referencePrice:t.referencePrice,discountValue:e,taxesValue:n,valueDiscount:t.valueDiscount}}},{key:"getValueDiscount",value:function(t){var e;return null!==(e=t.valueDiscount)&&void 0!==e?e:0}},{key:"getTypeDiscount",value:function(){var t,e;return(null===(t=this.discountType)||void 0===t?void 0:t.id)===m.b.PORCENTAJE_POR_REPUESTOS||(null===(e=this.discountType)||void 0===e?void 0:e.id)===m.b.PORCENTAJE_POR__TOTAL_MANTENIMIENTO?"Descuento por porcentaje":"Descuento por valor fijo"}},{key:"calculateDiscountPerPercentage",value:function(t,e){return Math.round(t*(e/100))}},{key:"calculateDiscountAndTaxes",value:function(){var t=this;this.lsMaintenanceItems=this.lsMaintenanceItems.map((function(e){return t.calculateDiscount(e)})),this.contracStateService.setMaintenanceItems(this.lsMaintenanceItems)}},{key:"savePersonalized",value:function(t,e){var n=+t.target.value,i=this.lsMaintenanceItems.findIndex((function(t){return t.id===e.id}));e.valueDiscount=n,this.lsMaintenanceItems[i]=this.calculateDiscount(e)}}]),t}()).\u0275fac=function(t){return new(t||X)(p.Vb(j.a),p.Vb(_.a),p.Vb(P.a),p.Vb(G.a))},X.\u0275cmp=p.Pb({type:X,selectors:[["app-tbl-prices-by-contract"]],inputs:{getPricesOfContract:"getPricesOfContract",changeDealer:"changeDealer"},outputs:{lsMaintenanceItemsWasSetted:"lsMaintenanceItemsWasSetted"},decls:34,vars:12,consts:[["id","container__table_items",1,"container__table"],[1,"text-right","mb-3"],[1,"alert","alert-primary"],[1,"table","table-striped"],[4,"ngIf"],[1,"col-number","col-mobile-hide"],[1,"col-mobile-hide"],[4,"ngFor","ngForOf"],[1,"paginationContainer"],[3,"pageChange"],["type","text",1,"form-control",3,"value","blur"]],template:function(t,e){1&t&&(p.bc(0,"div",0),p.bc(1,"h2"),p.Mc(2),p.nc(3,"titlecase"),p.ac(),p.bc(4,"div",1),p.bc(5,"span",2),p.Mc(6),p.ac(),p.ac(),p.bc(7,"table",3),p.bc(8,"thead"),p.Lc(9,z,2,0,"th",4),p.bc(10,"th",5),p.Mc(11,"#"),p.ac(),p.bc(12,"th"),p.Mc(13,"C\xf3digo"),p.ac(),p.bc(14,"th"),p.Mc(15,"Nombre"),p.ac(),p.bc(16,"th",6),p.Mc(17,"Presentaci\xf3n"),p.ac(),p.bc(18,"th",6),p.Mc(19,"Valor sin impuestos del concesionario"),p.ac(),p.bc(20,"th"),p.Mc(21,"Descuento"),p.ac(),p.bc(22,"th"),p.Mc(23,"Valor sin descuento"),p.ac(),p.bc(24,"th"),p.Mc(25,"Valor impuestos"),p.ac(),p.bc(26,"th"),p.Mc(27,"Valor final"),p.ac(),p.ac(),p.bc(28,"tbody"),p.Lc(29,Y,28,28,"tr",7),p.nc(30,"paginate"),p.ac(),p.ac(),p.bc(31,"div",8),p.bc(32,"pagination-controls",9),p.ic("pageChange",(function(t){return e.p=t})),p.ac(),p.ac(),p.ac(),p.Lc(33,K,1,0,"app-img-loading",4)),2&t&&(p.Jb(2),p.Oc(" Precios por art\xedculo de mantenimiento del concesionario: ",null!=e.dealerSelected?e.dealerSelected.name:p.oc(3,5,"")," "),p.Jb(4),p.Oc("Tipo de descuento: ",e.getTypeDiscount(),""),p.Jb(3),p.uc("ngIf",e.isCheckboxVisible),p.Jb(20),p.uc("ngForOf",p.pc(30,7,e.lsMaintenanceItems,p.xc(10,Q,e.p))),p.Jb(4),p.uc("ngIf",e.isAwaiting))},directives:[a.o,a.n,q.c,$.a],pipes:[a.x,q.b,a.w,a.d],styles:["input[_ngcontent-%COMP%]::-webkit-inner-spin-button, input[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}h2[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:40px}"]}),X),tt=n("KBxE");function et(t,e){1&t&&(p.bc(0,"div",28),p.bc(1,"p"),p.Mc(2,"* El cliente es necesario para guardar el contrato"),p.ac(),p.ac())}function nt(t,e){1&t&&(p.bc(0,"div",28),p.bc(1,"p"),p.Mc(2,"* El concesionario es necesario para guardar el contrato"),p.ac(),p.ac())}function it(t,e){1&t&&(p.bc(0,"p"),p.Mc(1," * La cantidad de veh\xedculos es requerida "),p.ac())}function ct(t,e){if(1&t&&(p.bc(0,"div",28),p.Lc(1,it,2,0,"p",26),p.ac()),2&t){var n=p.mc();p.Jb(1),p.uc("ngIf",n.amountVehiclesField.hasError("required"))}}function at(t,e){1&t&&(p.bc(0,"p"),p.Mc(1," * La duraci\xf3n del contrato es requerida "),p.ac())}function ot(t,e){if(1&t&&(p.bc(0,"div",28),p.Lc(1,at,2,0,"p",26),p.ac()),2&t){var n=p.mc();p.Jb(1),p.uc("ngIf",n.durationField.hasError("required"))}}function rt(t,e){1&t&&(p.bc(0,"p"),p.Mc(1," * La fecha inicial del contrato es requerida "),p.ac())}function st(t,e){if(1&t&&(p.bc(0,"div",28),p.Lc(1,rt,2,0,"p",26),p.ac()),2&t){var n=p.mc();p.Jb(1),p.uc("ngIf",n.startingDateField.hasError("required"))}}function lt(t,e){1&t&&(p.bc(0,"div",28),p.bc(1,"p"),p.Mc(2," * El tipo de descuento es requerido para guardar el contrato "),p.ac(),p.ac())}function ut(t,e){1&t&&(p.bc(0,"p"),p.Mc(1," * El valor del descuento que debe aplicarse al contrato es requerido "),p.ac())}function dt(t,e){1&t&&(p.bc(0,"p"),p.Mc(1," * Si el tipo de descuento es por porcentaje, el valor de este campo no puede sobrepasar el valor de 100 "),p.ac())}function ht(t,e){if(1&t&&(p.bc(0,"div",28),p.Lc(1,ut,2,0,"p",26),p.Lc(2,dt,2,0,"p",26),p.ac()),2&t){var n=p.mc();p.Jb(1),p.uc("ngIf",n.discountValueField.hasError("required")),p.Jb(1),p.uc("ngIf",n.discountValueField.hasError("maxValueAllowed"))}}function pt(t,e){1&t&&p.Wb(0,"app-img-loading")}function bt(t,e){if(1&t){var n=p.cc();p.bc(0,"app-alert-error",29),p.ic("onAlertWasClose",(function(){return p.Dc(n),p.mc().closeError()})),p.ac()}if(2&t){var i=p.mc();p.uc("title",i.errorTitle)("errorMessage",i.errorDescription)}}var ft,vt=function(){return{dateInputFormat:"YYYY/MM/DD",containerClass:"theme-dark-blue"}},gt=((ft=function(){function t(e,n,i,a,o,r,s){var l=this;c(this,t),this.clientService=e,this.dealerService=n,this.contractService=i,this.router=a,this.formBuilder=o,this.activatedRoute=r,this.contracStateService=s,this.contractWasSetted=new p.q,this.lsVehicleModelsTemp=[],this.modelsToFilter=[],this.clientToFilter=void 0,this.client=void 0,this.dealer=void 0,this.discountType=void 0,this.discountValue=0,this.vehicles=[],this.maintenanceItems=[],this.isErrorVisible=!1,this.errorTitle="",this.errorDescription="";var u=new Date;new Date(u.getFullYear(),u.getMonth()+1,u.getDay()),this.dtStartingDate=u,this.dtEndingDate=u,this.buildContractForm(),this.clientFieldIsInvalid=!1,this.dealerFieldIsInvalid=!1,this.contracStateFieldIsInvalid=!1,this.discountFieldIsInvalid=!1,this.lsMaintenanceItemsTemp=[],this.disableClientField=!1,this.disableTypeOfDiscoutnField=!1,this.disableVehicles=!1,this.buttonSaveIsDisable=!1,this.disableCmbState=!1,this.contracStateService.client$.subscribe((function(t){l.client=t,l.clientFieldIsInvalid=!l.client})),this.contracStateService.dealer$.subscribe((function(t){l.dealer=t,l.dealerFieldIsInvalid=!l.dealer})),this.contracStateService.contractState$.subscribe((function(t){l.contractState=t})),this.contracStateService.discountType$.subscribe((function(t){l.discountType=t,l.validateDiscountValues()})),this.contracStateService.discountValue$.subscribe((function(t){l.discountValue=t})),this.contracStateService.vehicleModel$.subscribe((function(t){l.modelsToFilter=t})),this.contracStateService.vehicles$.subscribe((function(t){l.vehicles=t})),this.contracStateService.maintenanceItems$.subscribe((function(t){l.maintenanceItems=t})),this.frmContract.controls.discountValue.valueChanges.subscribe((function(t){l.contracStateService.setDiscountValue(t),l.validateDiscountValues()}))}var e,n;return o(t,[{key:"buildContractForm",value:function(){this.frmContract=this.formBuilder.group({name:[""],duration:["",[r.z.required]],startingDate:["",[r.z.required]],endingDate:["",[r.z.required]],discountValue:["",[r.z.required]],observation:[""],amountVehicles:["",[r.z.required]]})}},{key:"ngOnChanges",value:function(t){this.validateCompanyLogged()}},{key:"ngOnInit",value:function(){this.extractParamsFromURL(),this.getInitContractState(),this.initComponents()}},{key:"extractParamsFromURL",value:function(){var t=this;try{this.activatedRoute.params.subscribe((function(e){console.log("parametros"),console.log(e),Object.keys(e).length>0?t.getContractByID(e.id):console.log("No debe buscar nada y debe resetear valores")}))}catch(e){console.log(e)}}},{key:"getContractByID",value:function(t){var e=this;this.isAwaiting=!0,this.contractService.getContractByID(t).subscribe({next:function(t){e.contractService.setContract(t),e.contractToUpdate=t,console.log("getContractByID"),console.log(e.contractToUpdate),e.contractToUpdate&&(e.contracStateService.setClientToContract(e.contractToUpdate.client),e.contracStateService.setDealerToContract(e.contractToUpdate.dealer),e.contracStateService.setDiscountType(e.contractToUpdate.discountType),e.contracStateService.setDiscountValue(e.contractToUpdate.discountValue),e.contractToUpdate.lsVehicleModels.forEach((function(t){e.contracStateService.addVehicleModelToList(t)})),e.contractToUpdate.lsVehicles.forEach((function(t){return e.contracStateService.addVehicleToList(t)})),e.validateContractToUpdate()),e.isAwaiting=!1},error:function(t){e.isAwaiting=!1,e.isErrorVisible=!0,e.errorTitle="Ocurri\xf3 un error intentando consultar el contrato",e.errorDescription=""+t.error.Message}})}},{key:"initComponents",value:function(){var t=Object(k.a)("actionToPerform");this.action=parseInt(t),this.validateCompanyLogged(),this.oChangeDealer=0,this.isAwaiting=!1,this.contract=new v.a,this.enableOrDisableForm()}},{key:"getInitContractState",value:(n=i(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.contractService.getContractinitState().subscribe((function(t){e.contractState=t,console.log(e.contractState)}));case 1:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"validateCompanyLogged",value:(e=i(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,t.t0=(this.company=y.a.validateUserAndCompany(),this.company.type),t.next=t.t0===f.a.DEALER?4:t.t0===f.a.CLIENT?6:7;break;case 4:return this.disableDealerField=!0,this.dealerService.getDealerById(this.company.id).subscribe((function(t){e.dealerService.setDealerSelected(t)})),t.abrupt("break",8);case 6:return t.abrupt("break",8);case 7:this.disableDealerField=!1;case 8:t.next=13;break;case 10:t.prev=10,t.t1=t.catch(0),console.warn(t.t1);case 13:case"end":return t.stop()}}),t,this,[[0,10]])}))),function(){return e.apply(this,arguments)})},{key:"validateContractToUpdate",value:function(){null!=this.contractToUpdate&&null!=this.contractToUpdate?(this.isToUpdate=!0,this.setDataInForm(this.contractToUpdate)):this.resetContractData()}},{key:"setClientSelected",value:function(){this.contract.client=this.clientService.getClientSelected(),this.clientToFilter=this.contract.client,this.contracStateService.setClientToContract(this.clientToFilter),this.clientFieldIsInvalid=null==this.contract.client||null==this.contract.client}},{key:"setDealerSelected",value:function(){this.contract.dealer=this.dealerService.getDealerSelected(),this.contracStateService.setDealerToContract(this.contract.dealer),this.dealerFieldIsInvalid=null==this.contract.dealer||null==this.contract.dealer}},{key:"calculateEndingDate",value:function(){var t=this.frmContract.controls,e=t.duration,n=t.startingDate,i=n.value,c=null;try{c=this.formatDate(i.toISOString().substring(0,10))}catch(r){i=""+n.value,c=this.formatDate(i.substr(0,10))}var a=e.value,o=new Date(c.getFullYear(),c.getMonth()-1,c.getDate());o.setMonth(o.getMonth()+a),o.toISOString().substring(0,10),this.dtEndingDate=o}},{key:"setDataInForm",value:function(t){this.frmContract.patchValue(t),this.dtStartingDate=this.formatDate(t.startingDate.toString().substr(0,10)),this.dtEndingDate=this.formatDate(t.endingDate.toString().substr(0,10))}},{key:"saveContract",value:function(){var t=this.frmContract.controls,e=t.name,n=t.startingDate,i=t.endingDate,c=t.amountVehicles,a=t.duration,o=t.observation;try{if(this.frmContract.valid&&(this.contract=new v.a,this.contract.name=e.value,this.contract.startingDate=n.value,this.contract.endingDate=i.value,this.contract.amountVehicles=c.value,this.contract.duration=a.value,this.contract.observation=o.value,confirm("\xbfEst\xe1 seguro que desea guardar los datos asociados a este contrato?"))){if(null!=this.contractToUpdate&&null!=this.contractToUpdate&&(this.contract.id=this.contractToUpdate.id,this.contract.code=this.contractToUpdate.code,this.contract.consecutive=this.contractToUpdate.consecutive),this.contract.client=this.client,null==this.contract.client||null==this.contract.client)throw this.clientFieldIsInvalid=!0,new Error("Se debe seleccionar un cliente");if(this.contract.dealer=this.dealer,null==this.contract.dealer||null==this.contract.dealer)throw this.dealerFieldIsInvalid=!0,new Error("Se debe seleccionar un concesionario");if(this.contract.contractState=this.contractState,this.contract.discountType=this.discountType,this.contract.discountValue=this.discountValue,this.contract.lsVehicleModels=this.modelsToFilter,this.contract.lsVehicles=this.vehicles,this.contract.lsVehicles.length>this.contract.amountVehicles)throw new Error("Verifique que la cantidad de veh\xedculos seleccionados no exceda la cantidad de vehiculos contratados.\n                Cantidad de veh\xedculos permitida: ".concat(this.contract.amountVehicles," Cantidad de veh\xedculos seleccionados: ").concat(this.contract.lsVehicles.length));this.contract.lsMaintenanceItems=this.maintenanceItems,console.log(this.maintenanceItems),this.saveData(this.contract)}}catch(r){this.isErrorVisible=!0,this.errorTitle="Se ha encontrado una inconsistencia dentro de la informaci\xf3n del contrato.",this.errorDescription=""+r,this.isAwaiting=!1}}},{key:"saveData",value:function(t){var e=this;console.warn("[saveData - Contract]",t),this.isAwaiting=!0,this.isToUpdate?this.contractService.update(t).subscribe({next:function(t){M.a.fire({position:"center",icon:"success",title:t.message,showConfirmButton:!0}),e.isAwaiting=!1,e.contracStateService.resetContractInformation(),e.router.navigate(["/MasterContracts"])},error:function(t){e.isAwaiting=!1,e.isErrorVisible=!0,e.errorTitle="Error actualizando contrato",e.errorDescription="Se ha producido un error intentando actualizar el contrato. "+t.error.Message}}):this.contractService.insert(t).subscribe({next:function(t){M.a.fire({position:"center",icon:"success",title:t.message,showConfirmButton:!0}),e.isAwaiting=!1,e.contracStateService.resetContractInformation(),e.router.navigate(["/MasterContracts"])},error:function(t){e.isAwaiting=!1,e.isErrorVisible=!0,e.errorTitle="Error creando contrato",e.errorDescription="Se ha producido un error intentando guardar el contrato en la base de datos.  "+t.error.Message}})}},{key:"comeBackTable",value:function(){this.resetContractData(),this.router.navigate(["/MasterContracts"])}},{key:"formatDate",value:function(t){var e=parseInt(t.substring(0,4)),n=parseInt(t.substring(5,7)),i=parseInt(t.substring(8,10));return new Date(e,n,i)}},{key:"validateNumbers",value:function(t){return C.a.validateTyping(t,"numbers")}},{key:"validateInputDate",value:function(t){return t.preventDefault(),null}},{key:"setDiscountType",value:function(t){null==t||null==t?this.discountFieldIsInvalid=!0:(this.discountType=t,this.discountFieldIsInvalid=!1),this.contracStateService.setDiscountType(this.discountType)}},{key:"setItemsByContract",value:function(t){try{this.contract.lsMaintenanceItems=null!=t&&null!=t?t:[]}catch(e){console.warn(e)}}},{key:"disableContract",value:function(t){var e=this.frmContract.controls,n=e.name,i=e.duration,c=e.startingDate,a=e.discountValue,o=e.observation,r=e.amountVehicles;t.id!=g.a.EN_NEGOCIACION?(n.disable(),i.disable(),c.disable(),a.disable(),o.disable(),r.disable(),this.disableClientField=!0,this.disableDealerField=!0,this.disableTypeOfDiscoutnField=!0,this.disableVehicleTypesAndVehicleModels=!0,this.disableVehicles=!0):(n.enable(),i.enable(),c.enable(),a.enable(),o.enable(),r.enable(),this.disableClientField=!1,this.disableDealerField=!1,this.disableTypeOfDiscoutnField=!1,this.disableVehicleTypesAndVehicleModels=!1,this.disableVehicles=!1)}},{key:"enableOrDisableForm",value:function(){try{var t=this.contractService.getContractIsToEdit();switch(this.action){case b.a.CREATE:this.disableClientField=!1,this.disableDealerField=!1,this.disableTypeOfDiscoutnField=!1,this.frmContract.enable(),this.buttonSaveIsDisable=!1,this.disableCmbState=!1,this.disableVehicleTypesAndVehicleModels=!1,this.disableVehicles=!1;break;case b.a.READ:this.disableClientField=!0,this.disableDealerField=!0,this.disableTypeOfDiscoutnField=!0,this.frmContract.disable(),this.buttonSaveIsDisable=!0,this.disableCmbState=!0,this.disableVehicleTypesAndVehicleModels=!0,this.disableVehicles=!0;break;case b.a.UPDATE:(t||this.action==b.a.UPDATE)&&(this.disableCmbState=!1)}}catch(e){console.warn("[Enable or diable form]",e)}}},{key:"resetContractData",value:function(){this.isToUpdate=!1,this.contracStateService.resetContractInformation()}},{key:"closeError",value:function(){this.isErrorVisible=!1}},{key:"validateDiscountValues",value:function(){this.discountType&&this.frmContract.controls.discountValue.setErrors((this.discountType.id==m.b.PORCENTAJE_POR_REPUESTOS||this.discountType.id==m.b.PORCENTAJE_POR__TOTAL_MANTENIMIENTO)&&this.discountValue>100?{maxValueAllowed:!0}:null)}},{key:"contractNameField",get:function(){return this.frmContract.get("name")}},{key:"durationField",get:function(){return this.frmContract.get("duration")}},{key:"startingDateField",get:function(){return this.frmContract.get("startingDate")}},{key:"endingDateField",get:function(){return this.frmContract.get("endingDate")}},{key:"discountValueField",get:function(){return this.frmContract.get("discountValue")}},{key:"observationField",get:function(){return this.frmContract.get("observation")}},{key:"amountVehiclesField",get:function(){return this.frmContract.get("amountVehicles")}}]),t}()).\u0275fac=function(t){return new(t||ft)(p.Vb(I.a),p.Vb(T.a),p.Vb(_.a),p.Vb(d.b),p.Vb(r.f),p.Vb(d.a),p.Vb(P.a))},ft.\u0275cmp=p.Pb({type:ft,selectors:[["app-contract"]],inputs:{countChanges:"countChanges",contractIsToUpdate:"contractIsToUpdate"},outputs:{contractWasSetted:"contractWasSetted"},features:[p.Hb],decls:64,vars:26,consts:[["id","container__content"],["mat-align-tabs","start"],["label","Datos del contrato"],[1,"form-basic-data",3,"formGroup"],[1,"container__row"],[1,"container__col"],[3,"client","disableField","clientWasSetted"],["class","error",4,"ngIf"],[3,"dealer","disableField","dealerWasSetted"],["type","text","formControlName","name","placeholder","C\xf3digo de referencia del contrato ...",1,"form-control"],["type","text","formControlName","amountVehicles","placeholder","cantidad de veh\xedculos contratados",1,"form-control",3,"keypress"],["type","number","formControlName","duration","placeholder","Duraci\xf3n del contrato ...",1,"form-control",3,"keypress","input"],["type","text","formControlName","startingDate","placeholder","fecha de inicio ...","bsDatepicker","",1,"form-control",3,"bsValue","bsConfig","keypress","onHidden"],["type","text","formControlName","endingDate","placeholder","fecha de finalizaci\xf3n ...","bsDatepicker","","disabled","",1,"form-control",3,"bsValue","bsConfig"],[3,"disableField","discountWasSelected"],["type","number","formControlName","discountValue","placeholder","valor del descuento ...",1,"form-control",3,"keypress"],[1,"container__observation"],["formControlName","observation","cols","30","rows","2",1,"form-control"],["label","L\xedneas contratadas"],[3,"disableChecks"],["label","Veh\xedculos contratados"],[3,"amountAllowed","disableChecks","contractToFilter"],["label","Precios contratados"],[1,"buttons__container"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-success",3,"disabled","click"],[4,"ngIf"],[3,"title","errorMessage","onAlertWasClose",4,"ngIf"],[1,"error"],[3,"title","errorMessage","onAlertWasClose"]],template:function(t,e){1&t&&(p.bc(0,"div",0),p.bc(1,"mat-tab-group",1),p.bc(2,"mat-tab",2),p.bc(3,"form",3),p.bc(4,"div",4),p.bc(5,"div",5),p.bc(6,"app-input-search-client",6),p.ic("clientWasSetted",(function(){return e.setClientSelected()})),p.ac(),p.Lc(7,et,3,0,"div",7),p.ac(),p.bc(8,"div",5),p.bc(9,"app-input-search-dealer",8),p.ic("dealerWasSetted",(function(){return e.setDealerSelected()})),p.ac(),p.Lc(10,nt,3,0,"div",7),p.ac(),p.ac(),p.bc(11,"div",4),p.bc(12,"div",5),p.bc(13,"label"),p.Mc(14,"C\xf3digo de referencia del contrato"),p.ac(),p.Wb(15,"input",9),p.ac(),p.ac(),p.bc(16,"div",4),p.bc(17,"div",5),p.bc(18,"label"),p.Mc(19,"Cantidad de veh\xedculos contratados"),p.ac(),p.bc(20,"input",10),p.ic("keypress",(function(t){return e.validateNumbers(t)})),p.ac(),p.Lc(21,ct,2,1,"div",7),p.ac(),p.bc(22,"div",5),p.bc(23,"label"),p.Mc(24,"Duraci\xf3n en meses:"),p.ac(),p.bc(25,"input",11),p.ic("keypress",(function(t){return e.validateNumbers(t)}))("input",(function(){return e.calculateEndingDate()})),p.ac(),p.Lc(26,ot,2,1,"div",7),p.ac(),p.ac(),p.bc(27,"div",4),p.bc(28,"div",5),p.bc(29,"label"),p.Mc(30,"Fecha de inicio:"),p.ac(),p.bc(31,"input",12),p.ic("keypress",(function(t){return e.validateInputDate(t)}))("onHidden",(function(){return e.calculateEndingDate()})),p.ac(),p.Lc(32,st,2,1,"div",7),p.ac(),p.bc(33,"div",5),p.bc(34,"label"),p.Mc(35,"Fecha de finalizaci\xf3n:"),p.ac(),p.Wb(36,"input",13),p.ac(),p.ac(),p.bc(37,"div",4),p.bc(38,"div",5),p.bc(39,"app-contract-discount-type",14),p.ic("discountWasSelected",(function(t){return e.setDiscountType(t)})),p.ac(),p.Lc(40,lt,3,0,"div",7),p.ac(),p.bc(41,"div",5),p.bc(42,"label"),p.Mc(43,"Valor del descuento:"),p.ac(),p.bc(44,"input",15),p.ic("keypress",(function(t){return e.validateNumbers(t)})),p.ac(),p.Lc(45,ht,3,2,"div",7),p.ac(),p.ac(),p.bc(46,"div",16),p.bc(47,"label"),p.Mc(48,"Observaciones: "),p.ac(),p.bc(49,"textarea",17),p.Mc(50,"          "),p.ac(),p.ac(),p.ac(),p.ac(),p.bc(51,"mat-tab",18),p.Wb(52,"app-check-list-vehicle-model",19),p.ac(),p.bc(53,"mat-tab",20),p.Wb(54,"app-tbl-check-vehicles",21),p.ac(),p.bc(55,"mat-tab",22),p.Wb(56,"app-tbl-prices-by-contract"),p.ac(),p.ac(),p.bc(57,"div",23),p.bc(58,"button",24),p.ic("click",(function(){return e.comeBackTable()})),p.Mc(59," Cancelar "),p.ac(),p.bc(60,"button",25),p.ic("click",(function(){return e.saveContract()})),p.Mc(61," Guardar "),p.ac(),p.ac(),p.ac(),p.Lc(62,pt,1,0,"app-img-loading",26),p.Lc(63,bt,1,2,"app-alert-error",27)),2&t&&(p.Jb(3),p.uc("formGroup",e.frmContract),p.Jb(3),p.uc("client",e.client)("disableField",e.disableClientField),p.Jb(1),p.uc("ngIf",e.clientFieldIsInvalid),p.Jb(2),p.uc("dealer",e.dealer)("disableField",e.disableDealerField),p.Jb(1),p.uc("ngIf",e.dealerFieldIsInvalid),p.Jb(11),p.uc("ngIf",e.amountVehiclesField.invalid&&(e.amountVehiclesField.touched||e.amountVehiclesField.dirty)),p.Jb(5),p.uc("ngIf",e.durationField.invalid&&(e.durationField.touched||e.durationField.dirty)),p.Jb(5),p.uc("bsValue",e.dtStartingDate)("bsConfig",p.wc(24,vt)),p.Jb(1),p.uc("ngIf",e.startingDateField.invalid&&(e.startingDateField.touched||e.startingDateField.dirty)),p.Jb(4),p.uc("bsValue",e.dtEndingDate)("bsConfig",p.wc(25,vt)),p.Jb(3),p.uc("disableField",e.disableTypeOfDiscoutnField),p.Jb(1),p.uc("ngIf",e.discountFieldIsInvalid),p.Jb(5),p.uc("ngIf",e.discountValueField.invalid&&(e.discountValueField.touched||e.discountValueField.dirty)),p.Jb(7),p.uc("disableChecks",e.disableVehicleTypesAndVehicleModels),p.Jb(2),p.uc("amountAllowed",e.amountVehiclesField.value)("disableChecks",e.disableVehicles)("contractToFilter",e.contractToUpdate),p.Jb(6),p.uc("disabled",e.frmContract.invalid||e.clientFieldIsInvalid||e.dealerFieldIsInvalid||e.contracStateFieldIsInvalid||e.discountFieldIsInvalid||e.buttonSaveIsDisable),p.Jb(2),p.uc("ngIf",e.isAwaiting),p.Jb(1),p.uc("ngIf",e.isErrorVisible))},directives:[s.b,s.a,r.B,r.r,r.k,D.a,a.o,x.a,r.c,r.q,r.i,r.v,l.b,l.a,O,A.a,J,Z,$.a,tt.a],styles:['.container__row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-row:1fr}.container__col[_ngcontent-%COMP%], .container__observation[_ngcontent-%COMP%], .container__vehicleModel[_ngcontent-%COMP%]{padding:10px}.buttons__container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.buttons__container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:200px;margin-left:10px;margin-top:20px}.card-body[_ngcontent-%COMP%]{padding:10px}.container__titles[_ngcontent-%COMP%]{overflow:hidden;border:1px solid #ccc;background-color:#f1f1f1}.container__titles[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:inherit;float:left;border:none;outline:none;cursor:pointer;padding:14px 16px;transition:.3s;font-size:20px}.container__titles[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#ddd}.container__titles[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:#ccc}.tab_content[_ngcontent-%COMP%]{padding:20px 50px;border:1px solid #ccc;border-top:none}#container__content[_ngcontent-%COMP%]{transition:margin-left 1s;padding:20px;margin-left:250px}.error[_ngcontent-%COMP%]{color:red;margin-top:10px}.container__infoError[_ngcontent-%COMP%]:before{position:absolute;content:"";display:block;width:0;height:0;left:50%;margin-left:-10px;margin-top:-30px;border:10px solid transparent;border-bottom-color:#ebd4d4}.form-basic-data[_ngcontent-%COMP%]{margin-top:20px}.container__infoError[_ngcontent-%COMP%]{background-color:#ebd4d4;cursor:pointer;position:absolute;padding:10px 15px;z-index:50;width:200px;height:auto;border-radius:20px;right:3%;margin-top:30px;box-shadow:10px 10px 17px -7px rgba(0,0,0,.75)}']}),ft),mt=n("QgiH"),yt=n("eeG/");function Ct(t,e){if(1&t){var n=p.cc();p.bc(0,"button",13),p.ic("click",(function(){return p.Dc(n),p.mc().insertContract()})),p.Wb(1,"i",14),p.ac()}}function kt(t,e){if(1&t){var n=p.cc();p.bc(0,"i",19),p.ic("click",(function(){p.Dc(n);var t=p.mc().$implicit;return p.mc().updateContract(t)})),p.ac()}}function St(t,e){if(1&t){var n=p.cc();p.bc(0,"i",20),p.ic("click",(function(){p.Dc(n);var t=p.mc().$implicit;return p.mc().deleteContract(t)})),p.ac()}}function Mt(t,e){if(1&t){var n=p.cc();p.bc(0,"tr"),p.bc(1,"td"),p.Mc(2),p.ac(),p.bc(3,"td"),p.Mc(4),p.ac(),p.bc(5,"td"),p.Mc(6),p.nc(7,"uppercase"),p.ac(),p.bc(8,"td"),p.Mc(9),p.nc(10,"titlecase"),p.ac(),p.bc(11,"td"),p.Mc(12),p.nc(13,"titlecase"),p.ac(),p.bc(14,"td"),p.Mc(15),p.ac(),p.bc(16,"td"),p.Mc(17),p.ac(),p.bc(18,"td"),p.bc(19,"span",15),p.Mc(20),p.nc(21,"titlecase"),p.ac(),p.ac(),p.bc(22,"td"),p.bc(23,"i",16),p.ic("click",(function(){p.Dc(n);var t=e.$implicit;return p.mc().getDetailsContract(t)})),p.ac(),p.Lc(24,kt,1,0,"i",17),p.Lc(25,St,1,0,"i",18),p.ac(),p.ac()}if(2&t){var i=e.index,c=e.$implicit,a=p.mc();p.Jb(2),p.Nc(i+1),p.Jb(2),p.Nc(c.code),p.Jb(2),p.Nc(p.oc(7,11,c.name)),p.Jb(3),p.Nc(p.oc(10,13,c.client.name)),p.Jb(3),p.Nc(p.oc(13,15,c.dealer.name)),p.Jb(3),p.Nc(c.duration),p.Jb(2),p.Nc(c.amountVehicles),p.Jb(2),p.uc("ngClass",a.getClass(c.contractState.name)),p.Jb(1),p.Oc(" ",p.oc(21,17,c.contractState.name)," "),p.Jb(4),p.uc("ngIf",a.enableButtonsEditAndDelete),p.Jb(1),p.uc("ngIf",a.enableButtonsEditAndDelete)}}function It(t,e){1&t&&p.Wb(0,"app-img-loading")}var Tt,_t,Pt,Dt=function(t){return{itemsPerPage:10,currentPage:t}},xt=[{path:"",component:h.a,children:[{path:"",component:(Tt=function(){function t(e,n,i){var a=this;c(this,t),this.contractService=e,this.router=n,this.contracStateService=i,this.p=1,this.lsContracts=[],this.lsContractsFiltered=[],this.txtFilter=new r.g,this.hideButtonAdd=!1,this.txtFilter.valueChanges.subscribe((function(t){a.filterContracts(t)}))}var e;return o(t,[{key:"ngOnInit",value:function(){this.enableButtonsEditAndDelete=!0,this.initComponents()}},{key:"validateCompany",value:function(){try{this.companyStorage=y.a.validateUserAndCompany()}catch(t){console.warn(t)}}},{key:"initComponents",value:(e=i(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.validateCompany(),this.isToUpdate=!1,this.isAwaiting=!1,this.getListContracts();case 1:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"getClass",value:function(t){return Object(yt.a)(t)}},{key:"getListContracts",value:function(){var t=this;switch(this.isAwaiting=!0,this.companyStorage.type){case f.a.DEALER:this.contractService.getContracts(this.companyStorage.id).subscribe((function(e){t.lsContracts=e,t.lsContractsFiltered=t.lsContracts,t.isAwaiting=!1})),this.hideButtonAdd=!0,this.enableButtonsEditAndDelete=!1;break;case f.a.CLIENT:this.contractService.getContracts(0,this.companyStorage.id).subscribe((function(e){t.lsContracts=e,t.lsContractsFiltered=t.lsContracts,t.isAwaiting=!1})),this.hideButtonAdd=!0,this.enableButtonsEditAndDelete=!1;break;default:this.contractService.getContracts().subscribe((function(e){t.lsContracts=e,t.lsContractsFiltered=t.lsContracts,t.isAwaiting=!1})),this.hideButtonAdd=!1,this.enableButtonsEditAndDelete=!0}}},{key:"moveContent",value:function(t){document.querySelector("#container__content").style.marginLeft=t?"250px":"0px"}},{key:"insertContract",value:function(){this.resetContractState(),this.isToUpdate=!1,this.contractService.setContract(null),Object(k.b)("actionToPerform",b.a.CREATE),this.router.navigate(["/MasterContracts/Contract"])}},{key:"getDetailsContract",value:function(t){this.resetContractState(),Object(k.b)("actionToPerform",b.a.READ),this.router.navigate(["/MasterContracts/Contract/"+t.id])}},{key:"updateContract",value:function(t){this.resetContractState(),Object(k.b)("actionToPerform",b.a.UPDATE),this.router.navigate(["/MasterContracts/Contract/"+t.id])}},{key:"deleteContract",value:function(t){var e=this;confirm("\xbfEst\xe1 seguro que desea elminar este contrato?, al hacerlo se eliminar\xe1 toda la informaci\xf3n relacionada")&&(this.isAwaiting=!0,this.contractService.delete(t).subscribe((function(t){t.response&&(M.a.fire({position:"center",icon:"success",title:t.message,showConfirmButton:!0}),e.getListContracts()),e.isAwaiting=!1})))}},{key:"resetContractState",value:function(){this.contracStateService.resetContractInformation()}},{key:"filterContracts",value:function(t){try{this.lsContractsFiltered=this.lsContracts.filter((function(e){return e.code.toLocaleLowerCase().includes(t.toLocaleLowerCase())||e.name.toLocaleLowerCase().includes(t.toLocaleLowerCase())||e.consecutive==parseInt(t)||e.client.name.toLocaleLowerCase().includes(t.toLocaleLowerCase())||e.dealer.name.toLocaleLowerCase().includes(t.toLocaleLowerCase())}))}catch(e){console.log(e)}}},{key:"removeFilter",value:function(){this.txtFilter.setValue(null),this.lsContractsFiltered=this.lsContracts}},{key:"downloadExcel",value:function(){var t=this.lsContractsFiltered.map((function(t){var e,n;return{CodigoInterno:t.code,CodigoReferencia:t.name,Cliente:null===(e=t.client)||void 0===e?void 0:e.name,Concesionario:null===(n=t.dealer)||void 0===n?void 0:n.name,PlazoEnMeses:t.duration,VehiculosContratados:t.amountVehicles,Estado:t.contractState.name}}));mt.a.convertArrayToFile(t,"Contratos")}}]),t}(),Tt.\u0275fac=function(t){return new(t||Tt)(p.Vb(_.a),p.Vb(d.b),p.Vb(P.a))},Tt.\u0275cmp=p.Pb({type:Tt,selectors:[["app-tbl-contract"]],decls:37,vars:9,consts:[["id","container__content"],[1,"container-filter"],["type","text","placeholder","C\xf3digo , Cliente \xf3 Concesionario",1,"form-control",3,"formControl"],["type","button",1,"btn","btn-danger",3,"click"],[1,"text-right"],[1,"btn","btn-primary",3,"click"],["class","btn-add btn-info",3,"click",4,"ngIf"],[1,"table","table-striped"],["title","Veh\xedculos contratados"],[4,"ngFor","ngForOf"],[1,"paginationContainer"],[3,"pageChange"],[4,"ngIf"],[1,"btn-add","btn-info",3,"click"],[1,"fas","fa-plus"],[3,"ngClass"],["title","M\xe1s informaci\xf3n",1,"fas","fa-info-circle","text-info",3,"click"],["class","fas fa-edit text-warning","title","Modificar",3,"click",4,"ngIf"],["class","fas fa-trash-alt text-danger","title","Eliminar",3,"click",4,"ngIf"],["title","Modificar",1,"fas","fa-edit","text-warning",3,"click"],["title","Eliminar",1,"fas","fa-trash-alt","text-danger",3,"click"]],template:function(t,e){1&t&&(p.bc(0,"div",0),p.bc(1,"h1"),p.Mc(2,"Contratos"),p.ac(),p.bc(3,"div",1),p.Wb(4,"input",2),p.bc(5,"button",3),p.ic("click",(function(){return e.removeFilter()})),p.Mc(6," Borrar filtro "),p.ac(),p.bc(7,"div",4),p.bc(8,"button",5),p.ic("click",(function(){return e.downloadExcel()})),p.Mc(9," Descargar Excel "),p.ac(),p.ac(),p.ac(),p.Lc(10,Ct,2,0,"button",6),p.bc(11,"table",7),p.bc(12,"thead"),p.bc(13,"th"),p.Mc(14,"#"),p.ac(),p.bc(15,"th"),p.Mc(16,"C\xf3digo interno"),p.ac(),p.bc(17,"th"),p.Mc(18,"C\xf3digo referencia"),p.ac(),p.bc(19,"th"),p.Mc(20,"Cliente"),p.ac(),p.bc(21,"th"),p.Mc(22,"Concesionario"),p.ac(),p.bc(23,"th"),p.Mc(24,"Plazo en meses"),p.ac(),p.bc(25,"th",8),p.Mc(26,"Veh. contratados"),p.ac(),p.bc(27,"th"),p.Mc(28,"Estado"),p.ac(),p.bc(29,"th"),p.Mc(30,"Acciones"),p.ac(),p.ac(),p.bc(31,"tbody"),p.Lc(32,Mt,26,19,"tr",9),p.nc(33,"paginate"),p.ac(),p.ac(),p.bc(34,"div",10),p.bc(35,"pagination-controls",11),p.ic("pageChange",(function(t){return e.p=t})),p.ac(),p.ac(),p.ac(),p.Lc(36,It,1,0,"app-img-loading",12)),2&t&&(p.Jb(4),p.uc("formControl",e.txtFilter),p.Jb(6),p.uc("ngIf",!e.hideButtonAdd),p.Jb(22),p.uc("ngForOf",p.pc(33,4,e.lsContractsFiltered,p.xc(7,Dt,e.p))),p.Jb(4),p.uc("ngIf",e.isAwaiting))},directives:[r.c,r.q,r.h,a.o,a.n,q.c,a.m,$.a],pipes:[q.b,a.y,a.x],styles:["i[_ngcontent-%COMP%]{margin:0 3px;cursor:pointer}.col-number[_ngcontent-%COMP%]{max-width:50px;width:50px}.btn-add[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{cursor:pointer}.btn-add[_ngcontent-%COMP%]{border-radius:50%;width:50px;height:50px;position:relative;left:93%;margin-bottom:20px;top:30px;outline:none;text-align:center;font-size:24px;border:none;z-index:55}#container__content[_ngcontent-%COMP%]{transition:margin-left 1s;padding:20px 50px;margin-left:250px}@media only screen and (max-width:600px){.col-mobile-hide[_ngcontent-%COMP%]{display:none}.btn-add[_ngcontent-%COMP%]{left:80vw}}.container-filter[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-bottom:30px}.container-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:150px;cursor:pointer;margin-left:10px}.tag-pending[_ngcontent-%COMP%]{background-color:#ff4f03;padding:8px 20px;width:150px}.tag-ending[_ngcontent-%COMP%], .tag-pending[_ngcontent-%COMP%]{display:flex;flex-direction:row;color:#fff;border-radius:20px;align-items:center;justify-content:center}.tag-ending[_ngcontent-%COMP%]{background-color:#469627;padding:8px 40px;width:180px}.tag-canceled[_ngcontent-%COMP%]{background-color:#7e0c2c}.tag-canceled[_ngcontent-%COMP%], .tag-waiting[_ngcontent-%COMP%]{display:flex;flex-direction:row;padding:8px 40px;color:#fff;border-radius:20px;width:180px;align-items:center;justify-content:center}.tag-waiting[_ngcontent-%COMP%]{background-color:#0f4a7e}"]}),Tt)},{path:"Contract",component:gt},{path:"Contract/:id",component:gt}]}],Vt=((Pt=function t(){c(this,t)}).\u0275mod=p.Tb({type:Pt}),Pt.\u0275inj=p.Sb({factory:function(t){return new(t||Pt)},imports:[[d.f.forChild(xt)],d.f]}),Pt),wt=((_t=function t(){c(this,t)}).\u0275mod=p.Tb({type:_t}),_t.\u0275inj=p.Sb({factory:function(t){return new(t||_t)},imports:[[a.c,u.a,r.l,r.w,Vt,l.c.forRoot(),s.c]]}),_t)},R7St:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i=function(){function t(){c(this,t)}return o(t,[{key:"formatNumberToString",value:function(t){var e=Math.round(t).toString(),n="",i="",c=e.indexOf(".");c>0?(n=e.substr(0,c),i=e.substr(c,e.length)):n=e.substr(0,e.length);for(var a=n.split("").reverse(),o=Math.floor(a.length/3),r=0;r<o;r++){var s,l=a.lastIndexOf(",");s=l>0?l+4:3,a.splice(s,0,",")}var u=a.reverse().join("");return","==u.split("")[0]&&(u=u.substr(1,u.length)),""!=i&&(u+=i=i.replace(/\,/g,".")),u}}]),t}()},i5Qh:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var a=n("tk/3"),r=n("LRne"),s=n("JIr8"),l=n("AytR"),u=n("fXoL"),d=function(){var t=function(){function t(e){c(this,t),this.http=e,this.URL_API=l.a.apiUrl+"/Client",this.HttpOptions={headers:new a.c({"Content-Type":"application/json"})}}var e,n,u;return o(t,[{key:"getClients",value:function(){return this.http.get(this.URL_API+"/Get")}},{key:"getClientById",value:(u=i(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.http.get("".concat(this.URL_API,"/GetById?pId=").concat(e)).toPromise());case 1:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"getClientByDocument",value:(n=i(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.http.get("".concat(this.URL_API,"/GetByDocument?pDocument=").concat(e)).toPromise());case 1:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"getClientsByDescriptions",value:function(t){return t.trim()?this.http.get("".concat(this.URL_API,"/GetByDescription?sDescription=").concat(t)).pipe(Object(s.a)(this.handleError("getClientsByDescriptions",[]))):Object(r.a)([])}},{key:"insertClient",value:function(t){return this.http.post(this.URL_API+"/Insert",t,this.HttpOptions)}},{key:"updateClient",value:function(t){return this.http.post(this.URL_API+"/Update",t,this.HttpOptions)}},{key:"deleteClient",value:(e=i(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.http.post(this.URL_API+"/Delete",e,this.HttpOptions).toPromise());case 1:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"setClientToUpdate",value:function(t){this.clientToUpdate=t}},{key:"getClientToUpdate",value:function(){return this.clientToUpdate}},{key:"setClientSelected",value:function(t){this.clientSelected=t}},{key:"getClientSelected",value:function(){return this.clientSelected}},{key:"getBlockFormClient",value:function(){return this.blockFormClient}},{key:"setBlockFormClient",value:function(t){this.blockFormClient=t}},{key:"getAction",value:function(){return this.action}},{key:"setAction",value:function(t){this.action=t}},{key:"handleError",value:function(){var t=arguments.length>1?arguments[1]:void 0;return function(e){return console.error(e),Object(r.a)(t)}}}]),t}();return t.\u0275fac=function(e){return new(e||t)(u.fc(a.a))},t.\u0275prov=u.Rb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},"p9j/":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i=function(){function t(){c(this,t)}return o(t,null,[{key:"validateTyping",value:function(t,e){if("numbers"==e)return!!/^\d+$/.test(t.key)||(t.preventDefault(),!1)}}]),t}()},"xch/":function(e,n,i){"use strict";i.d(n,"a",(function(){return l}));var a=i("tk/3"),r=i("AytR"),s=i("fXoL"),l=function(){var e=function(){function e(t){c(this,e),this.http=t,this.URL_API=r.a.apiUrl+"/MaintenanceItem",this.HttpOptions={headers:new a.c({"Content-Type":"application/json"})}}return o(e,[{key:"getCategorySelected",value:function(){return this.category}},{key:"setCategorySelected",value:function(t){this.category=t}},{key:"getPresentationUnit",value:function(){return this.presentationUnit}},{key:"setPresentationUnit",value:function(t){this.presentationUnit=t}},{key:"getTypeOfItem",value:function(){return this.typeOfItem}},{key:"getItem",value:function(){return this.item}},{key:"setItem",value:function(t){this.item=t}},{key:"settypeOfItem",value:function(t){this.typeOfItem=t}},{key:"getItemToUpdate",value:function(){return this.itemToUpdate}},{key:"setItemToUpdate",value:function(t){this.itemToUpdate=t}},{key:"getMaintenanceItems",value:function(t){return this.http.get("".concat(this.URL_API,"/Get?dealer_id=").concat(t))}},{key:"getMaintenanceItemById",value:function(t){return this.http.get("".concat(this.URL_API,"/GetById?itemId=").concat(t))}},{key:"getItemsByVehicleModel",value:function(t){return this.http.get("".concat(this.URL_API,"/GetItemsByVehicleModel?vehicleModel_id=").concat(t))}},{key:"getPresentationUnits",value:function(){return this.http.get(this.URL_API+"/GetPresentationUnits")}},{key:"getCategories",value:function(){return this.http.get(this.URL_API+"/GetCategories")}},{key:"getTypeOfMaintenanceItem",value:function(){return this.http.get(this.URL_API+"/getTypeOfMaintenanceItem")}},{key:"getPricesByDealer",value:function(t){return this.http.get("".concat(this.URL_API,"/GetPricesByDealer?dealer_id=").concat(t))}},{key:"setPricesByDealer",value:function(t){return this.http.post(this.URL_API+"/SetPricesByDealer",t,this.HttpOptions)}},{key:"getPricesByContract",value:function(t){return this.http.get("".concat(this.URL_API,"/GetPricesByContract?contract_id=").concat(t))}},{key:"setPricesByContract",value:function(t){return this.http.post(this.URL_API+"/SetPricesByContract",t,this.HttpOptions)}},{key:"getTaxesList",value:function(){return this.http.get(this.URL_API+"/GetTaxesList")}},{key:"insert",value:function(t){return this.http.post(this.URL_API+"/Insert",t,this.HttpOptions)}},{key:"update",value:function(t){return this.http.put(this.URL_API+"/Update",t,this.HttpOptions)}},{key:"delete",value:function(t){return this.http.delete("".concat(this.URL_API,"/Delete?maintenanceItemId=").concat(t.id),this.HttpOptions)}},{key:"calculateTaxes",value:function(e,n){var i=0;if(n.length>0){var c,a=t(n);try{for(a.s();!(c=a.n()).done;){var o=c.value;i+=Math.round(e*(o.percentValue/100))}}catch(r){a.e(r)}finally{a.f()}}return i}},{key:"calculateTotalByItem",value:function(t,e,n){return Math.round(t-e+n)}},{key:"getItemRAAdministration",value:function(){return this.http.get(this.URL_API+"/GetByTypeId?typeId=3")}},{key:"updateMaintence",value:function(t){return this.http.post(this.URL_API+"/Update",t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.fc(a.a))},e.\u0275prov=s.Rb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()}}])}();