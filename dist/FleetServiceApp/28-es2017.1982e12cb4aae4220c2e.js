(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{"/QMu":function(t,e,n){"use strict";n.r(e),n.d(e,"RoleModule",(function(){return R}));var c=n("ofXK"),o=n("3Pt+"),i=n("bTqV"),r=n("0IaG"),a=n("xHqg"),s=n("Z/wE"),l=n("tyNb"),b=n("uswQ"),d=n("fXoL"),u=n("3LUQ"),p=n("iAZX"),g=n("ua6w");function m(t,e){1&t&&d.Mc(0,"Datos b\xe1sicos del rol")}function f(t,e){if(1&t&&(d.bc(0,"option",17),d.Mc(1),d.ac()),2&t){const t=e.$implicit;d.uc("value",t.id),d.Jb(1),d.Oc(" ",t.name," ")}}let h=(()=>{class t{constructor(t,e,n,c,o,i){this.fb=t,this._alert=e,this._role=n,this._parameter=c,this.router=o,this.route=i,this.modules=[],this.initForm()}ngOnInit(){this.getRoleFromUrl(),this.getModules()}initForm(){this.roleForm=this.fb.group({id:0,name:["",o.z.required],description:[""],modulesIds:["",o.z.required]})}getRoleById(t){this._role.getById(t).subscribe(t=>{this.roleForm.setValue(t)},t=>this._alert.error(t.error.Message))}getModules(){this._parameter.getModules().subscribe(t=>{this.modules=t},t=>this._alert.error(t.error.Message))}getRoleFromUrl(){this.route.queryParams.subscribe(t=>{const e=t.roleId;e&&this.getRoleById(e)})}submit(){const t=0==this.roleForm.get("id").value;this._role[t?"save":"update"](this.roleForm.value).subscribe(()=>{this._alert.succes(`Rol ${t?"creado":"actualizado"} con \xe9xito`),this.router.navigateByUrl("/MasterRoles")},t=>this._alert.error(t.error.Message))}}return t.\u0275fac=function(e){return new(e||t)(d.Vb(o.f),d.Vb(u.a),d.Vb(p.a),d.Vb(g.a),d.Vb(l.b),d.Vb(l.a))},t.\u0275cmp=d.Pb({type:t,selectors:[["app-form-role"]],decls:30,vars:5,consts:[["id","container__content"],[3,"linear"],[3,"completed"],["matStepLabel",""],[1,"card","container","pt-3","pb-3"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-12"],[1,"form-group"],["type","text","formControlName","name",1,"form-control"],["multiple","","formControlName","modulesIds",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["formControlName","description","cols","4",1,"form-control"],[1,"cotainer-buttons"],["type","button","routerLink","/MasterRoles",1,"btn","btn-danger"],["type","submit",1,"btn","btn-success",3,"disabled"],[1,"col-12","text-center","text-required"],[3,"value"]],template:function(t,e){1&t&&(d.bc(0,"div",0),d.bc(1,"mat-vertical-stepper",1),d.bc(2,"mat-step",2),d.Lc(3,m,1,0,"ng-template",3),d.bc(4,"div",4),d.bc(5,"form",5),d.ic("ngSubmit",(function(){return e.submit()})),d.bc(6,"div",6),d.bc(7,"div",7),d.bc(8,"div",8),d.bc(9,"label"),d.Mc(10,"Nombre*:"),d.ac(),d.Wb(11,"input",9),d.ac(),d.ac(),d.bc(12,"div",7),d.bc(13,"div",8),d.bc(14,"label"),d.Mc(15,"M\xf3dulos*:"),d.ac(),d.bc(16,"select",10),d.Lc(17,f,2,2,"option",11),d.ac(),d.ac(),d.ac(),d.bc(18,"div",7),d.bc(19,"div",8),d.bc(20,"label"),d.Mc(21,"Descripci\xf3n:"),d.ac(),d.Wb(22,"textarea",12),d.ac(),d.ac(),d.ac(),d.bc(23,"div",13),d.bc(24,"button",14),d.Mc(25," Cancelar "),d.ac(),d.bc(26,"button",15),d.Mc(27," Guardar "),d.ac(),d.ac(),d.bc(28,"div",16),d.Mc(29," Campos obligatorios * "),d.ac(),d.ac(),d.ac(),d.ac(),d.ac(),d.ac()),2&t&&(d.Jb(1),d.uc("linear",!0),d.Jb(1),d.uc("completed",!0),d.Jb(3),d.uc("formGroup",e.roleForm),d.Jb(12),d.uc("ngForOf",e.modules),d.Jb(9),d.uc("disabled",e.roleForm.invalid))},directives:[a.f,a.a,a.b,o.B,o.r,o.k,o.c,o.q,o.i,o.y,c.n,l.c,o.u,o.A],styles:[".card-body[_ngcontent-%COMP%]{padding:10px}.container__titles[_ngcontent-%COMP%]{overflow:hidden;border:1px solid #ccc;background-color:#f1f1f1}.container__titles[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:inherit;float:left;border:none;outline:none;cursor:pointer;padding:14px 16px;transition:.3s;font-size:20px}.container__titles[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#ddd}.container__titles[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:#ccc}.tab_content[_ngcontent-%COMP%]{padding:20px 50px;border:1px solid #ccc;border-top:none}#container__content[_ngcontent-%COMP%]{transition:margin-left 1s;padding:20px;margin-left:250px}#container__contact[_ngcontent-%COMP%]{padding:0;margin:0}.container__table__contact[_ngcontent-%COMP%]{padding:50px}.btn-step[_ngcontent-%COMP%]{width:100px;margin-left:5px}.container-step-buttons[_ngcontent-%COMP%]{direction:ltr;display:flex;justify-content:flex-end}.cotainer-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}"]}),t})();var M=n("QgiH");function _(t,e){if(1&t&&(d.bc(0,"span"),d.Mc(1),d.ac()),2&t){const t=e.$implicit,n=e.index,c=d.mc();d.Jb(1),d.Pc(" ",t.name," ",n===c.modules.length-1?"":"-"," ")}}let x=(()=>{class t{constructor(t,e,n,c){this.role=t,this.dialogRef=e,this._role=n,this._alert=c,this.modules=[]}ngOnInit(){this.getModules()}getModules(){this._role.getModulesByRoleId(this.role.id).subscribe(t=>{this.modules=t},t=>this._alert.error(t.error.Message))}closeDialog(){this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(d.Vb(r.a),d.Vb(r.h),d.Vb(p.a),d.Vb(u.a))},t.\u0275cmp=d.Pb({type:t,selectors:[["app-view-detail"]],decls:23,vars:3,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"row"],[1,"col-12","mt-2"],[1,"form-control"],[1,"form-control",2,"height","auto"],[4,"ngFor","ngForOf"],["mat-dialog-actions","",1,"mt-3"],[1,"btn","btn-danger",3,"click"]],template:function(t,e){1&t&&(d.bc(0,"div"),d.bc(1,"h2",0),d.Mc(2,"Detalle de rol"),d.ac(),d.bc(3,"div",1),d.bc(4,"div",2),d.bc(5,"div",3),d.bc(6,"label"),d.Mc(7,"Nombre"),d.ac(),d.bc(8,"div",4),d.Mc(9),d.ac(),d.ac(),d.bc(10,"div",3),d.bc(11,"label"),d.Mc(12,"M\xf3dulos"),d.ac(),d.bc(13,"div",5),d.Lc(14,_,2,2,"span",6),d.ac(),d.ac(),d.bc(15,"div",3),d.bc(16,"label"),d.Mc(17,"Descripci\xf3n"),d.ac(),d.bc(18,"div",4),d.Mc(19),d.ac(),d.ac(),d.ac(),d.ac(),d.bc(20,"div",7),d.bc(21,"button",8),d.ic("click",(function(){return e.closeDialog()})),d.Mc(22,"Salir"),d.ac(),d.ac(),d.ac()),2&t&&(d.Jb(9),d.Nc(e.role.name),d.Jb(5),d.uc("ngForOf",e.modules),d.Jb(5),d.Nc(e.role.description))},directives:[r.i,r.f,c.n,r.c],styles:[""]}),t})();var v=n("oOf3"),y=n("9Wwi");const C=function(t){return{roleId:t}};function w(t,e){if(1&t){const t=d.cc();d.bc(0,"tr"),d.bc(1,"td"),d.Mc(2),d.ac(),d.bc(3,"td"),d.Mc(4),d.ac(),d.bc(5,"td"),d.bc(6,"i",12),d.ic("click",(function(){d.Dc(t);const n=e.$implicit;return d.mc().viewDetail(n)})),d.ac(),d.Wb(7,"i",13),d.bc(8,"i",14),d.ic("click",(function(){d.Dc(t);const n=e.$implicit;return d.mc().delete(n.id)})),d.ac(),d.ac(),d.ac()}if(2&t){const t=e.$implicit;d.Jb(2),d.Nc(t.name),d.Jb(2),d.Nc(t.description),d.Jb(3),d.uc("queryParams",d.xc(3,C,t.id))}}function O(t,e){1&t&&d.Wb(0,"app-img-loading")}const P=function(t){return{itemsPerPage:10,currentPage:t}},k=[{path:"",component:b.a,children:[{path:"",component:(()=>{class t{constructor(t,e,n){this._role=t,this._alert=e,this.dialog=n,this.email="",this.roles=[],this.originalRoles=[],this.p=1,this.isLoading=!1}ngOnInit(){this.getRoles()}getRoles(){this.isLoading=!0,this._role.getAll().subscribe(t=>{this.roles=t,this.originalRoles=t,this.isLoading=!1},t=>this._alert.error(t.error.Message))}filter(){this.roles=0!==this.email.length?this.roles.filter(t=>{if(t.name)return t.name.includes(this.email)}):this.originalRoles}delete(t){this._alert.confirmDelete().then(e=>{e.isConfirmed&&this._role.deleteById(t).subscribe(()=>{this._alert.succes("Rol eliminado con \xe9xito"),this.roles=this.roles.filter(e=>e.id!==t)},t=>this._alert.error(t.error.Message))})}viewDetail(t){const e=new r.e;e.data=t,e.width="800px",this.dialog.open(x,e)}clearFilter(){this.email="",this.roles=this.originalRoles}downloadExcel(){const t=this.roles.map(t=>({Nombre:t.name,Descripcion:t.description}));M.a.convertArrayToFile(t,"Roles")}}return t.\u0275fac=function(e){return new(e||t)(d.Vb(p.a),d.Vb(u.a),d.Vb(r.b))},t.\u0275cmp=d.Pb({type:t,selectors:[["app-list-roles"]],decls:26,vars:8,consts:[["id","container__content"],[1,"container-filter"],["type","text","placeholder","Nombre...",1,"form-control",3,"ngModel","ngModelChange","keyup"],["type","button",1,"btn","btn-danger",3,"click"],[1,"btn","btn-primary",3,"click"],["routerLink","/MasterRoles/form",1,"btn-add","btn-info"],[1,"fas","fa-plus"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[1,"paginationContainer"],[3,"pageChange"],[4,"ngIf"],["title","M\xe1s informaci\xf3n",1,"fas","fa-info-circle","text-info",3,"click"],["title","Modificar","routerLink","/MasterRoles/form",1,"fas","fa-edit","text-warning",3,"queryParams"],["title","Eliminar",1,"fas","fa-trash-alt","text-danger",3,"click"]],template:function(t,e){1&t&&(d.bc(0,"div",0),d.bc(1,"h1"),d.Mc(2,"Roles"),d.ac(),d.bc(3,"div",1),d.bc(4,"input",2),d.ic("ngModelChange",(function(t){return e.email=t}))("keyup",(function(){return e.filter()})),d.ac(),d.bc(5,"button",3),d.ic("click",(function(){return e.clearFilter()})),d.Mc(6," Borrar filtro "),d.ac(),d.bc(7,"button",4),d.ic("click",(function(){return e.downloadExcel()})),d.Mc(8," Descargar Excel "),d.ac(),d.ac(),d.bc(9,"button",5),d.Wb(10,"i",6),d.ac(),d.bc(11,"table",7),d.bc(12,"thead"),d.bc(13,"tr"),d.bc(14,"th"),d.Mc(15,"Nombre"),d.ac(),d.bc(16,"th"),d.Mc(17,"Descripci\xf3n"),d.ac(),d.bc(18,"th"),d.Mc(19,"Acciones"),d.ac(),d.ac(),d.ac(),d.bc(20,"tbody"),d.Lc(21,w,9,5,"tr",8),d.nc(22,"paginate"),d.ac(),d.ac(),d.bc(23,"div",9),d.bc(24,"pagination-controls",10),d.ic("pageChange",(function(t){return e.p=t})),d.ac(),d.ac(),d.ac(),d.Lc(25,O,1,0,"app-img-loading",11)),2&t&&(d.Jb(4),d.uc("ngModel",e.email),d.Jb(17),d.uc("ngForOf",d.pc(22,3,e.roles,d.xc(6,P,e.p))),d.Jb(4),d.uc("ngIf",e.isLoading))},directives:[o.c,o.q,o.t,l.c,c.n,v.c,c.o,y.a],pipes:[v.b],styles:["i[_ngcontent-%COMP%]{margin:0 3px;cursor:pointer}.col-number[_ngcontent-%COMP%]{max-width:50px;width:50px}table[_ngcontent-%COMP%]{cursor:pointer}.container-filter[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-bottom:30px}.container-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:150px;cursor:pointer;margin-left:10px}.btn-add[_ngcontent-%COMP%]{border-radius:50%;width:50px;height:50px;cursor:pointer;position:relative;left:93%;margin-bottom:20px;top:15px;outline:none;text-align:center;font-size:24px;border:none;z-index:55}#container__content[_ngcontent-%COMP%]{transition:margin-left 1s;padding:20px 50px;margin-left:250px}@media only screen and (max-width:600px){.col-mobile-hide[_ngcontent-%COMP%]{display:none}.btn-add[_ngcontent-%COMP%]{left:80vw}}"]}),t})()},{path:"form",component:h}]}];let F=(()=>{class t{}return t.\u0275mod=d.Tb({type:t}),t.\u0275inj=d.Sb({factory:function(e){return new(e||t)},imports:[[l.f.forChild(k)],l.f]}),t})(),R=(()=>{class t{}return t.\u0275mod=d.Tb({type:t}),t.\u0275inj=d.Sb({factory:function(e){return new(e||t)},imports:[[c.c,s.a,o.w,o.l,F,a.c,i.b,r.g]]}),t})()}}]);