!function(){function e(e,n){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,n)}(e))||n&&e&&"number"==typeof e.length){i&&(e=i);var c=0,a=function(){};return{s:a,n:function(){return c>=e.length?{done:!0}:{done:!1,value:e[c++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,s=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return r=e.done,e},e:function(e){s=!0,o=e},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw o}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function n(e,t,n,i,c,a,o){try{var r=e[a](o),s=r.value}catch(l){return void n(l)}r.done?t(s):Promise.resolve(s).then(i,c)}function i(e){return function(){var t=this,i=arguments;return new Promise((function(c,a){var o=e.apply(t,i);function r(e){n(o,c,a,r,s,"next",e)}function s(e){n(o,c,a,r,s,"throw",e)}r(void 0)}))}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"2Xvn":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n("fXoL"),a=n("3Pt+"),r=n("0x5P"),s=n("ofXK");function l(e,t){if(1&e&&(i.bc(0,"option",2),i.Mc(1),i.nc(2,"titlecase"),i.ac()),2&e){var n=t.$implicit;i.uc("value",n.id),i.Jb(1),i.Oc(" ",i.oc(2,2,n.name)," ")}}var d=function(){var e=function(){function e(t){c(this,e),this.vehicleService=t,this.vehicleTypeSelected=null,this.onVehicleTypeWasModified=new i.q,this.frmVehicleType=new a.j({cmbType:new a.g("Seleccione ...")})}return o(e,[{key:"ngOnInit",value:function(){this.initComponents()}},{key:"initComponents",value:function(){var e=this;try{this.clearDataForm(),this.vehicleService.getVehicleTypes().subscribe((function(t){e.lsVehicleType=t}))}catch(t){console.error(t)}}},{key:"setType",value:function(e){var t=this.lsVehicleType.find((function(t){return t.id==e.value}));this.onVehicleTypeWasModified.emit(t)}},{key:"setDataInForm",value:function(e){this.frmVehicleType.controls.cmbType.setValue(e.id)}},{key:"clearDataForm",value:function(){this.frmVehicleType.controls.cmbType.setValue(0)}},{key:"setDisableControls",set:function(e){this.disableControls=e,this.disableControls?this.frmVehicleType.disable():this.frmVehicleType.enable()}},{key:"setVehicleTypeSelected",set:function(e){this.vehicleTypeSelected=e,this.vehicleTypeSelected?this.setDataInForm(this.vehicleTypeSelected):this.clearDataForm()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.Vb(r.a))},e.\u0275cmp=i.Pb({type:e,selectors:[["app-vehicle-type"]],inputs:{setDisableControls:["disableControls","setDisableControls"],setVehicleTypeSelected:["vehicleType","setVehicleTypeSelected"]},outputs:{onVehicleTypeWasModified:"onVehicleTypeWasModified"},decls:7,vars:3,consts:[[3,"formGroup"],["formControlName","cmbType",1,"browser-default","custom-select",3,"change"],[3,"value"],[3,"value",4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(i.bc(0,"form",0),i.bc(1,"label"),i.Mc(2,"Tipo"),i.ac(),i.bc(3,"select",1),i.ic("change",(function(e){return t.setType(e.target)})),i.bc(4,"option",2),i.Mc(5,"Seleccione ..."),i.ac(),i.Lc(6,l,3,4,"option",3),i.ac(),i.ac()),2&e&&(i.uc("formGroup",t.frmVehicleType),i.Jb(4),i.uc("value",0),i.Jb(2),i.uc("ngForOf",t.lsVehicleType))},directives:[a.B,a.r,a.k,a.x,a.q,a.i,a.u,a.A,s.n],pipes:[s.x],styles:["select[_ngcontent-%COMP%]{cursor:pointer}"]}),e}()},"3gT+":function(t,n,a){"use strict";a.r(n),a.d(n,"ItemsAndRoutinesModule",(function(){return ot}));var r=a("ofXK"),s=a("3Pt+"),l=a("Z/wE"),d=a("tyNb"),u=a("uswQ"),h=a("fXoL"),p=a("wZkO"),m=a("Dhb6"),f=a("xch/"),b=a("0x5P"),g=a("fp5r"),y=a("2Xvn"),v=a("97n9"),M=a("9Wwi");function _(e,t){if(1&e&&(h.bc(0,"th"),h.Mc(1),h.ac()),2&e){var n=t.$implicit,i=h.mc();h.Lb(i.getClass(n.shortName)),h.Jb(1),h.Oc(" ",n.shortName," ")}}function x(e,t){if(1&e&&(h.bc(0,"td"),h.bc(1,"label",18),h.Wb(2,"input",19),h.Wb(3,"span",20),h.ac(),h.ac()),2&e){var n=t.$implicit,i=h.mc().$implicit,c=h.mc();h.Lb(c.getClass(n.shortName)),h.Jb(2),h.uc("id",c.getChkId(i.id,n.id))}}function C(e,t){if(1&e&&(h.bc(0,"tr",8),h.bc(1,"td"),h.Mc(2),h.nc(3,"titlecase"),h.nc(4,"slice"),h.ac(),h.Wb(5,"td"),h.Lc(6,x,4,3,"td",14),h.Wb(7,"td"),h.ac()),2&e){var n=t.$implicit,i=h.mc();h.Jb(2),h.Nc(h.oc(3,2,h.qc(4,4,n.name,0,50))),h.Jb(4),h.uc("ngForOf",i.lsFrequency)}}function k(e,t){1&e&&h.Wb(0,"app-img-loading")}var I,O=((I=function(){function e(t,n,i){c(this,e),this.maintenanceRoutineService=t,this.maintenanceItemService=n,this.vehicleService=i,this.lsFrequency=[],this.lsMaintenanceItemsFiltered=[],this.lsMaintenanceItems=[],this.TIPO_MANO_DE_OBRA=2,this.brandSelected=null,this.vehicleTypeSelected=null}return o(e,[{key:"ngOnInit",value:function(){this.initComponents()}},{key:"initComponents",value:function(){var e=this;this.isAwaiting=!0,this.countChanges=0,this.maintenanceRoutineService.getFrequency().subscribe((function(t){e.lsFrequency=t.filter((function(e){return"0"!=e.shortName})),e.isAwaiting=!1})),this.isAwaiting=!0,this.maintenanceItemService.getMaintenanceItems(0).subscribe((function(t){e.lsMaintenanceItems=t,e.lsMaintenanceItemsFiltered=t,e.filterByType(2),e.isAwaiting=!1}))}},{key:"getChkId",value:function(e,t){return"chk_item_".concat(e,"_").concat(t)}},{key:"setBrand",value:function(e){this.clearCheckBoxSelected(),this.brandSelected=e}},{key:"setVehicleType",value:function(e){this.vehicleTypeSelected=e,this.vehicleService.setVehicleModelSelected(null),this.clearCheckBoxSelected(),this.countChanges+=1}},{key:"setVehicleModel",value:function(e){this.getRoutinesByModel(e.id),this.clearCheckBoxSelected()}},{key:"getRoutinesByModel",value:function(e){var t=this;this.isAwaiting=!0,this.maintenanceRoutineService.getMaintenanceRoutineByModel(e).subscribe((function(e){t.lsMaintenanceRoutinesByModel=e,t.checkItemsByRoutines(t.lsMaintenanceRoutinesByModel),t.isAwaiting=!1}))}},{key:"checkItemsByRoutines",value:function(e){var t=this;e.forEach((function(e){try{e.lsItems.forEach((function(n){try{if(n.type.id==t.TIPO_MANO_DE_OBRA){var i=t.getChkId(n.id,e.frequency.id);document.querySelector("#"+i).checked=!0}}catch(c){console.warn(c)}}))}catch(n){console.warn(n)}}))}},{key:"clearCheckBoxSelected",value:function(){var e=this;try{this.lsMaintenanceItems.forEach((function(t){e.lsFrequency.forEach((function(n){if(t.type.id==e.TIPO_MANO_DE_OBRA){var i="#"+e.getChkId(t.id,n.id);document.querySelector(i).checked=!1}}))}))}catch(t){}}},{key:"getClass",value:function(e){return parseInt(e)>50?"col_frequency inactive":"col_frequency active"}},{key:"showOtherRoutines",value:function(){for(var e=document.getElementsByClassName("col_frequency"),t=0;t<e.length;t++)e[t].classList.contains("inactive")?(e[t].classList.remove("inactive"),e[t].classList.add("active")):(e[t].classList.remove("active"),e[t].classList.add("inactive"))}},{key:"filterByType",value:function(e){this.lsMaintenanceItemsFiltered=this.lsMaintenanceItems.filter((function(t){return t.type.id==e}))}}]),e}()).\u0275fac=function(e){return new(e||I)(h.Vb(m.a),h.Vb(f.a),h.Vb(b.a))},I.\u0275cmp=h.Pb({type:I,selectors:[["app-tbl-maintenance-matrix"]],decls:30,vars:7,consts:[[1,"container__filter"],[1,"container__row"],[1,"col"],[3,"brand","onBrandWasSelected"],[3,"vehicleType","onVehicleTypeWasModified"],[3,"brand","vehicleType","VehicleModelWasSelected"],[1,"container__table_matrix"],[1,"table","table-striped"],[1,"row_frequency"],[1,"th-filter"],[1,"form-control",3,"change"],["value","2"],["value","1"],["src","assets/arrow_back.png","alt","arrow_back",1,"arrow","inactive","col_frequency",3,"click"],[3,"class",4,"ngFor","ngForOf"],["src","assets/arrow_next.png","alt","arrow_next",1,"arrow","active","col_frequency",3,"click"],["class","row_frequency",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"container__checkbox"],["type","checkbox","disabled","",3,"id"],[1,"checkmark"]],template:function(e,t){1&e&&(h.bc(0,"div",0),h.bc(1,"div",1),h.bc(2,"div",2),h.bc(3,"app-vehicle-brand",3),h.ic("onBrandWasSelected",(function(e){return t.setBrand(e)})),h.ac(),h.ac(),h.bc(4,"div",2),h.bc(5,"app-vehicle-type",4),h.ic("onVehicleTypeWasModified",(function(e){return t.setVehicleType(e)})),h.ac(),h.ac(),h.bc(6,"div",2),h.bc(7,"app-vehicle-model",5),h.ic("VehicleModelWasSelected",(function(e){return t.setVehicleModel(e)})),h.ac(),h.ac(),h.ac(),h.Wb(8,"br"),h.Wb(9,"hr"),h.Wb(10,"br"),h.ac(),h.bc(11,"div",6),h.bc(12,"table",7),h.bc(13,"thead",8),h.bc(14,"th",9),h.bc(15,"label"),h.Mc(16,"Tipo: "),h.ac(),h.bc(17,"select",10),h.ic("change",(function(e){return t.filterByType(e.target.value)})),h.bc(18,"option",11),h.Mc(19,"Mano de obra"),h.ac(),h.bc(20,"option",12),h.Mc(21,"Repuesto"),h.ac(),h.ac(),h.ac(),h.bc(22,"th"),h.bc(23,"img",13),h.ic("click",(function(){return t.showOtherRoutines()})),h.ac(),h.ac(),h.Lc(24,_,2,3,"th",14),h.bc(25,"th"),h.bc(26,"img",15),h.ic("click",(function(){return t.showOtherRoutines()})),h.ac(),h.ac(),h.ac(),h.bc(27,"tbody"),h.Lc(28,C,8,8,"tr",16),h.ac(),h.ac(),h.ac(),h.Lc(29,k,1,0,"app-img-loading",17)),2&e&&(h.Jb(3),h.uc("brand",t.brandSelected),h.Jb(2),h.uc("vehicleType",t.vehicleTypeSelected),h.Jb(2),h.uc("brand",t.brandSelected)("vehicleType",t.vehicleTypeSelected),h.Jb(17),h.uc("ngForOf",t.lsFrequency),h.Jb(4),h.uc("ngForOf",t.lsMaintenanceItemsFiltered),h.Jb(1),h.uc("ngIf",t.isAwaiting))},directives:[g.a,y.a,v.a,s.u,s.A,r.n,r.o,M.a],pipes:[r.x,r.w],styles:[".container__row[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr 1fr}.container__row[_ngcontent-%COMP%], .row_frequency[_ngcontent-%COMP%]{display:grid;grid-template-rows:1fr}.row_frequency[_ngcontent-%COMP%]{grid-template-columns:52% repeat(13,4%)}.active[_ngcontent-%COMP%]{display:block}.inactive[_ngcontent-%COMP%]{display:none}.button_move[_ngcontent-%COMP%]{cursor:pointer;font-weight:700;color:#3282b8}.arrow[_ngcontent-%COMP%]{width:30px;height:30px;cursor:pointer}.container__filter[_ngcontent-%COMP%]{margin-top:30px}.th-filter[_ngcontent-%COMP%]{display:flex;flex-direction:row;cursor:pointer}.th-filter[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-top:10px;margin-right:30px}.th-filter[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:200px}.container__table_matrix[_ngcontent-%COMP%]{overflow:hidden}",'.container__checkbox[_ngcontent-%COMP%]{display:block;position:relative;padding-left:3px;padding-right:3px;margin-bottom:12px;cursor:pointer;font-size:22px;-webkit-user-select:none;user-select:none}.container__checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;opacity:0;cursor:pointer;height:0;width:0}.checkmark[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:20px;width:20px;background-color:#eee;border:1px solid #686d76;border-radius:5px}.container__checkbox[_ngcontent-%COMP%]:hover   input[_ngcontent-%COMP%] ~ .checkmark[_ngcontent-%COMP%]{background-color:#ccc}.container__checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]{background-color:#81b214;border-radius:50%;border:none}.checkmark[_ngcontent-%COMP%]:after{content:"";position:absolute;display:none}.container__checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]:after{display:block}.container__checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled ~ .checkmark[_ngcontent-%COMP%]{border:1px solid #686d76;border-radius:5px}.container__checkbox[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]:after{left:8px;top:5px;width:5px;height:10px;border:solid #fff;border-width:0 2px 2px 0;transform:rotate(45deg)}']}),I),S=a("930R"),T=a("QgiH"),P=a("PSD3"),w=a.n(P),V=a("0IaG"),F=a("3LUQ");function R(e,t){if(1&e&&(h.bc(0,"option",12),h.Mc(1),h.ac()),2&e){var n=t.$implicit;h.uc("value",n.id),h.Jb(1),h.Oc(" ",n.name," ")}}function D(e,t){if(1&e&&(h.bc(0,"option",12),h.Mc(1),h.ac()),2&e){var n=t.$implicit;h.uc("value",n.id),h.Jb(1),h.Oc(" ",n.longName," ")}}function q(e,t){if(1&e&&(h.bc(0,"option",12),h.Mc(1),h.ac()),2&e){var n=t.$implicit;h.uc("value",n.id),h.Jb(1),h.Oc(" ",n.name," ")}}function B(e,t){if(1&e&&(h.bc(0,"tr"),h.bc(1,"td"),h.Mc(2),h.ac(),h.bc(3,"td"),h.Mc(4),h.ac(),h.bc(5,"td"),h.Mc(6),h.nc(7,"currency"),h.ac(),h.bc(8,"td"),h.bc(9,"select",7),h.bc(10,"option",8),h.Mc(11,"Seleccione..."),h.ac(),h.Lc(12,R,2,2,"option",9),h.ac(),h.ac(),h.bc(13,"td"),h.bc(14,"select",10),h.bc(15,"option",8),h.Mc(16,"Seleccione..."),h.ac(),h.Lc(17,D,2,2,"option",9),h.ac(),h.ac(),h.bc(18,"td"),h.bc(19,"select",11),h.bc(20,"option",8),h.Mc(21,"Seleccione..."),h.ac(),h.Lc(22,q,2,2,"option",9),h.ac(),h.ac(),h.ac()),2&e){var n=t.$implicit,i=h.mc();h.Jb(2),h.Nc(n.code),h.Jb(2),h.Nc(n.name),h.Jb(2),h.Nc(h.oc(7,6,n.price)),h.Jb(6),h.uc("ngForOf",i.types),h.Jb(5),h.uc("ngForOf",i.presentations),h.Jb(5),h.uc("ngForOf",i.categories)}}var W,A=((W=function(){function e(t,n,i,a){c(this,e),this.maintances=t,this.dialogRef=n,this._maintance=i,this._alert=a,this.types=[],this.presentations=[],this.categories=[]}return o(e,[{key:"ngOnInit",value:function(){this.getTypes(),this.getCategories(),this.getPresentations()}},{key:"getTypes",value:function(){var e=this;this._maintance.getTypeOfMaintenanceItem().subscribe((function(t){return e.types=t}))}},{key:"getCategories",value:function(){var e=this;this._maintance.getCategories().subscribe((function(t){return e.categories=t}))}},{key:"getPresentations",value:function(){var e=this;this._maintance.getPresentationUnits().subscribe((function(t){return e.presentations=t}))}},{key:"updateTable",value:function(){var e,t=this,n=null===(e=JSON.parse(sessionStorage.getItem("sessionUser")).company)||void 0===e?void 0:e.id,i=this.getValues(document.getElementsByClassName("categories")),c=this.getValues(document.getElementsByClassName("types")),a=this.getValues(document.getElementsByClassName("presentations")),o=this.maintances.map((function(e,t){return Object.assign(Object.assign({},e),{categoryId:i[t],unitId:a[t],typeId:c[t]})}));this._maintance.updateMaintence({rows:o,brandId:n}).subscribe((function(){t._alert.succes("Articulos de mantemiento cargados con exito"),t.closeDialog()}),(function(e){return t._alert.error(e.error.Message)}))}},{key:"convertToArray",value:function(e){return Array.prototype.slice.call(e)}},{key:"getValues",value:function(e){return this.convertToArray(e).map((function(e){return+e.value}))}},{key:"closeDialog",value:function(){this.dialogRef.close()}}]),e}()).\u0275fac=function(e){return new(e||W)(h.Vb(V.a),h.Vb(V.h),h.Vb(f.a),h.Vb(F.a))},W.\u0275cmp=h.Pb({type:W,selectors:[["app-dialog-load"]],decls:25,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["id","table",1,"table","table-striped"],[4,"ngFor","ngForOf"],["mat-dialog-actions","",1,"d-flex","align-items-center","justify-content-between"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-success",3,"click"],[1,"form-control","types"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-control","presentations"],[1,"form-control","categories"],[3,"value"]],template:function(e,t){1&e&&(h.bc(0,"h1",0),h.Mc(1,"Carga de mantenimientos"),h.ac(),h.bc(2,"div",1),h.bc(3,"table",2),h.bc(4,"thead"),h.bc(5,"tr"),h.bc(6,"th"),h.Mc(7,"Codigo"),h.ac(),h.bc(8,"th"),h.Mc(9,"Nombre"),h.ac(),h.bc(10,"th"),h.Mc(11,"Precio"),h.ac(),h.bc(12,"th"),h.Mc(13,"Tipo"),h.ac(),h.bc(14,"th"),h.Mc(15,"Unidad de presentacion"),h.ac(),h.bc(16,"th"),h.Mc(17,"Categoria"),h.ac(),h.ac(),h.ac(),h.bc(18,"tbody"),h.Lc(19,B,23,8,"tr",3),h.ac(),h.ac(),h.ac(),h.bc(20,"div",4),h.bc(21,"button",5),h.ic("click",(function(){return t.closeDialog()})),h.Mc(22,"Salir"),h.ac(),h.bc(23,"button",6),h.ic("click",(function(){return t.updateTable()})),h.Mc(24,"Aceptar"),h.ac(),h.ac()),2&e&&(h.Jb(19),h.uc("ngForOf",t.maintances))},directives:[V.i,V.f,r.n,V.c,s.u,s.A],pipes:[r.d],styles:[""]}),W),J=a("YOAU"),L=a("woZN");function N(e,t){if(1&e&&(h.bc(0,"option",4),h.Mc(1),h.nc(2,"titlecase"),h.ac()),2&e){var n=t.$implicit;h.uc("value",n.id),h.Jb(1),h.Oc(" ",h.oc(2,2,n.name)," ")}}var U,E=((U=function(){function e(t){c(this,e),this.maintenanceItemService=t,this.lsType=[],this.lostFocus=new h.q,this.chageType=new h.q,this.typeOfItemSelected={},this.frmType=new s.j({cmbType:new s.g("Seleccione ...")})}return o(e,[{key:"ngOnInit",value:function(){this.initComponents()}},{key:"initComponents",value:function(){var e=this;try{this.clearForm(),this.maintenanceItemService.getTypeOfMaintenanceItem().subscribe((function(t){e.lsType=t,null!==e.typeOfItemSelected?(e.setDataInForm(e.typeOfItemSelected),e.setType(e.typeOfItemSelected)):e.clearForm()}))}catch(t){console.error(t.error.Message),w.a.fire({icon:"error",title:"Oops...",text:t.error.Message,footer:"</a>Consulte con Soporte el problema</a>"})}}},{key:"setType",value:function(e){this.typeOfItemSelected=this.lsType.find((function(t){return t.id==e.value})),this.chageType.emit(this.typeOfItemSelected)}},{key:"setDataInForm",value:function(e){this.frmType.controls.cmbType.setValue(null!==e?e.id:1)}},{key:"clearForm",value:function(){this.frmType.controls.cmbType.setValue(0)}},{key:"focusoutType",value:function(){this.lostFocus.emit(this.typeOfItemSelected)}},{key:"setTypeOfItem",set:function(e){e&&(this.typeOfItemSelected=e,null!=this.typeOfItemSelected?(this.setDataInForm(this.typeOfItemSelected),this.chageType.emit(this.typeOfItemSelected)):(this.clearForm(),this.chageType.emit(void 0)))}},{key:"setDisableControls",set:function(e){this.disableControls=e,this.disableControls?this.frmType.disable():this.frmType.enable()}}]),e}()).\u0275fac=function(e){return new(e||U)(h.Vb(f.a))},U.\u0275cmp=h.Pb({type:U,selectors:[["app-type-of-maintenance-item"]],inputs:{setTypeOfItem:["typeOfItem","setTypeOfItem"],setDisableControls:["disableControls","setDisableControls"]},outputs:{lostFocus:"lostFocus",chageType:"chageType"},decls:7,vars:3,consts:[[3,"formGroup"],["formControlName","cmbType",1,"browser-default","custom-select",3,"change","focusout"],["disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(h.bc(0,"form",0),h.bc(1,"label"),h.Mc(2,"Tipo"),h.ac(),h.bc(3,"select",1),h.ic("change",(function(e){return t.setType(e.target)}))("focusout",(function(){return t.focusoutType()})),h.bc(4,"option",2),h.Mc(5,"Seleccione ..."),h.ac(),h.Lc(6,N,3,4,"option",3),h.ac(),h.ac()),2&e&&(h.uc("formGroup",t.frmType),h.Jb(4),h.uc("value",0),h.Jb(2),h.uc("ngForOf",t.lsType))},directives:[s.B,s.r,s.k,s.x,s.q,s.i,s.u,s.A,r.n],pipes:[r.x],styles:["select[_ngcontent-%COMP%]{cursor:pointer}"]}),U),j=a("oOf3"),H=function e(){c(this,e)},z=a("06E+"),$=function e(){c(this,e)},G=a("R7St");function X(e,t){if(1&e&&(h.bc(0,"option",4),h.Mc(1),h.nc(2,"titlecase"),h.ac()),2&e){var n=t.$implicit;h.uc("value",n.id),h.Jb(1),h.Oc(" ",h.oc(2,2,n.longName)," ")}}var K,Y=((K=function(){function e(t){c(this,e),this.maintenanceItemService=t,this.lsPresentationUnit=[],this.lsPresentationUnitFiltered=[],this.lostFocus=new h.q,this.changePresentation=new h.q,this.presentationUnitSelected=null,this.idTypeOfItem=0,this.frmPresentationUnit=new s.j({cmbPresentationUnit:new s.g("Seleccione ...")})}return o(e,[{key:"ngOnInit",value:function(){this.initComponents()}},{key:"initComponents",value:function(){try{this.getPresentationUnits()}catch(e){console.error(e.error.Message),w.a.fire({icon:"error",title:"Oops...",text:e.error.Message,footer:"</a>Consulte con Soporte el problema</a>"})}}},{key:"getPresentationUnits",value:function(){var e=this;try{this.maintenanceItemService.getPresentationUnits().subscribe((function(t){e.lsPresentationUnit=t,0!=e.idTypeOfItem&&(e.filterPresentationsByType(e.idTypeOfItem),null!==e.presentationUnitSelected&&e.setDataInForm(e.presentationUnitSelected))}))}catch(t){}}},{key:"filterPresentationsByType",value:function(e){e&&(this.lsPresentationUnitFiltered=this.lsPresentationUnit.filter(this.idTypeOfItem==z.b.MANO_DE_OBRA?function(e){return e.id===z.a.HORAS}:function(e){return e.id!==z.a.HORAS}))}},{key:"changePresentationUnit",value:function(e){this.presentationUnitSelected=this.lsPresentationUnitFiltered.find((function(t){return t.id==e.target.value})),this.changePresentation.emit(this.presentationUnitSelected)}},{key:"clearForm",value:function(){this.frmPresentationUnit.controls.cmbPresentationUnit.setValue(0)}},{key:"setDataInForm",value:function(e){this.frmPresentationUnit.controls.cmbPresentationUnit.setValue(null!==e?e.id:0)}},{key:"presentationUnitFocusOut",value:function(){this.lostFocus.emit(this.presentationUnitSelected)}},{key:"setPresentationUnit",set:function(e){e&&(this.presentationUnitSelected=e,null!=this.presentationUnitSelected?(this.setDataInForm(this.presentationUnitSelected),this.changePresentation.emit(this.presentationUnitSelected)):(this.clearForm(),this.changePresentation.emit(null)))}},{key:"setIdTypeOfItem",set:function(e){e&&(this.idTypeOfItem=e,0!=this.idTypeOfItem&&null!=this.idTypeOfItem&&this.filterPresentationsByType(this.idTypeOfItem))}},{key:"setDisableControls",set:function(e){this.disableControls=e,this.disableControls?this.frmPresentationUnit.disable():this.frmPresentationUnit.enable()}}]),e}()).\u0275fac=function(e){return new(e||K)(h.Vb(f.a))},K.\u0275cmp=h.Pb({type:K,selectors:[["app-presentation-unit"]],inputs:{setPresentationUnit:["presentationUnit","setPresentationUnit"],setIdTypeOfItem:["idTypeOfItem","setIdTypeOfItem"],setDisableControls:["disableControls","setDisableControls"]},outputs:{lostFocus:"lostFocus",changePresentation:"changePresentation"},decls:7,vars:3,consts:[[3,"formGroup"],["formControlName","cmbPresentationUnit",1,"browser-default","custom-select",3,"change","focusout"],["disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(h.bc(0,"form",0),h.bc(1,"label"),h.Mc(2,"Unidad de presentaci\xf3n"),h.ac(),h.bc(3,"select",1),h.ic("change",(function(e){return t.changePresentationUnit(e)}))("focusout",(function(){return t.presentationUnitFocusOut()})),h.bc(4,"option",2),h.Mc(5,"Seleccione ..."),h.ac(),h.Lc(6,X,3,4,"option",3),h.ac(),h.ac()),2&e&&(h.uc("formGroup",t.frmPresentationUnit),h.Jb(4),h.uc("value",0),h.Jb(2),h.uc("ngForOf",t.lsPresentationUnitFiltered))},directives:[s.B,s.r,s.k,s.x,s.q,s.i,s.u,s.A,r.n],pipes:[r.x],styles:["select[_ngcontent-%COMP%]{cursor:pointer}"]}),K);function Q(e,t){if(1&e&&(h.bc(0,"option",4),h.Mc(1),h.nc(2,"titlecase"),h.ac()),2&e){var n=t.$implicit;h.uc("value",n.id),h.Jb(1),h.Nc(h.oc(2,2,n.name))}}var Z,ee=((Z=function(){function e(t){c(this,e),this.maintenanceItemService=t,this.categorySelected=null,this.changeCategory=new h.q,this.onFocusOut=new h.q,this.frmCategory=new s.j({cmbCategory:new s.g("Seleccione ...")})}return o(e,[{key:"ngOnInit",value:function(){this.initComponents()}},{key:"initComponents",value:function(){var e=this;try{this.maintenanceItemService.getCategories().subscribe((function(t){e.lsCategory=t}))}catch(t){console.error(t)}}},{key:"setCategory",value:function(e){this.categorySelected=this.lsCategory.find((function(t){return t.id==e.value})),this.changeCategory.emit(this.categorySelected)}},{key:"showDataInForm",value:function(e){this.frmCategory.controls.cmbCategory.setValue(null!==e?e.id:0)}},{key:"clearDataForm",value:function(){this.frmCategory.controls.cmbCategory.setValue(0)}},{key:"focusOut",value:function(){this.onFocusOut.emit(this.categorySelected)}},{key:"setCategorySelected",set:function(e){this.categorySelected=e,this.categorySelected?this.showDataInForm(this.categorySelected):this.clearDataForm()}},{key:"setDisableControls",set:function(e){this.disableControls=e,this.disableControls?this.frmCategory.disable():this.frmCategory.enable()}}]),e}()).\u0275fac=function(e){return new(e||Z)(h.Vb(f.a))},Z.\u0275cmp=h.Pb({type:Z,selectors:[["app-maintenance-item-category"]],inputs:{setCategorySelected:["category","setCategorySelected"],setDisableControls:["disableControls","setDisableControls"]},outputs:{changeCategory:"changeCategory",onFocusOut:"onFocusOut"},decls:7,vars:3,consts:[[3,"formGroup"],["formControlName","cmbCategory",1,"browser-default","custom-select",3,"change","focusout"],["disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(h.bc(0,"form",0),h.bc(1,"label"),h.Mc(2,"Categor\xeda"),h.ac(),h.bc(3,"select",1),h.ic("change",(function(e){return t.setCategory(e.target)}))("focusout",(function(){return t.focusOut()})),h.bc(4,"option",2),h.Mc(5,"Seleccione ..."),h.ac(),h.Lc(6,Q,3,4,"option",3),h.ac(),h.ac()),2&e&&(h.uc("formGroup",t.frmCategory),h.Jb(4),h.uc("value",0),h.Jb(2),h.uc("ngForOf",t.lsCategory))},directives:[s.B,s.r,s.k,s.x,s.q,s.i,s.u,s.A,r.n],pipes:[r.x],styles:["select[_ngcontent-%COMP%]{cursor:pointer}"]}),Z);function te(e,t){if(1&e){var n=h.cc();h.bc(0,"div",16),h.bc(1,"label",17),h.bc(2,"input",18),h.ic("click",(function(e){h.Dc(n);var i=t.$implicit;return h.mc(2).AddOrRemoveTaxToList(e,i)})),h.ac(),h.Wb(3,"span",5),h.ac(),h.bc(4,"label",19),h.bc(5,"span",7),h.Mc(6),h.nc(7,"uppercase"),h.ac(),h.ac(),h.ac()}if(2&e){var i=t.$implicit,c=h.mc(2);h.Jb(1),h.uc("for",c.getTaxContainerId(i.id)),h.Jb(1),h.uc("id",c.getTaxContainerId(i.id))("disabled",c.disableControls),h.Jb(2),h.uc("for",c.getTaxContainerId(i.id)),h.Jb(2),h.Nc(h.oc(7,5,i.name))}}function ne(e,t){if(1&e&&(h.bc(0,"div",14),h.Lc(1,te,8,7,"div",15),h.ac()),2&e){var n=h.mc();h.Jb(1),h.uc("ngForOf",n.lsTaxes)}}function ie(e,t){1&e&&(h.bc(0,"div",20),h.bc(1,"span",21),h.Mc(2,"* Debe seleccionar al menos un impuesto"),h.ac(),h.ac())}var ce,ae=((ce=function(){function t(e){c(this,t),this.maintenanceItemService=e,this.taxWasSelected=new h.q,this.modelItemHadleTaxes={},this.prefixTaxContainer="chk_tax_",this.lsTaxesSelected=[],this.taxesAreInvalid=!0}var n,a;return o(t,[{key:"ngOnChanges",value:function(e){try{this.activateTaxes(this.itemHandleTax),this.itemHandleTax&&this.checkTaxButton(this.inpLsTaxSelected)}catch(t){}}},{key:"ngOnInit",value:function(){this.getTaxesList()}},{key:"getTaxesList",value:(a=i(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{this.maintenanceItemService.getTaxesList().subscribe((function(e){t.lsTaxes=e}))}catch(n){}case 1:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"activateTaxes",value:function(e){try{var t=document.querySelector("#chkYes"),n=document.querySelector("#chkNo");this.itemHandleTax=e,e?(t.checked=!0,n.checked=!1,this.modelItemHadleTaxes={handleTaxes:this.itemHandleTax,lsTaxes:this.lsTaxesSelected},this.taxesAreInvalid=!(this.lsTaxesSelected.length>0),this.taxWasSelected.emit(this.modelItemHadleTaxes)):(this.lsTaxesSelected=[],t.checked=!1,n.checked=!0,this.modelItemHadleTaxes={handleTaxes:this.itemHandleTax,lsTaxes:this.lsTaxesSelected},this.taxesAreInvalid=!1,this.taxWasSelected.emit(this.modelItemHadleTaxes))}catch(i){}}},{key:"getTaxContainerId",value:function(e){return"".concat(this.prefixTaxContainer).concat(e)}},{key:"AddOrRemoveTaxToList",value:function(e,t){if(e.target.checked)this.lsTaxesSelected.push(t);else{var n=this.lsTaxesSelected.find((function(e){return e.id==t.id})),i=this.lsTaxesSelected.indexOf(n);this.lsTaxesSelected.splice(i,1)}this.taxesAreInvalid=!(this.lsTaxesSelected.length>0),this.modelItemHadleTaxes={handleTaxes:this.itemHandleTax,lsTaxes:this.lsTaxesSelected},this.taxWasSelected.emit(this.modelItemHadleTaxes)}},{key:"checkTaxButton",value:(n=i(regeneratorRuntime.mark((function t(n){var i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.disableChecks(),t.next=4,setTimeout((function(){if(i.lsTaxesSelected=n,n.length>0){i.taxesAreInvalid=!1;var t,c=e(n);try{for(c.s();!(t=c.n()).done;){var a=t.value,o="#"+i.getTaxContainerId(a.id);document.querySelector(o).checked=!0,i.modelItemHadleTaxes={handleTaxes:i.itemHandleTax,lsTaxes:i.lsTaxesSelected},i.taxWasSelected.emit(i.modelItemHadleTaxes)}}catch(r){c.e(r)}finally{c.f()}}else i.taxesAreInvalid=!0}),100);case 4:t.next=8;break;case 6:t.prev=6,t.t0=t.catch(0);case 8:case"end":return t.stop()}}),t,this,[[0,6]])}))),function(e){return n.apply(this,arguments)})},{key:"disableChecks",value:function(){try{var t,n=e(this.lsTaxes);try{for(n.s();!(t=n.n()).done;){var i=t.value,c="#"+this.getTaxContainerId(i.id);document.querySelector(c).checked=!1}}catch(a){n.e(a)}finally{n.f()}}catch(o){}}},{key:"setDisableControls",set:function(e){this.disableControls=e}}]),t}()).\u0275fac=function(e){return new(e||ce)(h.Vb(f.a))},ce.\u0275cmp=h.Pb({type:ce,selectors:[["app-taxes-list"]],inputs:{itemHandleTax:"itemHandleTax",inpLsTaxSelected:"inpLsTaxSelected",setDisableControls:["disableControls","setDisableControls"]},outputs:{taxWasSelected:"taxWasSelected"},features:[h.Hb],decls:22,vars:4,consts:[[1,"container__content"],[1,"container__handleTax"],[1,"container__input"],["for","chkYes",1,"container__checkbox"],["type","checkbox","id","chkYes",3,"disabled","click"],[1,"checkmark"],["for","chkYes"],[1,"tax-description"],["for","chkNo",1,"container__checkbox"],["type","checkbox","id","chkNo",3,"disabled","click"],["for","chkNo"],[1,"container__taxes"],["class","row__container_tax",4,"ngIf"],["class","container-error",4,"ngIf"],[1,"row__container_tax"],["class","container__tax",4,"ngFor","ngForOf"],[1,"container__tax"],[1,"container__checkbox",3,"for"],["type","checkbox",3,"id","disabled","click"],[3,"for"],[1,"container-error"],[1,"error"]],template:function(e,t){1&e&&(h.bc(0,"div",0),h.bc(1,"div"),h.bc(2,"h6"),h.Mc(3,"\xbfManeja impuestos?"),h.ac(),h.ac(),h.bc(4,"div",1),h.bc(5,"div",2),h.bc(6,"label",3),h.bc(7,"input",4),h.ic("click",(function(){return t.activateTaxes(!0)})),h.ac(),h.Wb(8,"span",5),h.ac(),h.bc(9,"label",6),h.bc(10,"span",7),h.Mc(11,"Si"),h.ac(),h.ac(),h.ac(),h.bc(12,"div",2),h.bc(13,"label",8),h.bc(14,"input",9),h.ic("click",(function(){return t.activateTaxes(!1)})),h.ac(),h.Wb(15,"span",5),h.ac(),h.bc(16,"label",10),h.bc(17,"span",7),h.Mc(18,"No"),h.ac(),h.ac(),h.ac(),h.ac(),h.bc(19,"div",11),h.Lc(20,ne,2,1,"div",12),h.ac(),h.Lc(21,ie,3,0,"div",13),h.ac()),2&e&&(h.Jb(7),h.uc("disabled",t.disableControls),h.Jb(7),h.uc("disabled",t.disableControls),h.Jb(6),h.uc("ngIf",t.itemHandleTax),h.Jb(1),h.uc("ngIf",t.taxesAreInvalid))},directives:[r.o,r.n],pipes:[r.y],styles:[".container__content[_ngcontent-%COMP%]{margin-left:20px}.container__handleTax[_ngcontent-%COMP%], .container__taxes[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start}.container__taxes[_ngcontent-%COMP%]{border-left:1px solid #ccc;margin-left:20px;padding-left:10px}.container__input[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:70px}.container__input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{cursor:pointer}.tax-description[_ngcontent-%COMP%]{cursor:pointer;margin-left:25px}.error[_ngcontent-%COMP%]{color:red}",'.container__checkbox[_ngcontent-%COMP%]{display:block;position:relative;padding-left:3px;padding-right:3px;margin-bottom:12px;cursor:pointer;font-size:22px;-webkit-user-select:none;user-select:none}.container__checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;opacity:0;cursor:pointer;height:0;width:0}.checkmark[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:20px;width:20px;background-color:#eee;border:1px solid #686d76;border-radius:5px}.container__checkbox[_ngcontent-%COMP%]:hover   input[_ngcontent-%COMP%] ~ .checkmark[_ngcontent-%COMP%]{background-color:#ccc}.container__checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]{background-color:#81b214;border-radius:50%;border:none}.checkmark[_ngcontent-%COMP%]:after{content:"";position:absolute;display:none}.container__checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]:after{display:block}.container__checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled ~ .checkmark[_ngcontent-%COMP%]{border:1px solid #686d76;border-radius:5px}.container__checkbox[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]:after{left:8px;top:5px;width:5px;height:10px;border:solid #fff;border-width:0 2px 2px 0;transform:rotate(45deg)}']}),ce);function oe(e,t){if(1&e){var n=h.cc();h.bc(0,"div",3),h.bc(1,"label",4),h.bc(2,"input",5),h.ic("click",(function(e){h.Dc(n);var i=t.$implicit;return h.mc().setVehicleType(e.target,i)})),h.ac(),h.Wb(3,"span",6),h.ac(),h.bc(4,"label",7),h.Mc(5),h.ac(),h.ac()}if(2&e){var i=t.$implicit,c=h.mc();h.Jb(1),h.uc("for",c.getIdChk(i.id)),h.Jb(1),h.uc("id",c.getIdChk(i.id))("disabled",c.disableControls),h.Jb(2),h.uc("for",c.getIdChk(i.id)),h.Jb(1),h.Oc(" ",i.name," ")}}function re(e,t){1&e&&(h.bc(0,"div"),h.bc(1,"span",8),h.Mc(2,"* Debe seleccionar al menos un tipo de veh\xedculo"),h.ac(),h.ac())}var se,le=((se=function(){function e(t){c(this,e),this.vehicleService=t,this.lsVehicleTypeSelected=[],this.lsVehicleTypes=[],this.onVehicleTypeWasSelected=new h.q,this.noItemSelected=!1,this.disableChecks=!1,this.disableControls=!1,this.disableChecks=!1,this.noItemSelected=!1,this.lsVehicleTypeSelected=[]}return o(e,[{key:"ngOnInit",value:function(){this.lsVehicleTypeSelected=[],this.getVehicleTypes()}},{key:"getVehicleTypes",value:function(){var e=this;this.vehicleService.getVehicleTypes().subscribe((function(t){e.lsVehicleTypes=t}))}},{key:"getIdChk",value:function(e){return"chk_vehicleType_"+e}},{key:"setVehicleType",value:function(e,t){if(e.checked)null==this.lsVehicleTypeSelected&&null==this.lsVehicleTypeSelected&&(this.lsVehicleTypeSelected=[]),this.lsVehicleTypeSelected.push(t);else{var n=this.lsVehicleTypeSelected.find((function(e){return e.id==t.id})),i=this.lsVehicleTypeSelected.indexOf(n);-1!=i&&this.lsVehicleTypeSelected.splice(i,1)}this.toogleError(this.lsVehicleTypeSelected),this.onVehicleTypeWasSelected.emit(this.lsVehicleTypeSelected)}},{key:"toogleError",value:function(e){this.noItemSelected=!(e.length>0)}},{key:"showDataInForm",value:function(e){var t=this;try{e.forEach((function(e){var n="#"+t.getIdChk(e.id);document.querySelector(n).checked=!0}))}catch(n){}}},{key:"clearDataForm",value:function(){var e=this;try{this.lsVehicleTypes.forEach((function(t){var n="#"+e.getIdChk(t.id);document.querySelector(n).checked=!1}))}catch(t){}}},{key:"toggleChecks",value:function(){var e=this;try{this.lsVehicleTypes.forEach((function(t){var n="#"+e.getIdChk(t.id);document.querySelector(n).disabled=e.disableChecks}))}catch(t){}}},{key:"setVehicleTypesSelected",set:function(e){this.lsVehicleTypeSelected=null!=e?e:[],this.lsVehicleTypeSelected.length>0?this.showDataInForm(this.lsVehicleTypeSelected):this.clearDataForm(),this.toogleError(this.lsVehicleTypeSelected),this.onVehicleTypeWasSelected.emit(this.lsVehicleTypeSelected)}},{key:"setDisableChecks",set:function(e){this.disableChecks=e,this.disableChecks&&this.toggleChecks()}},{key:"setDisableControls",set:function(e){this.disableControls=e}}]),e}()).\u0275fac=function(e){return new(e||se)(h.Vb(b.a))},se.\u0275cmp=h.Pb({type:se,selectors:[["app-check-list-vehicle-type"]],inputs:{setVehicleTypesSelected:["lsTypes","setVehicleTypesSelected"],setDisableChecks:["disableChecks","setDisableChecks"],setDisableControls:["disableControls","setDisableControls"]},outputs:{onVehicleTypeWasSelected:"onVehicleTypeWasSelected"},decls:5,vars:2,consts:[[1,"container__row"],["class","container__type",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"container__type"],[1,"container__checkbox",3,"for"],["type","checkbox",3,"id","disabled","click"],[1,"checkmark"],[1,"lbl-description",3,"for"],[1,"error"]],template:function(e,t){1&e&&(h.bc(0,"p"),h.Mc(1,"Tipo de veh\xedculo"),h.ac(),h.bc(2,"div",0),h.Lc(3,oe,6,5,"div",1),h.ac(),h.Lc(4,re,3,0,"div",2)),2&e&&(h.Jb(3),h.uc("ngForOf",t.lsVehicleTypes),h.Jb(1),h.uc("ngIf",t.noItemSelected))},directives:[r.n,r.o],styles:[".container__row[_ngcontent-%COMP%]{display:flex;flex-direction:row}.container__type[_ngcontent-%COMP%]{display:grid;grid-template-columns:25px 1fr;grid-template-rows:1fr;cursor:pointer;padding:10px 5px;margin-left:10px;width:120px}.container__type[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-left:5px;cursor:pointer}.container__type[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{cursor:pointer}.error[_ngcontent-%COMP%]{color:red}",'.container__checkbox[_ngcontent-%COMP%]{display:block;position:relative;padding-left:3px;padding-right:3px;margin-bottom:12px;cursor:pointer;font-size:22px;-webkit-user-select:none;user-select:none}.container__checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;opacity:0;cursor:pointer;height:0;width:0}.checkmark[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:20px;width:20px;background-color:#eee;border:1px solid #686d76;border-radius:5px}.container__checkbox[_ngcontent-%COMP%]:hover   input[_ngcontent-%COMP%] ~ .checkmark[_ngcontent-%COMP%]{background-color:#ccc}.container__checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]{background-color:#81b214;border-radius:50%;border:none}.checkmark[_ngcontent-%COMP%]:after{content:"";position:absolute;display:none}.container__checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]:after{display:block}.container__checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled ~ .checkmark[_ngcontent-%COMP%]{border:1px solid #686d76;border-radius:5px}.container__checkbox[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]:after{left:8px;top:5px;width:5px;height:10px;border:solid #fff;border-width:0 2px 2px 0;transform:rotate(45deg)}']}),se),de=a("xRBo");function ue(e,t){1&e&&(h.bc(0,"p"),h.Mc(1," * El campo c\xf3digo es requerido "),h.ac())}function he(e,t){if(1&e&&(h.bc(0,"div",30),h.Lc(1,ue,2,0,"p",31),h.ac()),2&e){var n=h.mc();h.Jb(1),h.uc("ngIf",n.fieldCode.hasError("required"))}}function pe(e,t){1&e&&(h.bc(0,"p"),h.Mc(1," * El campo nombre es requerido "),h.ac())}function me(e,t){if(1&e&&(h.bc(0,"div",30),h.Lc(1,pe,2,0,"p",31),h.ac()),2&e){var n=h.mc();h.Jb(1),h.uc("ngIf",n.fieldName.hasError("required"))}}function fe(e,t){1&e&&(h.bc(0,"div",30),h.bc(1,"p"),h.Mc(2,"* El campo tipo es requerido"),h.ac(),h.ac())}function be(e,t){1&e&&(h.bc(0,"div",30),h.bc(1,"p"),h.Mc(2,"* El campo unidad de presentaci\xf3n es requerido"),h.ac(),h.ac())}function ge(e,t){1&e&&(h.bc(0,"p"),h.Mc(1," * El campo valor sin impuesto es requerido "),h.ac())}function ye(e,t){1&e&&(h.bc(0,"p"),h.Mc(1," * El campo valor no puede tener un valor inferior a 1 "),h.ac())}function ve(e,t){if(1&e&&(h.bc(0,"div",30),h.Lc(1,ge,2,0,"p",31),h.Lc(2,ye,2,0,"p",31),h.ac()),2&e){var n=h.mc();h.Jb(1),h.uc("ngIf",n.fieldReferencePrice.hasError("required")),h.Jb(1),h.uc("ngIf",n.fieldReferencePrice.hasError("min"))}}function Me(e,t){if(1&e&&(h.bc(0,"button",32),h.Mc(1," Guardar "),h.ac()),2&e){var n=h.mc();h.uc("disabled",n.frmMaintenanceItem.invalid||n.presentationUnitIsInvalid||n.typeIsInvalid||n.vehicleTypeIsValid||n.taxesAreInvalid)}}function _e(e,t){1&e&&(h.bc(0,"div",33),h.bc(1,"span"),h.Mc(2,"No se puede guardar el item de mantenimiento debido a que el formulario no cumple con los datos requeridos"),h.ac(),h.ac())}var xe,Ce=((xe=function(){function e(t,n,i){c(this,e),this.maintenanceItemService=t,this.vehicleService=n,this.formBuilder=i,this.itemToUpdate=new $,this.lsTaxesSelected=[],this.maintenanceItemWasSetted=new h.q,this.maintenanceItemWasCanceled=new h.q,this.sharedFunction=new G.a,this.brandChevrolet=1,this.itemAndTaxes={},this.presentationUnit={},this.maintenanceItem=new $,this.lsVehicleTypes=[],this.lsVehicleModels=[],this.disableControls=!1,this.brandSelected=null,this.buildFormMaintenanceItem(),this.item=new $,this.itemHandleTax=!1,this.lsTaxesSelected=[],this.presentationUnitIsInvalid=!1,this.typeIsInvalid=!1,this.vehicleTypeIsValid=!1,this.taxesAreInvalid=!1,this.typeOfItem=null,this.presentationUnit=null,this.category=null,this.idType=0,this.amountChangesVehicleType=0}var t;return o(e,[{key:"ngOnDestroy",value:function(){this.clearDataForm()}},{key:"buildFormMaintenanceItem",value:function(){this.sharedFunction=new G.a,this.frmMaintenanceItem=this.formBuilder.group({code:["",[s.z.required]],name:["",[s.z.required]],description:[""],referencePrice:[1,[s.z.required,s.z.min(1)]]})}},{key:"ngOnInit",value:function(){this.initComponents()}},{key:"initComponents",value:(t=i(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.itemHandleTax=!1;case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"setDataMaintenanceItem",value:function(e){e.preventDefault(),this.item=this.setDataToItem(),this.maintenanceItemService.setItem(this.item),this.maintenanceItemWasSetted.emit(!0)}},{key:"setDataToItem",value:function(){try{var e=new $;return e=this.frmMaintenanceItem.value,null!=this.maintenanceItem&&(e.id=this.maintenanceItem.id),this.lsTaxesSelected.length>0?(e.handleTax=!0,e.lsTaxes=this.lsTaxesSelected):(e.handleTax=!1,e.lsTaxes=[]),e.presentationUnit=this.presentationUnit,e.type=this.typeOfItem,e.category=this.category,e.lsVehicleType=null!=this.vehicleService.getListVehicleTypeSelected()?this.vehicleService.getListVehicleTypeSelected():[],e.lsVehicleModel=null!=this.vehicleService.getListVehicleModelsSelected()?this.vehicleService.getListVehicleModelsSelected():[],e}catch(t){console.warn(t)}}},{key:"setDataInForm",value:function(e){this.frmMaintenanceItem.patchValue(e),this.typeOfItem=e.type,this.category=e.category;var t=new H;this.idType=e.type.id,this.presentationUnit=e.presentationUnit,e.lsVehicleModel.length>0&&null!=e.lsVehicleModel[0].brand&&null!=e.lsVehicleModel[0].brand?t=e.lsVehicleModel[0].brand:(t.id=1,t.name="CHEVROLET"),this.brandSelected=t,e.handleTax?(this.itemHandleTax=!0,this.lsTaxesSelected=e.lsTaxes,this.itemAndTaxes={handleTaxes:this.itemHandleTax,lsTaxes:this.lsTaxesSelected},this.calculateTaxesByItem(this.itemAndTaxes)):(this.itemHandleTax=!1,this.lsTaxesSelected=[],this.itemAndTaxes={handleTaxes:this.itemHandleTax,lsTaxes:this.lsTaxesSelected},this.calculateTaxesByItem(this.itemAndTaxes)),this.vehicleService.setListVehicleTypeSelected(e.lsVehicleType),this.vehicleService.setListVehicleModelsSelected(e.lsVehicleModel)}},{key:"clearDataForm",value:function(){this.frmMaintenanceItem.reset(),this.lsTaxesSelected=[],this.presentationUnit=null,this.typeOfItem=null,this.category=null,this.idType=z.b.REPUESTO,this.itemHandleTax=!1,this.lsTaxesSelected=[];var e=document.querySelector("#taxesValue"),t=document.querySelector("#totalValue");e.value="",t.value="",this.maintenanceItem=null,this.lsVehicleTypes=[],this.lsVehicleModels=[]}},{key:"comeBack",value:function(){this.clearDataForm(),this.maintenanceItemWasCanceled.emit(!0)}},{key:"setBrand",value:function(e){this.brandSelected=e}},{key:"setVehiclType",value:function(){this.countChanges+=1}},{key:"setListVehicleTypes",value:function(e){this.lsVehicleTypes=e,this.vehicleTypeIsValid=0==(null!=this.lsVehicleTypes?this.lsVehicleTypes.length:0),this.amountChangesVehicleType++}},{key:"setLisVehicleModels",value:function(e){this.lsVehicleModels=e}},{key:"calculateTaxesByItem",value:function(e){var t=0;if(e.handleTaxes){var n=document.querySelector("#taxesValue"),i=document.querySelector("#totalValue");this.lsTaxesSelected=e.lsTaxes;var c=this.frmMaintenanceItem.controls.referencePrice;this.taxesAreInvalid=!(this.lsTaxesSelected.length>0);var a=null!=c.value?c.value:0;t=this.maintenanceItemService.calculateTaxes(a,this.lsTaxesSelected),n.value=t.toString();var o=this.maintenanceItemService.calculateTotalByItem(a,0,t);i.value=o.toString()}else this.taxesAreInvalid=!1;return t}},{key:"validatePresentationUnit",value:function(e){null==e||null==e?this.presentationUnitIsInvalid=!0:(this.presentationUnitIsInvalid=!1,this.presentationUnit=e)}},{key:"validateTypeOfMaintenanceItem",value:function(e){try{null==e||null==e?this.typeIsInvalid=!0:(this.typeIsInvalid=!1,this.typeOfItem=e)}catch(t){console.warn(t)}}},{key:"setTypeOfItem",value:function(e){e&&(this.typeOfItem=e,this.idType=this.typeOfItem.id)}},{key:"setPresentationUnit",value:function(e){e&&(this.presentationUnit=e)}},{key:"setCategory",value:function(e){this.category=e}},{key:"setMaintenanceItem",set:function(e){console.log(e),this.maintenanceItem=e,this.maintenanceItem&&(this.lsVehicleTypes=e.lsVehicleType,this.lsVehicleModels=e.lsVehicleModel,this.setDataInForm(this.maintenanceItem))}},{key:"setDisableControls",set:function(e){this.disableControls=e,this.disableControls?this.frmMaintenanceItem.disable():this.frmMaintenanceItem.enable()}},{key:"fieldCode",get:function(){return this.frmMaintenanceItem.get("code")}},{key:"fieldName",get:function(){return this.frmMaintenanceItem.get("name")}},{key:"fieldReferencePrice",get:function(){return this.frmMaintenanceItem.get("referencePrice")}}]),e}()).\u0275fac=function(e){return new(e||xe)(h.Vb(f.a),h.Vb(b.a),h.Vb(s.f))},xe.\u0275cmp=h.Pb({type:xe,selectors:[["app-maintenance-item"]],inputs:{countChanges:"countChanges",setMaintenanceItem:["maintenanceItem","setMaintenanceItem"],setDisableControls:["disableControls","setDisableControls"]},outputs:{maintenanceItemWasSetted:"maintenanceItemWasSetted",maintenanceItemWasCanceled:"maintenanceItemWasCanceled"},decls:70,vars:25,consts:[[1,"container-item"],[3,"formGroup","ngSubmit"],[1,"card"],["id","container__header",1,"card-header"],[1,"container__buttonClose"],[3,"click"],[1,"fas","fa-times"],[1,"card-body"],["id","container__maintenanceItem"],[1,"row__container"],[1,"col"],["type","text","formControlName","code","placeholder","C\xf3digo ...",1,"form-control"],["class","error",4,"ngIf"],["type","text","formControlName","name","placeholder","Nombre ...",1,"form-control"],["type","text","formControlName","description","placeholder","Descripci\xf3n ...",1,"form-control"],[3,"disableControls","typeOfItem","chageType","lostFocus"],[3,"disableControls","idTypeOfItem","presentationUnit","changePresentation","lostFocus"],[3,"disableControls","category","changeCategory","onFocusOut"],["type","number","formControlName","referencePrice","placeholder","Valor sin impuestos ...",1,"form-control",3,"input"],["type","number","id","taxesValue","placeholder","Valor impuestos ...","disabled","",1,"form-control"],["type","number","id","totalValue","placeholder","Valor con impuestos ...","disabled","",1,"form-control"],[3,"disableControls","itemHandleTax","inpLsTaxSelected","taxWasSelected"],[3,"defaultBrandId","brand","disableControls","onBrandWasSelected"],[1,"container__groups"],[3,"disableControls","lsTypes","onVehicleTypeWasSelected"],[3,"disableControls","lsVehicleModelsSelected","onVehicleModelsWasSetted"],["id","container__buttons",1,"buttons__container"],["type","button",1,"btn","btn-danger",3,"click"],["type","submit","class","btn btn-success",3,"disabled",4,"ngIf"],["class","container__infoError","id","cont_error_add_maintenance_item",4,"ngIf"],[1,"error"],[4,"ngIf"],["type","submit",1,"btn","btn-success",3,"disabled"],["id","cont_error_add_maintenance_item",1,"container__infoError"]],template:function(e,t){1&e&&(h.bc(0,"div",0),h.bc(1,"form",1),h.ic("ngSubmit",(function(e){return t.setDataMaintenanceItem(e)})),h.bc(2,"div",2),h.bc(3,"div",3),h.bc(4,"legend"),h.Mc(5,"Datos del art\xedculo de mantenimiento"),h.ac(),h.bc(6,"div",4),h.bc(7,"a",5),h.ic("click",(function(){return t.comeBack()})),h.Wb(8,"i",6),h.ac(),h.ac(),h.ac(),h.bc(9,"div",7),h.bc(10,"div",8),h.bc(11,"div",9),h.bc(12,"div",10),h.bc(13,"label"),h.Mc(14,"C\xf3digo"),h.ac(),h.Wb(15,"input",11),h.Lc(16,he,2,1,"div",12),h.ac(),h.bc(17,"div",10),h.bc(18,"label"),h.Mc(19,"Nombre"),h.ac(),h.Wb(20,"input",13),h.Lc(21,me,2,1,"div",12),h.ac(),h.bc(22,"div",10),h.bc(23,"label"),h.Mc(24,"Descripci\xf3n"),h.ac(),h.Wb(25,"input",14),h.ac(),h.ac(),h.bc(26,"div",9),h.bc(27,"div",10),h.bc(28,"app-type-of-maintenance-item",15),h.ic("chageType",(function(e){return t.setTypeOfItem(e)}))("lostFocus",(function(e){return t.validateTypeOfMaintenanceItem(e)})),h.ac(),h.Lc(29,fe,3,0,"div",12),h.ac(),h.bc(30,"div",10),h.bc(31,"app-presentation-unit",16),h.ic("changePresentation",(function(e){return t.setPresentationUnit(e)}))("lostFocus",(function(e){return t.validatePresentationUnit(e)})),h.ac(),h.Lc(32,be,3,0,"div",12),h.ac(),h.bc(33,"div",10),h.bc(34,"app-maintenance-item-category",17),h.ic("changeCategory",(function(e){return t.setCategory(e)}))("onFocusOut",(function(e){return t.setCategory(e)})),h.ac(),h.ac(),h.ac(),h.Wb(35,"hr"),h.bc(36,"div",9),h.bc(37,"div",10),h.bc(38,"label"),h.Mc(39,"Valor sin impuestos"),h.ac(),h.bc(40,"input",18),h.ic("input",(function(){return t.calculateTaxesByItem(t.itemAndTaxes)})),h.ac(),h.Lc(41,ve,3,2,"div",12),h.ac(),h.bc(42,"div",10),h.bc(43,"label"),h.Mc(44,"Valor Impuestos"),h.ac(),h.Wb(45,"input",19),h.ac(),h.bc(46,"div",10),h.bc(47,"label"),h.Mc(48,"Valor Total"),h.ac(),h.Wb(49,"input",20),h.ac(),h.ac(),h.bc(50,"div"),h.bc(51,"app-taxes-list",21),h.ic("taxWasSelected",(function(e){return t.calculateTaxesByItem(e)})),h.ac(),h.ac(),h.Wb(52,"hr"),h.bc(53,"div",9),h.bc(54,"div",10),h.bc(55,"app-vehicle-brand",22),h.ic("onBrandWasSelected",(function(e){return t.setBrand(e)})),h.ac(),h.ac(),h.bc(56,"div",10),h.bc(57,"div",23),h.bc(58,"app-check-list-vehicle-type",24),h.ic("onVehicleTypeWasSelected",(function(e){return t.setListVehicleTypes(e)})),h.ac(),h.ac(),h.ac(),h.ac(),h.Wb(59,"hr"),h.Wb(60,"hr"),h.bc(61,"div",23),h.bc(62,"app-check-list-vehicle-model",25),h.ic("onVehicleModelsWasSetted",(function(e){return t.setLisVehicleModels(e)})),h.ac(),h.ac(),h.Wb(63,"hr"),h.bc(64,"div",26),h.bc(65,"button",27),h.ic("click",(function(){return t.comeBack()})),h.Mc(66," Cancelar "),h.ac(),h.Lc(67,Me,2,1,"button",28),h.ac(),h.bc(68,"div"),h.Lc(69,_e,3,0,"div",29),h.ac(),h.ac(),h.ac(),h.ac(),h.ac(),h.ac()),2&e&&(h.Jb(1),h.uc("formGroup",t.frmMaintenanceItem),h.Jb(15),h.uc("ngIf",(t.fieldCode.dirty||t.fieldCode.touched)&&t.fieldCode.invalid),h.Jb(5),h.uc("ngIf",(t.fieldName.dirty||t.fieldName.touched)&&t.fieldName.invalid),h.Jb(7),h.uc("disableControls",t.disableControls)("typeOfItem",t.typeOfItem),h.Jb(1),h.uc("ngIf",t.typeIsInvalid),h.Jb(2),h.uc("disableControls",t.disableControls)("idTypeOfItem",t.idType)("presentationUnit",t.presentationUnit),h.Jb(1),h.uc("ngIf",t.presentationUnitIsInvalid),h.Jb(2),h.uc("disableControls",t.disableControls)("category",t.category),h.Jb(7),h.uc("ngIf",(t.fieldReferencePrice.dirty||t.fieldReferencePrice.touched)&&t.fieldReferencePrice.invalid),h.Jb(10),h.uc("disableControls",t.disableControls)("itemHandleTax",t.itemHandleTax)("inpLsTaxSelected",t.lsTaxesSelected),h.Jb(4),h.uc("defaultBrandId",t.brandChevrolet)("brand",t.brandSelected)("disableControls",t.disableControls),h.Jb(3),h.uc("disableControls",t.disableControls)("lsTypes",t.lsVehicleTypes),h.Jb(4),h.uc("disableControls",t.disableControls)("lsVehicleModelsSelected",t.lsVehicleModels),h.Jb(5),h.uc("ngIf",!t.disableControls),h.Jb(2),h.uc("ngIf",t.frmMaintenanceItem.invalid||t.presentationUnitIsInvalid||t.typeIsInvalid||t.vehicleTypeIsValid||t.taxesAreInvalid))},directives:[s.B,s.r,s.k,s.c,s.q,s.i,r.o,E,Y,ee,s.v,ae,g.a,le,de.a],styles:['.container-item[_ngcontent-%COMP%]{margin-top:30px}.row__container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:1fr;margin-top:10px;margin-bottom:20px}.buttons__container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}legend[_ngcontent-%COMP%]{margin-bottom:10px}button[_ngcontent-%COMP%], legend[_ngcontent-%COMP%]{margin-left:10px}button[_ngcontent-%COMP%]{width:250px;margin-top:20px}.container__groups[_ngcontent-%COMP%]{margin-left:10px}#container__header[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}label[_ngcontent-%COMP%]{cursor:pointer}.container__buttonClose[_ngcontent-%COMP%]{margin-top:10px}@media only screen and (max-width:600px){form[_ngcontent-%COMP%]{padding:30px 20px}.row__container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr 1fr 1fr;margin-top:0;margin-bottom:0}.col[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px}button[_ngcontent-%COMP%]{width:150px}}.tax-description[_ngcontent-%COMP%]{margin-left:25px}.container_handle_taxes[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start}.container__check[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;width:60px}.row__container_tax[_ngcontent-%COMP%]{display:flex;flex-direction:row;padding-left:10px}.container__tax[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;padding:2px 5px;margin-left:10px;width:auto}.error[_ngcontent-%COMP%]{color:red;margin-top:10px}.container__infoError[_ngcontent-%COMP%]:before{position:absolute;content:"";display:block;width:0;height:0;left:50%;margin-left:-10px;margin-top:-30px;border:10px solid transparent;border-bottom-color:#ebd4d4}.container__infoError[_ngcontent-%COMP%]{background-color:#ebd4d4;cursor:pointer;position:absolute;padding:10px 15px;z-index:50;width:200px;height:auto;border-radius:20px;right:3%;margin-top:30px;box-shadow:10px 10px 17px -7px rgba(0,0,0,.75)}',"select[_ngcontent-%COMP%]{cursor:pointer}.container__row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:1fr}i[_ngcontent-%COMP%]{margin:0 3px;cursor:pointer}.col-number[_ngcontent-%COMP%]{max-width:50px;width:50px}.btn-add[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{cursor:pointer}.btn-add[_ngcontent-%COMP%]{border-radius:50%;width:50px;height:50px;position:relative;left:93%;margin-bottom:20px;top:30px;outline:none;text-align:center;font-size:24px;border:none;z-index:55}#container__content[_ngcontent-%COMP%]{transition:margin-left 1s;padding:20px;margin-left:250px}.container__row_buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;justify-content:right;margin-top:30px}.container__row_buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px}.overlay[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3fr);grid-template-rows:repeat(3fr);position:fixed;left:0;right:0;top:0;bottom:0;background-color:rgba(6,129,230,.1);border-radius:15px;align-items:center;justify-items:center;z-index:5000;width:100%;height:100%}.container__buttonClose[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;margin-bottom:20px}@media only screen and (max-width:600px){.col-mobile-hide[_ngcontent-%COMP%]{display:none}.btn-add[_ngcontent-%COMP%]{left:80vw}}",'.container__checkbox[_ngcontent-%COMP%]{display:block;position:relative;padding-left:3px;padding-right:3px;margin-bottom:12px;cursor:pointer;font-size:22px;-webkit-user-select:none;user-select:none}.container__checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;opacity:0;cursor:pointer;height:0;width:0}.checkmark[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:20px;width:20px;background-color:#eee;border:1px solid #686d76;border-radius:5px}.container__checkbox[_ngcontent-%COMP%]:hover   input[_ngcontent-%COMP%] ~ .checkmark[_ngcontent-%COMP%]{background-color:#ccc}.container__checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]{background-color:#81b214;border-radius:50%;border:none}.checkmark[_ngcontent-%COMP%]:after{content:"";position:absolute;display:none}.container__checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]:after{display:block}.container__checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled ~ .checkmark[_ngcontent-%COMP%]{border:1px solid #686d76;border-radius:5px}.container__checkbox[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]:after{left:8px;top:5px;width:5px;height:10px;border:solid #fff;border-width:0 2px 2px 0;transform:rotate(45deg)}']}),xe);function ke(e,t){if(1&e){var n=h.cc();h.bc(0,"tr"),h.bc(1,"td"),h.Mc(2),h.ac(),h.bc(3,"td"),h.Mc(4),h.ac(),h.bc(5,"td"),h.Mc(6),h.nc(7,"slice"),h.nc(8,"titlecase"),h.ac(),h.bc(9,"td"),h.Mc(10),h.nc(11,"titlecase"),h.ac(),h.bc(12,"td"),h.Mc(13),h.nc(14,"titlecase"),h.ac(),h.bc(15,"td"),h.Mc(16),h.nc(17,"currency"),h.ac(),h.bc(18,"td"),h.Mc(19),h.nc(20,"currency"),h.nc(21,"calculateTaxes"),h.ac(),h.bc(22,"td"),h.Mc(23),h.nc(24,"currency"),h.nc(25,"calculateTotalPrice"),h.ac(),h.bc(26,"td"),h.bc(27,"i",20),h.ic("click",(function(){h.Dc(n);var e=t.$implicit;return h.mc(2).seeDetailsMaintenanceItem(e)})),h.ac(),h.bc(28,"i",21),h.ic("click",(function(){h.Dc(n);var e=t.$implicit;return h.mc(2).updateMaintenanceItem(e)})),h.ac(),h.bc(29,"i",22),h.ic("click",(function(){h.Dc(n);var e=t.$implicit;return h.mc(2).deleteMaintenanceItem(e)})),h.ac(),h.ac(),h.ac()}if(2&e){var i=t.index,c=t.$implicit;h.Jb(2),h.Nc(i+1),h.Jb(2),h.Nc(c.code),h.Jb(2),h.Nc(h.qc(7,8,h.oc(8,12,c.name),0,50)),h.Jb(4),h.Nc(h.oc(11,14,c.type.name)),h.Jb(3),h.Nc(h.oc(14,16,c.presentationUnit.longName)),h.Jb(3),h.Nc(h.rc(17,18,c.referencePrice,"USD","symbol","1.0-0")),h.Jb(3),h.Oc(" ",h.rc(20,23,h.qc(21,28,c,c.referencePrice,1),"USD","symbol","1.0-0")," "),h.Jb(4),h.Oc(" ",h.rc(24,32,h.qc(25,37,c,c.referencePrice,1),"USD","symbol","1.0-0")," ")}}var Ie=function(e){return{itemsPerPage:100,currentPage:e}};function Oe(e,t){if(1&e){var n=h.cc();h.bc(0,"div",2),h.bc(1,"div",3),h.bc(2,"div"),h.bc(3,"app-type-of-maintenance-item",4),h.ic("chageType",(function(e){return h.Dc(n),h.mc().filterItems(e)})),h.ac(),h.ac(),h.bc(4,"div"),h.bc(5,"label"),h.Mc(6,"Nombre / C\xf3digo: "),h.ac(),h.Wb(7,"input",5),h.ac(),h.bc(8,"div"),h.bc(9,"button",6),h.ic("click",(function(){return h.Dc(n),h.mc().clearFilter()})),h.Mc(10," Borrar filtro "),h.ac(),h.bc(11,"button",7),h.ic("click",(function(){return h.Dc(n),h.Cc(14).click()})),h.Mc(12," Cargar mantenimientos "),h.ac(),h.bc(13,"input",8,9),h.ic("change",(function(e){return h.Dc(n),h.mc().getFile(e)})),h.ac(),h.ac(),h.ac(),h.bc(15,"div",10),h.bc(16,"button",11),h.ic("click",(function(){return h.Dc(n),h.mc().downloaExcel()})),h.Mc(17," Descargar Excel "),h.ac(),h.ac(),h.bc(18,"button",12),h.ic("click",(function(){return h.Dc(n),h.mc().insertMaintenanceItem()})),h.Wb(19,"i",13),h.ac(),h.bc(20,"table",14),h.bc(21,"thead"),h.bc(22,"th",15),h.Mc(23,"#"),h.ac(),h.bc(24,"th"),h.Mc(25,"C\xf3digo"),h.ac(),h.bc(26,"th"),h.Mc(27,"Nombre"),h.ac(),h.bc(28,"th",16),h.Mc(29,"Tipo"),h.ac(),h.bc(30,"th",16),h.Mc(31,"Presentaci\xf3n"),h.ac(),h.bc(32,"th",16),h.Mc(33,"Valor sin impuestos"),h.ac(),h.bc(34,"th",16),h.Mc(35,"Valor Impuetos"),h.ac(),h.bc(36,"th",16),h.Mc(37,"Valor con impuestos"),h.ac(),h.bc(38,"th",16),h.Mc(39,"Acciones"),h.ac(),h.ac(),h.bc(40,"tbody"),h.Lc(41,ke,30,41,"tr",17),h.nc(42,"paginate"),h.ac(),h.ac(),h.bc(43,"div",18),h.bc(44,"pagination-controls",19),h.ic("pageChange",(function(e){return h.Dc(n),h.mc().pag=e})),h.ac(),h.ac(),h.ac()}if(2&e){var i=h.mc();h.Jb(3),h.uc("typeOfItem",i.typeFiltered),h.Jb(4),h.uc("formControl",i.txtDescription),h.Jb(34),h.uc("ngForOf",h.pc(42,3,i.lsMaintenanceItemsFiltered,h.xc(6,Ie,i.pag)))}}function Se(e,t){if(1&e){var n=h.cc();h.bc(0,"div"),h.bc(1,"app-maintenance-item",23),h.ic("maintenanceItemWasSetted",(function(){return h.Dc(n),h.mc().saveMaintenanceItem()}))("maintenanceItemWasCanceled",(function(){return h.Dc(n),h.mc().comeBackToTable()})),h.ac(),h.ac()}if(2&e){var i=h.mc();h.Jb(1),h.uc("disableControls",i.disableControls)("maintenanceItem",i.maintenanceItemSelected)}}function Te(e,t){1&e&&h.Wb(0,"app-img-loading")}var Pe,we=((Pe=function(){function e(t,n,i,a,o,r,l){var d=this;c(this,e),this.vehicleService=t,this.maintenanceItemService=n,this._alert=i,this.dialog=a,this.currency=o,this.taxesPipe=r,this.calculatePipe=l,this.pag=1,this.lsMaintenanceItems=[],this.lsMaintenanceItemsFiltered=[],this.descriptionFiltered="",this.typeOfItemId=0,this.isDetailVisible=!1,this.isErrorVisible=!1,this.errorTitle="",this.errorMessageApi="",this.isTableVisible=!0,this.isMaintenanceItemVisible=!1,this.typeFiltered=null,this.txtDescription=new s.g,this.maintenanceItemSelected={id:0,code:"",name:"",description:"",category:{id:1,name:"",state:!0,registrationDate:null},type:{id:1,code:"",state:!0,registrationDate:null},presentationUnit:{id:1,shortName:"",longName:"",state:!0,registrationDate:null},referencePrice:0,lsVehicleModel:[],lsVehicleType:[],lsTaxes:[],valueWithDiscountWithoutTaxes:0,taxesValue:0,discountValue:0,valueWithoutDiscount:0,amount:0,handleTax:!1,state:!0,registrationDate:null},this.disableControls=!1,this.txtDescription.valueChanges.subscribe((function(e){""!=e?(d.descriptionFiltered=e,d.filterMaintenanceItems(e,d.typeFiltered)):d.lsMaintenanceItemsFiltered=d.lsMaintenanceItems}))}var t;return o(e,[{key:"ngOnInit",value:function(){this.initComponents()}},{key:"initComponents",value:(t=i(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.validateUserCompany(),this.isToUpdate=!1,this.isAwaiting=!1,this.showTableItems();case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"validateUserCompany",value:function(){try{var e=JSON.parse(sessionStorage.getItem("sessionUser"));this.dealer_id=e.company.type==S.a.DEALER?e.company.id:0}catch(t){console.warn(t)}}},{key:"showTableItems",value:function(){var e=this;this.clearFilter(),this.isAwaiting=!0,this.maintenanceItemService.getMaintenanceItems(this.dealer_id).subscribe((function(t){e.lsMaintenanceItems=t,e.lsMaintenanceItemsFiltered=t})),this.lsMaintenanceItemsTmp=this.lsMaintenanceItems,this.isAwaiting=!1}},{key:"insertMaintenanceItem",value:function(){this.disableControls=!1,this.isToUpdate=!1,this.maintenanceItemSelected=null,this.hideTable()}},{key:"showTable",value:function(){this.isTableVisible=!0,this.isMaintenanceItemVisible=!1}},{key:"hideTable",value:function(){this.isTableVisible=!1,this.isMaintenanceItemVisible=!0}},{key:"updateMaintenanceItem",value:function(e){var t=this;this.disableControls=!1,this.isToUpdate=!0,this.isAwaiting=!0,this.maintenanceItemService.getMaintenanceItemById(e.id).subscribe((function(e){t.maintenanceItemSelected=e,t.showTableItems(),t.isAwaiting=!1,t.hideTable()}))}},{key:"deleteMaintenanceItem",value:function(e){var t=this;confirm("\xbfEst\xe1 seguro que desea eliminar este art\xedculo de mantenimiento?")&&(this.isAwaiting=!0,this.maintenanceItemService.delete(e).subscribe((function(e){w.a.fire({position:"center",icon:"success",title:e.message,showConfirmButton:!0}),t.showTableItems(),t.isAwaiting=!1}),(function(e){t.isErrorVisible=!0,t.errorTitle="Ocurri\xf3 un error intentando Eliminar el art\xedculo de mantenimiento",t.errorMessageApi=e.message,t.isAwaiting=!1})),this.showTableItems()),this.isAwaiting=!1}},{key:"comeBackToTable",value:function(){this.showTable()}},{key:"saveMaintenanceItem",value:function(){try{var e=this.maintenanceItemService.getItem(),t=this.setDealerToItem(e);this.saveDataInDB(t)}catch(n){console.error(n.error.Message),w.a.fire({icon:"error",title:"Oops...",text:n.error.Message,footer:"</a>Consulte con Soporte el problema</a>"}),this.isAwaiting=!1}}},{key:"saveDataInDB",value:function(e){var t=this;this.isAwaiting=!0,this.isToUpdate?this.maintenanceItemService.update(e).subscribe((function(e){w.a.fire({position:"center",icon:"success",title:e.message,showConfirmButton:!0}),t.isAwaiting=!1,t.showTable(),t.showTableItems(),t.isAwaiting=!1}),(function(e){t.isErrorVisible=!0,t.errorTitle="Ocurri\xf3 un error intentando Actualizar el item de mantenimiento",t.errorMessageApi=e.Message,t.isAwaiting=!1})):this.maintenanceItemService.insert(e).subscribe((function(e){w.a.fire({position:"center",icon:"success",title:e.message,showConfirmButton:!0}),t.isAwaiting=!1,t.showTable()}),(function(e){t.isErrorVisible=!0,t.errorTitle="Ocurri\xf3 un error intentando Insertar el item de mantenimiento",t.errorMessageApi=e.Message,t.isAwaiting=!1}))}},{key:"getVehicleModel",value:function(e){return null==e?"GEN\xc9RICO":e.shortName}},{key:"filterItems",value:function(e){this.typeOfItemId=e.id,this.filterMaintenanceItems(this.descriptionFiltered,e)}},{key:"filterMaintenanceItems",value:function(e,t){var n=this;this.lsMaintenanceItemsFiltered=this.lsMaintenanceItems.filter((function(i){return null!=e&&null!=t?i.code.toLowerCase().includes(n.descriptionFiltered)||i.name.toLowerCase().includes(n.descriptionFiltered)&&i.type.id==t.id:null!=t?i.type.id==t.id:i.code.toLowerCase().includes(e)||i.name.toLowerCase().includes(e)}))}},{key:"seeDetailsMaintenanceItem",value:function(e){var t=this;this.disableControls=!0,this.isAwaiting=!0,this.maintenanceItemService.getMaintenanceItemById(e.id).subscribe((function(e){t.maintenanceItemSelected=e,t.isAwaiting=!1,t.hideTable()}))}},{key:"clearFilter",value:function(){this.typeFiltered=null,this.txtDescription.setValue(null),this.lsMaintenanceItemsFiltered=this.lsMaintenanceItems}},{key:"setDealerToItem",value:function(e){var t=JSON.parse(sessionStorage.getItem("sessionUser")),n={};return this.isToUpdate?n=this.maintenanceItemSelected.dealer:t.company.type==S.a.DEALER?n.id=t.company.id:n=null,e.dealer=n,e}},{key:"getFile",value:function(e){var t=this,n=new V.e;T.a.convertExcelToArray(e.target.files[0],(function(e){n.data=e,n.width="800px",t.dialog.open(A,n).beforeClosed().subscribe((function(){return t.showTableItems()}))}))}},{key:"downloaExcel",value:function(){var e=this,t=this.lsMaintenanceItems.map((function(t){return{Codigo:t.code,Nombre:t.name,Tipo:t.type.name,Presentacion:t.presentationUnit.longName,ValorSinImpuestos:e.getCurrency(t.referencePrice),ValorImpuestos:e.getCurrency(e.taxesPipe.transform(t,t.referencePrice,1)),ValorConImpuestos:e.getCurrency(e.calculatePipe.transform(t,t.referencePrice,1))}}));T.a.convertArrayToFile(t,"Articulos de mantenimiento")}},{key:"getCurrency",value:function(e){return this.currency.transform(e)}}]),e}()).\u0275fac=function(e){return new(e||Pe)(h.Vb(b.a),h.Vb(f.a),h.Vb(F.a),h.Vb(V.b),h.Vb(r.d),h.Vb(J.a),h.Vb(L.a))},Pe.\u0275cmp=h.Pb({type:Pe,selectors:[["app-tbl-maintenance-item"]],decls:3,vars:3,consts:[["class","container__table","id","container__table_items",4,"ngIf"],[4,"ngIf"],["id","container__table_items",1,"container__table"],[1,"container__filter"],[3,"typeOfItem","chageType"],["type","text","placeholder","Nombre",1,"form-control",3,"formControl"],["type","button",1,"btn","btn-danger","btn-filter",3,"click"],["type","button",1,"btn","btn-success","btn-filter",3,"click"],["type","file","hidden","","accept",".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",3,"change"],["file",""],[1,"text-right","mt-2"],[1,"btn","btn-primary",3,"click"],[1,"btn-add","btn-info",3,"click"],[1,"fas","fa-plus"],[1,"table","table-striped"],[1,"col-number","col-mobile-hide"],[1,"col-mobile-hide"],[4,"ngFor","ngForOf"],[1,"paginationContainer"],[3,"pageChange"],["title","M\xe1s informaci\xf3n",1,"fas","fa-info-circle","text-info",3,"click"],["title","Modificar",1,"fas","fa-edit","text-warning",3,"click"],["title","Eliminar",1,"fas","fa-trash-alt","text-danger",3,"click"],[3,"disableControls","maintenanceItem","maintenanceItemWasSetted","maintenanceItemWasCanceled"]],template:function(e,t){1&e&&(h.Lc(0,Oe,45,8,"div",0),h.Lc(1,Se,2,2,"div",1),h.Lc(2,Te,1,0,"app-img-loading",1)),2&e&&(h.uc("ngIf",t.isTableVisible),h.Jb(1),h.uc("ngIf",t.isMaintenanceItemVisible),h.Jb(1),h.uc("ngIf",t.isAwaiting))},directives:[r.o,E,s.c,s.q,s.h,r.n,j.c,Ce,M.a],pipes:[j.b,r.w,r.x,r.d,J.a,L.a],styles:["#container__formMaintenanceItem[_ngcontent-%COMP%]{display:none}.card-body[_ngcontent-%COMP%]{width:1000px}.container__filter[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);grid-row:1fr}.container__filter[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:0 10px}.btn-filter[_ngcontent-%COMP%]{margin-top:28px;width:auto;margin-right:2px}.container__filter[_ngcontent-%COMP%]{margin-top:30px}","select[_ngcontent-%COMP%]{cursor:pointer}.container__row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:1fr}i[_ngcontent-%COMP%]{margin:0 3px;cursor:pointer}.col-number[_ngcontent-%COMP%]{max-width:50px;width:50px}.btn-add[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{cursor:pointer}.btn-add[_ngcontent-%COMP%]{border-radius:50%;width:50px;height:50px;position:relative;left:93%;margin-bottom:20px;top:30px;outline:none;text-align:center;font-size:24px;border:none;z-index:55}#container__content[_ngcontent-%COMP%]{transition:margin-left 1s;padding:20px;margin-left:250px}.container__row_buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;justify-content:right;margin-top:30px}.container__row_buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px}.overlay[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3fr);grid-template-rows:repeat(3fr);position:fixed;left:0;right:0;top:0;bottom:0;background-color:rgba(6,129,230,.1);border-radius:15px;align-items:center;justify-items:center;z-index:5000;width:100%;height:100%}.container__buttonClose[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;margin-bottom:20px}@media only screen and (max-width:600px){.col-mobile-hide[_ngcontent-%COMP%]{display:none}.btn-add[_ngcontent-%COMP%]{left:80vw}}"]}),Pe);function Ve(e,t){if(1&e&&(h.bc(0,"option",2),h.Mc(1),h.nc(2,"titlecase"),h.ac()),2&e){var n=t.$implicit;h.uc("value",n.id),h.Jb(1),h.Nc(h.oc(2,2,n.name))}}var Fe,Re=((Fe=function(){function e(t){c(this,e),this.maintenanceRoutineService=t,this.frequencyWasSelected=new h.q,this.frequencySelected=null,this.frmFrequency=new s.j({cmbFrequency:new s.g("Seleccione ...")})}return o(e,[{key:"ngOnChanges",value:function(e){for(var t in e)"countChanges"==t&&(this.frequencytoUpdate=this.maintenanceRoutineService.getFrecuencySelected(),null!=this.frequencytoUpdate?this.setDataInForm(this.frequencytoUpdate):this.clearForm())}},{key:"ngOnInit",value:function(){this.initComponents()}},{key:"initComponents",value:function(){var e=this;this.countChanges=0,this.maintenanceRoutineService.getFrequency().subscribe((function(t){e.lsFrequency=t}))}},{key:"setFrequency",value:function(e){var t=this.lsFrequency.find((function(t){return t.id==e.value}));this.maintenanceRoutineService.setFrecuencySelected(t),this.frequencyWasSelected.emit(t)}},{key:"setDataInForm",value:function(e){e?this.frmFrequency.controls.cmbFrequency.setValue(e.id):this.clearForm()}},{key:"clearForm",value:function(){this.frmFrequency.controls.cmbFrequency.setValue(0)}},{key:"setFrequencySelected",set:function(e){this.frequencySelected=e,this.setDataInForm(this.frequencySelected)}},{key:"setDisableControls",set:function(e){this.disableControls=e,this.disableControls?this.frmFrequency.disable():this.frmFrequency.enable()}}]),e}()).\u0275fac=function(e){return new(e||Fe)(h.Vb(m.a))},Fe.\u0275cmp=h.Pb({type:Fe,selectors:[["app-frequency"]],inputs:{countChanges:"countChanges",setFrequencySelected:["frequency","setFrequencySelected"],setDisableControls:["disableControls","setDisableControls"]},outputs:{frequencyWasSelected:"frequencyWasSelected"},features:[h.Hb],decls:7,vars:3,consts:[[3,"formGroup"],["formControlName","cmbFrequency",1,"browser-default","custom-select",3,"change"],[3,"value"],[3,"value",4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(h.bc(0,"form",0),h.bc(1,"label"),h.Mc(2,"Kilometraje de la rutina"),h.ac(),h.bc(3,"select",1),h.ic("change",(function(e){return t.setFrequency(e.target)})),h.bc(4,"option",2),h.Mc(5,"Seleccione ..."),h.ac(),h.Lc(6,Ve,3,4,"option",3),h.ac(),h.ac()),2&e&&(h.uc("formGroup",t.frmFrequency),h.Jb(4),h.uc("value",0),h.Jb(2),h.uc("ngForOf",t.lsFrequency))},directives:[s.B,s.r,s.k,s.x,s.q,s.i,s.u,s.A,r.n],pipes:[r.x],styles:["","select[_ngcontent-%COMP%]{cursor:pointer}.container__row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:1fr}i[_ngcontent-%COMP%]{margin:0 3px;cursor:pointer}.col-number[_ngcontent-%COMP%]{max-width:50px;width:50px}.btn-add[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{cursor:pointer}.btn-add[_ngcontent-%COMP%]{border-radius:50%;width:50px;height:50px;position:relative;left:93%;margin-bottom:20px;top:30px;outline:none;text-align:center;font-size:24px;border:none;z-index:55}#container__content[_ngcontent-%COMP%]{transition:margin-left 1s;padding:20px;margin-left:250px}.container__row_buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;justify-content:right;margin-top:30px}.container__row_buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px}.overlay[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3fr);grid-template-rows:repeat(3fr);position:fixed;left:0;right:0;top:0;bottom:0;background-color:rgba(6,129,230,.1);border-radius:15px;align-items:center;justify-items:center;z-index:5000;width:100%;height:100%}.container__buttonClose[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;margin-bottom:20px}@media only screen and (max-width:600px){.col-mobile-hide[_ngcontent-%COMP%]{display:none}.btn-add[_ngcontent-%COMP%]{left:80vw}}"]}),Fe),De=function e(){c(this,e)},qe=a("2Vo4"),Be=a("pMMx");function We(e,t){1&e&&(h.bc(0,"p"),h.Mc(1," * El campo de nombre es obligatorio "),h.ac())}function Ae(e,t){if(1&e&&(h.bc(0,"div",24),h.Lc(1,We,2,0,"p",25),h.ac()),2&e){var n=h.mc();h.Jb(1),h.uc("ngIf",n.fieldName.hasError("required"))}}function Je(e,t){if(1&e&&(h.bc(0,"div",24),h.bc(1,"p"),h.Mc(2),h.ac(),h.ac()),2&e){var n=h.mc();h.Jb(2),h.Nc(n.msgRoutineDuplicated)}}function Le(e,t){if(1&e&&(h.bc(0,"button",26),h.Mc(1," Guardar rutina "),h.ac()),2&e){var n=h.mc();h.uc("disabled",n.fieldName.invalid||!n.routineIsValid)}}function Ne(e,t){1&e&&(h.bc(0,"div",27),h.bc(1,"span"),h.Mc(2,"No se puede guardar la rutina de mantenimiento debido a que el formulario no cumple con los datos requeridos"),h.ac(),h.ac())}function Ue(e,t){1&e&&h.Wb(0,"app-img-loading",28)}var Ee,je=((Ee=function(){function e(t,n,i,a){c(this,e),this.maintenanceItemService=t,this.vehicleService=n,this.maintenanceRoutineService=i,this.formBuilder=a,this.lsMaintenanceItems=[],this.lsItemsSelected=[],this.routinewasCanceled=new h.q,this.maintenanceRoutineSelected=null,this.brandSelected=null,this.vehicleTypeSelected=null,this.vehicleModelSelected=null,this.frequencySelected=null,this.isAwaiting=!1,this.itemsWereChanged=new qe.a([]),this.maintenanceItems$=this.itemsWereChanged.asObservable(),this.totalRoutine="0",this.routineWasSaved=new h.q,this.frmMaintenanceRoutine=this.formBuilder.group({name:["",[s.z.required]],referencePrice:[""]}),this.sharedFunction=new G.a,this.routineIsValid=!0,this.initialRoutine=0,this.vehicleModel_id=0,this.frequency_id=0,this.msgRoutineDuplicated=""}var t;return o(e,[{key:"ngOnInit",value:function(){this.initComponents()}},{key:"initComponents",value:function(){this.lsMaintenanceItems=[],this.lsItemsSelected=[]}},{key:"setDataInForm",value:function(e){var t=this;this.frmMaintenanceRoutine.patchValue(e),this.brandSelected=e.vehicleModel.brand,this.vehicleTypeSelected=e.vehicleModel.type,this.frequencySelected=e.frequency,this.lsItemsSelected=e.lsItems,this.totalRoutine=this.sharedFunction.formatNumberToString(e.referencePrice),this.maintenanceItemService.getItemsByVehicleModel(e.vehicleModel.id).subscribe((function(e){t.lsMaintenanceItems=e}))}},{key:"clearDataForm",value:function(){this.frmMaintenanceRoutine.reset(),this.brandSelected=null,this.vehicleTypeSelected=null,this.frequencySelected=null,this.lsMaintenanceItems=[],this.lsItemsSelected=[],this.totalRoutine="0"}},{key:"setBrand",value:function(e){this.brandSelected=e}},{key:"setVehiclType",value:function(e){this.vehicleTypeSelected=e}},{key:"setFrequency",value:function(e){this.frequencySelected=e,this.frequency_id=null!=e&&null!=e?e.id:0,this.initialRoutine!=this.frequency_id?this.validateRoutineAndFrequency(this.vehicleModel_id,this.frequency_id):(this.routineIsValid=!0,this.msgRoutineDuplicated="")}},{key:"setVehicleModel",value:function(e){this.vehicleModelSelected=e,this.vehicleModel_id=null!=e&&null!=e?e.id:0,this.GetItemsByVehicleModel(this.vehicleModel_id),null!=this.maintenanceRoutineSelected?e.id!=this.maintenanceRoutineSelected.vehicleModel.id&&(confirm("\xbfEst\xe1 seguro que desea modificar la l\xednea?, al hacer eso perder\xe1 todos los cambios registrados hasta el momento")?(this.GetItemsByVehicleModel(this.vehicleModel_id),this.lsItemsSelected=[],this.totalRoutine="0"):this.GetItemsByVehicleModel(this.vehicleModel_id)):this.GetItemsByVehicleModel(this.vehicleModel_id),this.GetItemsByVehicleModel(this.vehicleModel_id),this.validateRoutineAndFrequency(this.vehicleModel_id,this.frequency_id)}},{key:"validateRoutineAndFrequency",value:(t=i(regeneratorRuntime.mark((function e(t,n){var i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.maintenanceRoutineService.ValidateRoutineAndFrequency(t,n).then((function(e){i.routineIsValid=e.response,i.msgRoutineDuplicated=e.message}));case 1:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"setItemsToRoutine",value:function(e){this.lsItemsSelected=e}},{key:"setTotalRoutine",value:function(e){this.totalRoutine=this.sharedFunction.formatNumberToString(e)}},{key:"GetItemsByVehicleModel",value:function(e){var t=this;this.isAwaiting=!0,this.maintenanceItemService.getItemsByVehicleModel(e).subscribe((function(e){t.lsMaintenanceItems=e,t.itemsWereChanged.next(t.lsMaintenanceItems),t.isAwaiting=!1}))}},{key:"saveMaintenanceRoutine",value:function(){try{var e=this.frmMaintenanceRoutine.controls.name,t=new De;t.id=null!=this.maintenanceRoutineSelected?this.maintenanceRoutineSelected.id:0,t.name=e.value,t.description=e.value,t.referencePrice=parseInt(this.totalRoutine.replace(/,/g,"")),t.vehicleModel=this.vehicleModelSelected,t.frequency=this.frequencySelected,t.lsItems=this.lsItemsSelected,this.routineWasSaved.emit(t)}catch(n){console.warn(n)}}},{key:"cancelRoutine",value:function(){this.routinewasCanceled.emit(!0)}},{key:"setMaintenanceRoutineSelected",set:function(e){this.maintenanceRoutineSelected=e,this.maintenanceRoutineSelected?(this.setDataInForm(this.maintenanceRoutineSelected),this.brandSelected=e.vehicleModel.brand,this.vehicleTypeSelected=e.vehicleModel.type,this.vehicleModelSelected=e.vehicleModel):(this.clearDataForm(),this.brandSelected=null,this.vehicleTypeSelected=null,this.vehicleModelSelected=null)}},{key:"setDisableControls",set:function(e){this.disableControls=e,this.disableControls?this.frmMaintenanceRoutine.controls.name.disable():this.frmMaintenanceRoutine.controls.name.enable()}},{key:"fieldName",get:function(){return this.frmMaintenanceRoutine.get("name")}}]),e}()).\u0275fac=function(e){return new(e||Ee)(h.Vb(f.a),h.Vb(b.a),h.Vb(m.a),h.Vb(s.f))},Ee.\u0275cmp=h.Pb({type:Ee,selectors:[["app-maintenance-routine"]],inputs:{countChanges:"countChanges",setMaintenanceRoutineSelected:["maintenanceRoutine","setMaintenanceRoutineSelected"],setDisableControls:["disableControls","setDisableControls"]},outputs:{routinewasCanceled:"routinewasCanceled",routineWasSaved:"routineWasSaved"},decls:39,vars:20,consts:[[1,"container__formRoutine"],[3,"formGroup","ngSubmit"],[1,"card"],["id","container__header",1,"card-header"],[1,"container__buttonClose"],[3,"click"],[1,"fas","fa-times"],[1,"card-body"],[1,"container__row"],[1,"col"],["type","text","formControlName","name","placeholder","Nombre ...",1,"form-control"],["class","error",4,"ngIf"],[3,"frequency","disableControls","frequencyWasSelected"],["type","text","formControlName","referencePrice","placeholder","Precio ...","disabled","",1,"form-control",3,"value"],[3,"brand","disableControls","onBrandWasSelected"],[3,"vehicleType","disableControls","onVehicleTypeWasModified"],[3,"brand","vehicleType","vehicleModel","disableControls","VehicleModelWasSelected"],[1,"container-table"],[3,"contract","maintenanceItems","maintenanceItemsSelected","onItemsWereSelected","onRoutineWasCalculated"],[1,"container__row_buttons"],["class","btn btn-success","type","submit",3,"disabled",4,"ngIf"],["type","button",1,"btn","btn-danger",3,"click"],["class","container__infoError","id","cont_error_add_maintenance_routine",4,"ngIf"],["style","position: absolut; z-index: 10",4,"ngIf"],[1,"error"],[4,"ngIf"],["type","submit",1,"btn","btn-success",3,"disabled"],["id","cont_error_add_maintenance_routine",1,"container__infoError"],[2,"position","absolut","z-index","10"]],template:function(e,t){1&e&&(h.bc(0,"div",0),h.bc(1,"form",1),h.ic("ngSubmit",(function(){return t.saveMaintenanceRoutine()})),h.bc(2,"div",2),h.bc(3,"div",3),h.bc(4,"legend"),h.Mc(5,"Datos de la rutina de mantenimiento"),h.ac(),h.bc(6,"div",4),h.bc(7,"a",5),h.ic("click",(function(){return t.cancelRoutine()})),h.Wb(8,"i",6),h.ac(),h.ac(),h.ac(),h.bc(9,"div",7),h.bc(10,"div",8),h.bc(11,"div",9),h.bc(12,"label"),h.Mc(13,"Nombre:"),h.ac(),h.Wb(14,"input",10),h.Lc(15,Ae,2,1,"div",11),h.ac(),h.bc(16,"div",9),h.bc(17,"app-frequency",12),h.ic("frequencyWasSelected",(function(e){return t.setFrequency(e)})),h.ac(),h.Lc(18,Je,3,1,"div",11),h.ac(),h.bc(19,"div",9),h.bc(20,"label"),h.Mc(21,"Precio de la rutina:"),h.ac(),h.Wb(22,"input",13),h.ac(),h.ac(),h.bc(23,"div",8),h.bc(24,"div",9),h.bc(25,"app-vehicle-brand",14),h.ic("onBrandWasSelected",(function(e){return t.setBrand(e)})),h.ac(),h.ac(),h.bc(26,"div",9),h.bc(27,"app-vehicle-type",15),h.ic("onVehicleTypeWasModified",(function(e){return t.setVehiclType(e)})),h.ac(),h.ac(),h.bc(28,"div",9),h.bc(29,"app-vehicle-model",16),h.ic("VehicleModelWasSelected",(function(e){return t.setVehicleModel(e)})),h.ac(),h.ac(),h.ac(),h.bc(30,"div",17),h.bc(31,"app-tbl-check-items-for-routine",18),h.ic("onItemsWereSelected",(function(e){return t.setItemsToRoutine(e)}))("onRoutineWasCalculated",(function(e){return t.setTotalRoutine(e)})),h.ac(),h.ac(),h.bc(32,"div",19),h.Lc(33,Le,2,1,"button",20),h.bc(34,"button",21),h.ic("click",(function(){return t.cancelRoutine()})),h.Mc(35," Cancelar "),h.ac(),h.ac(),h.bc(36,"div"),h.Lc(37,Ne,3,0,"div",22),h.ac(),h.ac(),h.ac(),h.ac(),h.ac(),h.Lc(38,Ue,1,0,"app-img-loading",23)),2&e&&(h.Jb(1),h.uc("formGroup",t.frmMaintenanceRoutine),h.Jb(14),h.uc("ngIf",t.fieldName.invalid&&(t.fieldName.dirty||t.fieldName.touched)),h.Jb(2),h.uc("frequency",t.frequencySelected)("disableControls",t.disableControls),h.Jb(1),h.uc("ngIf",!t.routineIsValid),h.Jb(4),h.uc("value",t.totalRoutine),h.Jb(3),h.uc("brand",t.brandSelected)("disableControls",t.disableControls),h.Jb(2),h.uc("vehicleType",t.vehicleTypeSelected)("disableControls",t.disableControls),h.Jb(2),h.uc("brand",t.brandSelected)("vehicleType",t.vehicleTypeSelected)("vehicleModel",t.vehicleModelSelected)("disableControls",t.disableControls),h.Jb(2),h.uc("contract",null)("maintenanceItems",t.lsMaintenanceItems)("maintenanceItemsSelected",t.lsItemsSelected),h.Jb(2),h.uc("ngIf",!t.disableControls),h.Jb(4),h.uc("ngIf",t.fieldName.invalid||!t.routineIsValid),h.Jb(1),h.uc("ngIf",t.isAwaiting))},directives:[s.B,s.r,s.k,s.c,s.q,s.i,r.o,Re,g.a,y.a,v.a,Be.a,M.a],styles:['.txt-amount[_ngcontent-%COMP%]{width:50px}input[_ngcontent-%COMP%]{cursor:pointer}button[_ngcontent-%COMP%]{width:250px;margin-left:10px;margin-top:20px}label[_ngcontent-%COMP%]{cursor:pointer}.container__row[_ngcontent-%COMP%]{margin-top:15px}#container__header[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}table[_ngcontent-%COMP%]{margin-top:40px}.error[_ngcontent-%COMP%]{color:red;margin-top:10px}.container__infoError[_ngcontent-%COMP%]:before{position:absolute;content:"";display:block;width:0;height:0;left:50%;margin-left:-10px;margin-top:-30px;border:10px solid transparent;border-bottom-color:#ebd4d4}.container__infoError[_ngcontent-%COMP%]{background-color:#ebd4d4;cursor:pointer;position:absolute;padding:10px 15px;z-index:50;width:200px;height:auto;border-radius:20px;right:3%;margin-top:30px;box-shadow:10px 10px 17px -7px rgba(0,0,0,.75)}.container-table[_ngcontent-%COMP%]{margin-top:20px}',"select[_ngcontent-%COMP%]{cursor:pointer}.container__row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:1fr}i[_ngcontent-%COMP%]{margin:0 3px;cursor:pointer}.col-number[_ngcontent-%COMP%]{max-width:50px;width:50px}.btn-add[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{cursor:pointer}.btn-add[_ngcontent-%COMP%]{border-radius:50%;width:50px;height:50px;position:relative;left:93%;margin-bottom:20px;top:30px;outline:none;text-align:center;font-size:24px;border:none;z-index:55}#container__content[_ngcontent-%COMP%]{transition:margin-left 1s;padding:20px;margin-left:250px}.container__row_buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;justify-content:right;margin-top:30px}.container__row_buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px}.overlay[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3fr);grid-template-rows:repeat(3fr);position:fixed;left:0;right:0;top:0;bottom:0;background-color:rgba(6,129,230,.1);border-radius:15px;align-items:center;justify-items:center;z-index:5000;width:100%;height:100%}.container__buttonClose[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;margin-bottom:20px}@media only screen and (max-width:600px){.col-mobile-hide[_ngcontent-%COMP%]{display:none}.btn-add[_ngcontent-%COMP%]{left:80vw}}"]}),Ee),He=a("KBxE");function ze(e,t){if(1&e){var n=h.cc();h.bc(0,"tr"),h.bc(1,"td"),h.Mc(2),h.ac(),h.bc(3,"td"),h.Mc(4),h.ac(),h.bc(5,"td"),h.Mc(6),h.ac(),h.bc(7,"td"),h.Mc(8),h.ac(),h.bc(9,"td"),h.Mc(10),h.nc(11,"currency"),h.ac(),h.bc(12,"td"),h.bc(13,"i",17),h.ic("click",(function(){h.Dc(n);var e=t.$implicit;return h.mc(2).seeDetailsRoutine(e)})),h.ac(),h.bc(14,"i",18),h.ic("click",(function(){h.Dc(n);var e=t.$implicit;return h.mc(2).updateRoutine(e)})),h.ac(),h.bc(15,"i",19),h.ic("click",(function(){h.Dc(n);var e=t.$implicit;return h.mc(2).deleteRoutine(e)})),h.ac(),h.ac(),h.ac()}if(2&e){var i=t.index,c=t.$implicit;h.Jb(2),h.Nc(i+1),h.Jb(2),h.Nc(c.name),h.Jb(2),h.Nc(c.vehicleModel.shortName),h.Jb(2),h.Nc(c.frequency.name),h.Jb(2),h.Nc(h.rc(11,5,c.referencePrice,"USD","symbol","1.0-0"))}}var $e=function(e){return{itemsPerPage:20,currentPage:e}};function Ge(e,t){if(1&e){var n=h.cc();h.bc(0,"div",4),h.bc(1,"div",5),h.bc(2,"div"),h.bc(3,"app-vehicle-model",6),h.ic("VehicleModelWasSelected",(function(e){return h.Dc(n),h.mc().filterByVehicleModel(e)})),h.ac(),h.ac(),h.bc(4,"div"),h.bc(5,"app-frequency",7),h.ic("frequencyWasSelected",(function(e){return h.Dc(n),h.mc().filterByFrequency(e)})),h.ac(),h.ac(),h.bc(6,"div"),h.bc(7,"button",8),h.ic("click",(function(){return h.Dc(n),h.mc().clearFilter()})),h.Mc(8," Borrar filtro "),h.ac(),h.ac(),h.ac(),h.bc(9,"div",9),h.bc(10,"button",10),h.ic("click",(function(){return h.Dc(n),h.mc().downloaExcel()})),h.Mc(11," Descargar Excel "),h.ac(),h.ac(),h.bc(12,"button",11),h.ic("click",(function(){return h.Dc(n),h.mc().insertRoutine()})),h.Wb(13,"i",12),h.ac(),h.bc(14,"table",13),h.bc(15,"thead"),h.bc(16,"th"),h.Mc(17,"#"),h.ac(),h.bc(18,"th"),h.Mc(19,"Nombre"),h.ac(),h.bc(20,"th"),h.Mc(21,"L\xednea"),h.ac(),h.bc(22,"th"),h.Mc(23,"Kilometraje de la rutina"),h.ac(),h.bc(24,"th"),h.Mc(25,"Precio de referencia con impuestos"),h.ac(),h.bc(26,"th"),h.Mc(27,"Acciones"),h.ac(),h.ac(),h.bc(28,"tbody"),h.Lc(29,ze,16,10,"tr",14),h.nc(30,"paginate"),h.ac(),h.ac(),h.bc(31,"div",15),h.bc(32,"pagination-controls",16),h.ic("pageChange",(function(e){return h.Dc(n),h.mc().p=e})),h.ac(),h.ac(),h.ac()}if(2&e){var i=h.mc();h.Jb(3),h.uc("vehicleModel",i.vehicleModelSelected),h.Jb(2),h.uc("frequency",i.frequencySelected),h.Jb(24),h.uc("ngForOf",h.pc(30,3,i.lsMaintenanceRoutinesFiltered,h.xc(6,$e,i.p)))}}function Xe(e,t){if(1&e){var n=h.cc();h.bc(0,"div",20),h.bc(1,"app-maintenance-routine",21),h.ic("routineWasSaved",(function(e){return h.Dc(n),h.mc().saveDataRoutine(e)}))("routinewasCanceled",(function(){return h.Dc(n),h.mc().cancelRoutine()})),h.ac(),h.ac()}if(2&e){var i=h.mc();h.Jb(1),h.uc("maintenanceRoutine",i.maintenanceRoutineSelected)("disableControls",i.disableControls)}}function Ke(e,t){if(1&e){var n=h.cc();h.bc(0,"app-alert-error",22),h.ic("onAlertWasClose",(function(){return h.Dc(n),h.mc().closeErrorMessage()})),h.ac()}if(2&e){var i=h.mc();h.uc("title",i.errorTitle)("errorMessage",i.errorMessageApi)}}function Ye(e,t){1&e&&h.Wb(0,"app-img-loading")}var Qe,Ze=((Qe=function(){function e(t,n,i){c(this,e),this.maintenanceRoutineService=t,this.currency=n,this._alert=i,this.lsMaintenanceRoutines=[],this.lsMaintenanceRoutinesFiltered=[],this.p=1,this.frequencySelected=null,this.vehicleModelFilterSelected=null,this.vehicleModelIdFiltered=0,this.frequencyIdFiltered=0,this.isRoutineVisible=!1,this.isTableVisible=!0,this.maintenanceRoutineSelected=null,this.isErrorVisible=!1,this.errorTitle="",this.errorMessageApi="",this.frequency_id=0,this.vehicleModel_id=0}return o(e,[{key:"ngOnInit",value:function(){this.initComponents()}},{key:"initComponents",value:function(){this.oCountChanges=0,this.isAwaiting=!1,this.isToUpdate=!1,this.containerTable=document.querySelector("#container__table"),this.containerFromRoutine=document.querySelector("#container__maintenanceRoutine"),this.showTableRoutines()}},{key:"showTableRoutines",value:function(){var e=this;this.isAwaiting=!0,this.maintenanceRoutineService.getMaintenanceRoutines().subscribe((function(t){e.lsMaintenanceRoutines=t,e.lsMaintenanceRoutinesFiltered=e.lsMaintenanceRoutines,e.isAwaiting=!1}))}},{key:"insertRoutine",value:function(){this.disableControls=!1,this.isToUpdate=!1,this.maintenanceRoutineSelected=null,this.hideTable()}},{key:"hideTable",value:function(){this.isRoutineVisible=!0,this.isTableVisible=!1}},{key:"showTable",value:function(){this.isTableVisible=!0,this.isRoutineVisible=!1}},{key:"saveDataRoutine",value:function(e){console.log("saveDataRoutine"),console.log(e),this.saveDataInDB(e),this.showTable()}},{key:"saveDataInDB",value:function(e){var t=this;this.isAwaiting=!0,this.isToUpdate?this.maintenanceRoutineService.update(e).subscribe((function(n){t._alert.succes(n.message),t.isAwaiting=!1;var i=t.lsMaintenanceRoutinesFiltered.findIndex((function(t){return t.id==e.id}));t.lsMaintenanceRoutinesFiltered[i]=e}),(function(e){t.isErrorVisible=!0,t.errorTitle="Ocurri\xf3 un error intentando Actualizar la rutina de mantenimiento",t.errorMessageApi=e.Message})):this.maintenanceRoutineService.insert(e).subscribe((function(n){t._alert.succes(n.message),t.isAwaiting=!1;try{t.lsMaintenanceRoutinesFiltered.push(e)}catch(i){t.showTableRoutines()}}),(function(e){t.isErrorVisible=!0,t.errorTitle="Ocurri\xf3 un error intentando Insertar la rutina de mantenimiento",t.errorMessageApi=e.Message}))}},{key:"cancelRoutine",value:function(){confirm("\xbfEst\xe1 seguro de querer cerrar esta ventana?, al cerrar esta ventana se perdera toda la infromaci\xf3n consignada ac\xe1")&&this.showTable()}},{key:"seeDetailsRoutine",value:function(e){var t=this;this.disableControls=!0,this.isToUpdate=!1,this.isAwaiting=!0,this.maintenanceRoutineService.getMaintenanceRoutineByID(e.id).subscribe((function(e){t.maintenanceRoutineSelected=e,t.isAwaiting=!1})),this.hideTable()}},{key:"updateRoutine",value:function(e){var t=this;this.disableControls=!1,this.isToUpdate=!0,this.isAwaiting=!0,this.maintenanceRoutineService.getMaintenanceRoutineByID(e.id).subscribe((function(e){t.maintenanceRoutineSelected=e,t.maintenanceRoutineService.setRoutine(e),t.isAwaiting=!1})),this.hideTable()}},{key:"deleteRoutine",value:function(e){var t=this;confirm("\xbfEst\xe1 seguro que desea eliminar esta rutina de mantenimiento?")&&(this.isAwaiting=!0,this.maintenanceRoutineService.delete(e).subscribe((function(e){t.isAwaiting=!1,t._alert.succes("Rutina de mantenimiento eliminada con \xe9xito"),t.showTableRoutines()})))}},{key:"filterByVehicleModel",value:function(e){this.vehicleModelIdFiltered=null!=e?e.id:0,this.vehicleModelFilterSelected=e,this.filterRoutines(this.vehicleModelIdFiltered,this.frequencyIdFiltered)}},{key:"filterByFrequency",value:function(e){this.frequencyIdFiltered=null!=e?e.id:0,this.frequencySelected=e,this.filterRoutines(this.vehicleModelIdFiltered,this.frequencyIdFiltered)}},{key:"filterRoutines",value:function(e,t){e>0&&t>0?this.lsMaintenanceRoutinesFiltered=this.lsMaintenanceRoutines.filter((function(n){return n.frequency.id==t&&n.vehicleModel.id==e})):0==e&&0==t?(this.lsMaintenanceRoutinesFiltered=this.lsMaintenanceRoutines,this.frequencySelected=null,this.vehicleModelFilterSelected=null):this.lsMaintenanceRoutinesFiltered=this.lsMaintenanceRoutines.filter((function(n){return n.vehicleModel.id==e||n.frequency.id==t}))}},{key:"clearFilter",value:function(){this.frequencySelected=null,this.vehicleModelFilterSelected=null,this.filterRoutines(0,0)}},{key:"closeErrorMessage",value:function(){this.isErrorVisible=!1}},{key:"downloaExcel",value:function(){var e=this,t=this.lsMaintenanceRoutinesFiltered.map((function(t){return{Nombre:t.name,Linea:t.vehicleModel.shortName,KilometrajeDeLaRutina:t.frequency.name,PrecioDeLaFrecuenciaConImpuestos:e.currency.transform(t.referencePrice)}}));T.a.convertArrayToFile(t,"Rutinas de mantenimiento")}}]),e}()).\u0275fac=function(e){return new(e||Qe)(h.Vb(m.a),h.Vb(r.d),h.Vb(F.a))},Qe.\u0275cmp=h.Pb({type:Qe,selectors:[["app-tbl-maintenance-routines"]],decls:4,vars:4,consts:[["id","container__table",4,"ngIf"],["class","container__maintenanceRoutine",4,"ngIf"],[3,"title","errorMessage","onAlertWasClose",4,"ngIf"],[4,"ngIf"],["id","container__table"],[1,"container__filter"],[3,"vehicleModel","VehicleModelWasSelected"],[3,"frequency","frequencyWasSelected"],["type","button",1,"btn","btn-danger","btn-filter",3,"click"],[1,"text-right","mt-2"],[1,"btn","btn-primary",3,"click"],[1,"btn-add","btn-info",3,"click"],[1,"fas","fa-plus"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[1,"paginationContainer"],[3,"pageChange"],["title","M\xe1s informaci\xf3n",1,"fas","fa-info-circle","text-info",3,"click"],["title","Modificar",1,"fas","fa-edit","text-warning",3,"click"],["title","Eliminar",1,"fas","fa-trash-alt","text-danger",3,"click"],[1,"container__maintenanceRoutine"],[3,"maintenanceRoutine","disableControls","routineWasSaved","routinewasCanceled"],[3,"title","errorMessage","onAlertWasClose"]],template:function(e,t){1&e&&(h.Lc(0,Ge,33,8,"div",0),h.Lc(1,Xe,2,2,"div",1),h.Lc(2,Ke,1,2,"app-alert-error",2),h.Lc(3,Ye,1,0,"app-img-loading",3)),2&e&&(h.uc("ngIf",t.isTableVisible),h.Jb(1),h.uc("ngIf",t.isRoutineVisible),h.Jb(1),h.uc("ngIf",t.isErrorVisible),h.Jb(1),h.uc("ngIf",t.isAwaiting))},directives:[r.o,v.a,Re,r.n,j.c,je,He.a,M.a],pipes:[j.b,r.d],styles:[".container__maintenanceRoutine[_ngcontent-%COMP%]{position:relative;top:30px;height:100vh}.container__filter[_ngcontent-%COMP%]{display:grid;grid-template-columns:40% 40% 20%;grid-template-rows:1fr;margin-top:30px}.container__filter[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:0 10px}.btn-filter[_ngcontent-%COMP%]{margin-top:28px;position:relative;width:100%}","select[_ngcontent-%COMP%]{cursor:pointer}.container__row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:1fr}i[_ngcontent-%COMP%]{margin:0 3px;cursor:pointer}.col-number[_ngcontent-%COMP%]{max-width:50px;width:50px}.btn-add[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{cursor:pointer}.btn-add[_ngcontent-%COMP%]{border-radius:50%;width:50px;height:50px;position:relative;left:93%;margin-bottom:20px;top:30px;outline:none;text-align:center;font-size:24px;border:none;z-index:55}#container__content[_ngcontent-%COMP%]{transition:margin-left 1s;padding:20px;margin-left:250px}.container__row_buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;justify-content:right;margin-top:30px}.container__row_buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px}.overlay[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3fr);grid-template-rows:repeat(3fr);position:fixed;left:0;right:0;top:0;bottom:0;background-color:rgba(6,129,230,.1);border-radius:15px;align-items:center;justify-items:center;z-index:5000;width:100%;height:100%}.container__buttonClose[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;margin-bottom:20px}@media only screen and (max-width:600px){.col-mobile-hide[_ngcontent-%COMP%]{display:none}.btn-add[_ngcontent-%COMP%]{left:80vw}}"]}),Qe);function et(e,t){1&e&&h.Wb(0,"app-img-loading")}var tt,nt,it,ct=[{path:"",component:u.a,children:[{path:"",component:(tt=function(){function e(){c(this,e),this.p=1}return o(e,[{key:"ngOnInit",value:function(){this.initComponents()}},{key:"initComponents",value:function(){}}]),e}(),tt.\u0275fac=function(e){return new(e||tt)},tt.\u0275cmp=h.Pb({type:tt,selectors:[["app-items-and-routines"]],decls:9,vars:1,consts:[["id","container__content"],["mat-align-tabs","start"],["label","Matrices de mantenimiento"],["label","Art\xedculos de mantenimiento"],["label","Rutinas de mantenimiento"],[4,"ngIf"]],template:function(e,t){1&e&&(h.bc(0,"div",0),h.bc(1,"mat-tab-group",1),h.bc(2,"mat-tab",2),h.Wb(3,"app-tbl-maintenance-matrix"),h.ac(),h.bc(4,"mat-tab",3),h.Wb(5,"app-tbl-maintenance-item"),h.ac(),h.bc(6,"mat-tab",4),h.Wb(7,"app-tbl-maintenance-routines"),h.ac(),h.ac(),h.ac(),h.Lc(8,et,1,0,"app-img-loading",5)),2&e&&(h.Jb(8),h.uc("ngIf",t.isAwaiting))},directives:[p.b,p.a,O,we,Ze,r.o,M.a],styles:[".card-body[_ngcontent-%COMP%]{padding:10px}.container__titles[_ngcontent-%COMP%]{overflow:hidden;border:1px solid #ccc;background-color:#f1f1f1}.container__titles[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:inherit;float:left;border:none;outline:none;cursor:pointer;padding:14px 16px;transition:.3s;font-size:20px}.container__titles[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#ddd}.container__titles[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:#ccc}.tab_content[_ngcontent-%COMP%]{padding:20px 50px;border:1px solid #ccc;border-top:none}#container__content[_ngcontent-%COMP%]{transition:margin-left 1s;padding:20px;margin-left:250px}i[_ngcontent-%COMP%]{margin:0 3px;cursor:pointer}.col-number[_ngcontent-%COMP%]{max-width:50px;width:50px}.btn-add[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{cursor:pointer}.btn-add[_ngcontent-%COMP%]{border-radius:50%;width:50px;height:50px;position:relative;left:93%;margin-bottom:20px;top:30px;outline:none;text-align:center;font-size:24px;border:none;z-index:55}#container__formMaintenanceItem[_ngcontent-%COMP%]{display:none}.card-body[_ngcontent-%COMP%]{width:850px}.overlay[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3fr);grid-template-rows:repeat(3fr);position:absolute;left:0;right:0;top:0;bottom:0;background-color:rgba(6,129,230,.1);border-radius:15px;align-items:center;justify-items:center;z-index:5000;width:100%;height:100%}"]}),tt)}]}],at=((it=function e(){c(this,e)}).\u0275mod=h.Tb({type:it}),it.\u0275inj=h.Sb({factory:function(e){return new(e||it)},imports:[[d.f.forChild(ct)],d.f]}),it),ot=((nt=function e(){c(this,e)}).\u0275mod=h.Tb({type:nt}),nt.\u0275inj=h.Sb({factory:function(e){return new(e||nt)},imports:[[r.c,s.l,s.w,l.a,at,p.c,V.g]]}),nt)},"97n9":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n("fXoL"),a=n("3Pt+"),r=n("0x5P"),s=n("ofXK");function l(e,t){if(1&e&&(i.bc(0,"option",2),i.Mc(1),i.nc(2,"titlecase"),i.ac()),2&e){var n=t.$implicit;i.uc("value",n.id),i.Jb(1),i.Oc(" ",i.oc(2,2,n.shortName)," ")}}var d=function(){var e=function(){function e(t){c(this,e),this.vehicleService=t,this.lsVehicleModel=[],this.lsVehicleModelFiltered=[],this.VehicleModelWasSelected=new i.q,this.vehicleModelSelected=null,this.brandSelected=null,this.vehicleTypeSelected=null,this.frmVehicleModel=new a.j({cmbVehicleModel:new a.g("Seleccione ...")})}return o(e,[{key:"ngOnInit",value:function(){this.initComponents()}},{key:"initComponents",value:function(){this.getDataToLists(0,0)}},{key:"getDataToLists",value:function(e,t){var n=this;try{this.vehicleService.getVehicleModelByBrandAndType(e,t).subscribe((function(e){n.lsVehicleModel=e,n.lsVehicleModelFiltered=e}))}catch(i){console.error(i)}}},{key:"filterVehicleModels",value:function(e,t){var n=e?e.id:0,i=t?t.id:0;this.lsVehicleModelFiltered=0!=n&&0!=i?this.lsVehicleModel.filter((function(e){return e.brand.id==n&&e.type.id==i})):this.lsVehicleModel}},{key:"setVehicleModel",value:function(e){var t=this.lsVehicleModel.find((function(t){return t.id==e.value}));this.VehicleModelWasSelected.emit(null!=t?t:null)}},{key:"setDataInFields",value:function(e){var t=this.frmVehicleModel.controls.cmbVehicleModel;e?t.setValue(e.id):this.clearDataFields()}},{key:"clearDataFields",value:function(){this.frmVehicleModel.controls.cmbVehicleModel.setValue(0)}},{key:"setDisableControls",set:function(e){this.disableControls=e,this.disableControls?this.frmVehicleModel.disable():this.frmVehicleModel.enable()}},{key:"setVehicleModelSelected",set:function(e){this.vehicleModelSelected=e,this.setDataInFields(this.vehicleModelSelected)}},{key:"setBrandSelected",set:function(e){this.brandSelected=e,this.vehicleModelSelected||this.filterVehicleModels(this.brandSelected,this.vehicleTypeSelected),this.setDataInFields(this.vehicleModelSelected)}},{key:"setVehicleType",set:function(e){this.vehicleTypeSelected=e,this.vehicleModelSelected||this.filterVehicleModels(this.brandSelected,this.vehicleTypeSelected),this.setDataInFields(this.vehicleModelSelected)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.Vb(r.a))},e.\u0275cmp=i.Pb({type:e,selectors:[["app-vehicle-model"]],inputs:{setDisableControls:["disableControls","setDisableControls"],setVehicleModelSelected:["vehicleModel","setVehicleModelSelected"],setBrandSelected:["brand","setBrandSelected"],setVehicleType:["vehicleType","setVehicleType"]},outputs:{VehicleModelWasSelected:"VehicleModelWasSelected"},decls:7,vars:3,consts:[[3,"formGroup"],["formControlName","cmbVehicleModel",1,"browser-default","custom-select",3,"change"],[3,"value"],[3,"value",4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(i.bc(0,"form",0),i.bc(1,"label"),i.Mc(2,"L\xednea"),i.ac(),i.bc(3,"select",1),i.ic("change",(function(e){return t.setVehicleModel(e.target)})),i.bc(4,"option",2),i.Mc(5,"Seleccione ..."),i.ac(),i.Lc(6,l,3,4,"option",3),i.ac(),i.ac()),2&e&&(i.uc("formGroup",t.frmVehicleModel),i.Jb(4),i.uc("value",0),i.Jb(2),i.uc("ngForOf",t.lsVehicleModelFiltered))},directives:[a.B,a.r,a.k,a.x,a.q,a.i,a.u,a.A,s.n],pipes:[s.x],styles:[".row__container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:1fr;margin-top:10px;margin-bottom:10px}select[_ngcontent-%COMP%]{cursor:pointer}@media only screen and (max-width:600px){.row__container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr 1fr 1fr;margin-top:0;margin-bottom:0}.col[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px}}"]}),e}()},fp5r:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n("fXoL"),r=n("3Pt+"),s=n("0x5P"),l=n("ofXK");function d(e,t){if(1&e&&(a.bc(0,"option",2),a.Mc(1),a.nc(2,"titlecase"),a.ac()),2&e){var n=t.$implicit;a.uc("value",n.id),a.Jb(1),a.Nc(a.oc(2,2,n.name))}}var u=function(){var e=function(){function e(t){c(this,e),this.vehicleService=t,this.vehicleBrandWasSetted=new a.q,this.defaultBrandId=1,this.brandSelected=null,this.onBrandWasSelected=new a.q,this.frmBrand=new r.j({cmbBrand:new r.g("Seleccione ...")})}var t;return o(e,[{key:"ngOnInit",value:function(){this.initComponents()}},{key:"initComponents",value:(t=i(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{this.vehicleService.getBrands().subscribe((function(e){t.lsBrand=e,t.frmBrand.controls.cmbBrand.setValue(0!==t.defaultBrandId?t.defaultBrandId:0)}))}catch(n){console.error(n.Message)}case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"setBrand",value:function(e){var t=this.lsBrand.find((function(t){return t.id==e.value}));this.vehicleService.setBrandSelected(t),this.vehicleBrandWasSetted.emit(!0),this.onBrandWasSelected.emit(t)}},{key:"setDataInForm",value:function(e){this.frmBrand.controls.cmbBrand.setValue(e?e.id:0)}},{key:"clearDataForm",value:function(){var e=0!==this.defaultBrandId?this.defaultBrandId:0;this.frmBrand.controls.cmbBrand.setValue(e),0!==e&&(this.lsBrand.find((function(t){return t.id==e})),this.vehicleBrandWasSetted.emit(!0))}},{key:"setBrandSelected",set:function(e){this.brandSelected=e,this.setDataInForm(e)}},{key:"setDisableControls",set:function(e){this.disableControls=e,this.disableControls?this.frmBrand.disable():this.frmBrand.enable()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Vb(s.a))},e.\u0275cmp=a.Pb({type:e,selectors:[["app-vehicle-brand"]],inputs:{defaultBrandId:"defaultBrandId",setBrandSelected:["brand","setBrandSelected"],setDisableControls:["disableControls","setDisableControls"]},outputs:{vehicleBrandWasSetted:"vehicleBrandWasSetted",onBrandWasSelected:"onBrandWasSelected"},decls:7,vars:3,consts:[[3,"formGroup"],["formControlName","cmbBrand",1,"browser-default","custom-select",3,"change"],[3,"value"],[3,"value",4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(a.bc(0,"form",0),a.bc(1,"label"),a.Mc(2,"Marca"),a.ac(),a.bc(3,"select",1),a.ic("change",(function(e){return t.setBrand(e.target)})),a.bc(4,"option",2),a.Mc(5,"Seleccione ..."),a.ac(),a.Lc(6,d,3,4,"option",3),a.ac(),a.ac()),2&e&&(a.uc("formGroup",t.frmBrand),a.Jb(4),a.uc("value",0),a.Jb(2),a.uc("ngForOf",t.lsBrand))},directives:[r.B,r.r,r.k,r.x,r.q,r.i,r.u,r.A,l.n],pipes:[l.x],styles:["select[_ngcontent-%COMP%]{cursor:pointer}"]}),e}()}}])}();