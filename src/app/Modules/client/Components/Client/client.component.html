<div id="container__content">
  <mat-vertical-stepper
  [linear]="true">
    <mat-step [completed]="isBasicDataCompleted">
      <ng-template matStepLabel>Datos básicos del cliente</ng-template>
      <div class="card">
        <app-person
          [configComponent]="oConfigPersonComp"
          [formHasError]="bFormHasError"
          [error]="errorMessage"
          [returnPath]="sReturnPath"
          [personToUpdate]="client"
          [frmPersonMustBeBlocked]="blockFormClient"
          (personWasSetted)="setPersonInfo()"
          [areVisibleButtonActions]="areVisibleButtonsForBasicData">
        </app-person>
      </div>
      <div class="container-buttons">
        <button
          id="btn-next-step-basic-data"
          matStepperNext
          type="button"
          mat-raised-button
          color="primary"
          class="btn-step" >
          Siguiente
        </button>
      </div>

    </mat-step>
    <mat-step
      [completed]="areContactCompleted">
      <ng-template matStepLabel>Contactos</ng-template>
      <app-contact
        [client]="client"
        [contacts]="lsContacts"
        [action]="action"
        [disableActionButtons]="blockFormClient"
        (onContactsWereModified)="updateContactsToClient($event)">
      </app-contact>
      <div class="container-step-buttons">
        <button
          matStepperPrevious
          type="button"
          mat-raised-button
          color="primary"
          class="btn-step">
          Atrás
        </button>
        <button
          matStepperNext
          type="button"
          mat-raised-button
          color="primary"
          class="btn-step">
          Siguiente
        </button>
      </div>
    </mat-step>
    <mat-step
      [completed]="areBranchCompleted">
      <ng-template matStepLabel>Sucursales</ng-template>
      <app-branch
        [client]="client"
        [branchs]="lsBranchs"
        [action]="action"
        [isToClient]="oIsToClient"
        [disableActionButtons]="blockFormClient"
        (onBranchsWereModified)="updateBranchsToClient($event)">
      </app-branch>
      <div class="container-step-buttons">
        <button
          matStepperPrevious
          type="button"
          mat-raised-button
          color="primary"
          class="btn-step">
          Atrás
        </button>
        <button
          matStepperNext
          type="button"
          mat-raised-button
          color="primary"
          class="btn-step">
          Siguiente
        </button>
      </div>
    </mat-step>
    <mat-step
      [completed]="areVehiclesCompleted">
      <ng-template matStepLabel>Vehículos</ng-template>
      <app-vehicles-by-client
        [client]="client"
        [action]="action"
        [vehicles]="lsVehicles"
        [clientWasSaved]="oClientWasSaved"
        [disableActionButtons]="blockFormClient"
        (onVehiclesWereModified)="updateVehiclesToClient($event)">
      </app-vehicles-by-client>
      <div class="container-step-buttons">
        <button
          matStepperPrevious
          type="button"
          mat-raised-button
          color="primary"
          class="btn-step">
          Atrás
        </button>
        <button
          matStepperNext
          type="button"
          mat-raised-button
          color="primary"
          class="btn-step">
          Siguiente
        </button>
      </div>
    </mat-step>
    <mat-step
      [completed]="isContractualInfoSetted">
      <ng-template matStepLabel>Información contractual</ng-template>
      <app-contractual-information
        [isFormBlocked]="blockFormClient"
        [quotaApproved]="quotaApproved"
        [contractualInformation]="contractualInformation"
        (onContractualInformationWasSetted)="updateContractualInformation($event)"
        (onPrevStep)="prevStepContractualInfo()">
      </app-contractual-information>
      <div class="container-buttons">
        <button
          id="btn-prev-step-contractual-info"
          matStepperPrevious
          type="button"
          mat-raised-button
          color="primary"
          class="btn-step">
          Atrás
        </button>
        <button
          id="btn-next-step-contractual-info"
          matStepperNext
          type="button"
          mat-raised-button
          color="primary"
          class="btn-step">
          Siguiente
        </button>
      </div>
    </mat-step>
    <mat-step>
      <ng-template matStepLabel>Información financiera</ng-template>
      <app-financial-information-by-client
        [client]="client">
      </app-financial-information-by-client>
      <div class="container-step-buttons">
        <button
          matStepperPrevious
          type="button"
          mat-raised-button
          color="primary"
          class="btn-step btn-financial-info">
          Atrás
        </button>
      </div>
      <div class="container-action-buttons">
        <button
          type="button"
          class="btn btn-danger"
          (click)="comeBack()"
          >Cancelar
        </button>
        <button
          *ngIf="isButtonSaveClientVisible"
          type="button"
          class="btn btn-success"
          (click)="saveClient()">
          Guardar Cliente
        </button>
      </div>
    </mat-step>

  </mat-vertical-stepper>
  <app-alert-error
    *ngIf="isErrorVisible"
    [title]="errorTitle"
    [errorMessage]="errorMessageApi"
    (onAlertWasClose)="closeErrorMessage()">
  </app-alert-error>
</div>
<app-img-loading *ngIf="isAwaiting"></app-img-loading>

